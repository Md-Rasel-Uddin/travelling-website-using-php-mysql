function viewDepositDetails(n){tjq("#loader").show();var t=tjq(n).attr("id");tjq.ajax({url:"GetDepositRequestBasedOnRequestId",type:"post",data:{depositRequestId:t},success:function(n){tjq("#dvDepositType").html("");tjq("#dvDepositType").html(n);var t=tjq("#typeid").val();t==1?tjq("#cheque_popup").modal("show"):t==2?tjq("#bankdeposit_popup").modal("show"):t==3?tjq("#banktransfer_popup").modal("show"):t==4?tjq("#Cash_popup").modal("show"):t==5&&tjq("#other_popup").modal("show");tjq("#loader").hide()},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some thing went wrong")}})}function acceptOrReject(n){var t=tjq("#requestid").val(),i=tjq("#Comment").val();if(tjq("#Comment").val()==""||tjq("#Comment").val()==null||tjq("#Comment").val()=="undefined")return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please write comment in Description field"),!1;tjq("#loader").show();tjq.ajax({url:"AcceptOrRejectDepositReqest",data:{Action:n,depositRequestId:t,description:i},type:"post",success:function(t){tjq(".modal").modal("hide");t?n=="Accept"?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Request approved successfully.")):(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Request rejected successfully.")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some thing went wrong"));tjq("#loader").hide()},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some error occured please contact administrator.")}})}function validationforCommissionandMarkup(){tjq(".validationMarkupAndCommision").on("change",function(){var c=tjq(this).attr("id"),l=tjq("#txtAirLine").val(),s=tjq("#txtRBD").val(),o=tjq("#txtOrigincntry").val(),h=tjq("#txtDestCntry").val(),f=tjq("#txtOriginAirport").val(),r=tjq("#txtDestinationAirport").val(),e="",u="",i,a,n,t;if(tjq("#txtViaCntry").length>0&&(e=tjq("#txtViaCntry").val()),tjq("#txtViaAirport").length>0&&(u=tjq("#txtViaAirport").val()),l!=""&&l!=undefined)if(l.length==3)l.toUpperCase()!="ALL"&&(tjq("#txtAirLine").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if((l.length>=3||l.length!=2)&&(l.includes(",")||l.length!=2)){if(i=l.substr(l.length-1),i==",")return tjq("#txtAirLine").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=l.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtAirLine").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(e!=""&&e!=undefined)if(e.length==3)e.toUpperCase()!="ALL"&&(tjq("#txtViaCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(e!=""&&(e.length>=3||e.length!=2)&&(e.includes(",")||e.length!=2)){if(i=e.substr(e.length-1),a=e.substring(0,e.length-1),i==",")return tjq("#txtViaCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=e.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtViaCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(o!=""&&o!=undefined)if(o.length==3)o.toUpperCase()!="ALL"&&(tjq("#txtOrigincntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(o!=""&&(o.length>=3||o.length!=2)&&(o.includes(",")||o.length!=2)){if(i=o.substr(o.length-1),a=o.substring(0,o.length-1),i==",")return tjq("#txtOrigincntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=o.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtOrigincntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(h!=""&&h!=undefined)if(h.length==3)h.toUpperCase()!="ALL"&&(tjq("#txtDestCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(h!=""&&(h.length>=3||h.length!=2)&&(h.includes(",")||h.length!=2)){if(i=h.substr(h.length-1),i==",")return tjq("#txtDestCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=h.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtDestCntry").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(s!=""&&s!=undefined)if(s.length!=3||s.includes(",")){if(s!=""&&(s.length>=2||s.length!=1)&&(s.includes(",")||s.length!=1)){if(i=s.substr(s.length-1),i==",")return tjq("#txtRBD").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=s.split(","),t=0;t<n.length;t++)if(n[t].length!=1)return tjq("#txtRBD").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else s.toUpperCase()!="ALL"&&(tjq("#txtRBD").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));if(u!=""&&u!=undefined)if(u.length==3||u.includes(",")){if(u.toUpperCase().indexOf("ALL")!=-1&&u.length>3&&u.includes(","))tjq("#txtViaAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"});else if(u!=""&&(u.length>=3||u.length!=3)&&(u.includes(",")||u.length!=3)){if(i=u.substr(u.length-1),a=u.substring(0,u.length-1),i==",")return tjq("#txtViaAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=u.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtViaAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else tjq("#txtViaAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"});if(f!=""&&f!=undefined)if(f.length==3||f.includes(",")){if(f.toUpperCase().indexOf("ALL")!=-1&&f.length>3&&f.includes(","))return tjq("#txtOriginAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;if(f!=""&&(f.length>=3||f.length!=3)&&(f.includes(",")||f.length!=3)){if(i=f.substr(f.length-1),a=f.substring(0,f.length-1),i==",")return tjq("#txtOriginAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=f.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtOriginAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else return tjq("#txtOriginAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;if(r!=""&&r!=undefined)if(r.length==3||r.includes(",")){if(r.toUpperCase().indexOf("ALL")!=-1&&r.length>3&&r.includes(","))return alert(r.length),tjq("#txtDestinationAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;if(r!=""&&(r.length>=3||r.length!=3)&&(r.includes(",")||r.length!=3)){if(i=r.substr(r.length-1),a=r.substring(0,r.length-1),i==",")return tjq("#txtDestinationAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=r.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtDestinationAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid  Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else return tjq("#txtDestinationAirport").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;if((c=="txtOriginAirport"||c=="txtDestinationAirport")&&tjq("#"+c).val()!=null&&tjq("#"+c).val()!=""&&tjq("#"+c).val()!=undefined){var v="",y="";c=="txtOriginAirport"?(dataObject={airportCode:tjq("#"+c).val(),countryCode:tjq("#txtOrigincntry").val()},v="Origin country code should not be empty !",y="Origin country code is not matched with origin airport code !"):c=="txtDestinationAirport"&&(dataObject={airportCode:tjq("#"+c).val(),countryCode:tjq("#txtDestCntry").val()},v="Destination country code should not be empty !",y="Destination country code is not matched with Destination airport code !");tjq.ajax({url:"/Common/CheckOriginAndDestinationAirportCode",type:"post",dataType:"json",data:dataObject,success:function(n){n[0].Value&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(v),tjq("#"+c).val(""));n[1].Value&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(y),tjq("#"+c).val(""))},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some error occured please contact administrator.")}})}})}function validationforSearchRules(){tjq(".validationforSearchRules").on("change",function(){var c=tjq(this).attr("id"),l=tjq("#txtAirLine1").val(),s=tjq("#txtRBD1").val(),o=tjq("#txtOrigincntry1").val(),h=tjq("#txtDestCntry1").val(),f=tjq("#txtOriginAirport1").val(),r=tjq("#txtDestinationAirport1").val(),e="",u="",i,a,n,t;if(tjq("#txtViaCntry1").length>0&&(e=tjq("#txtViaCntry1").val()),tjq("#txtViaAirport1").length>0&&(u=tjq("#txtViaAirport1").val()),e!=""&&e!=undefined)if(e.length==3)e.toUpperCase()!="ALL"&&(tjq("#txtViaCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(e!=""&&(e.length>=3||e.length!=2)&&(e.includes(",")||e.length!=2)){if(i=e.substr(e.length-1),a=e.substring(0,e.length-1),i==",")return tjq("#txtViaCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=e.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtViaCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(u!=""&&u!=undefined)if(u.length==3||u.includes(",")){if(u.toUpperCase().indexOf("ALL")!=-1&&u.length>3&&u.includes(","))tjq("#txtViaAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"});else if(u!=""&&(u.length>=3||u.length!=3)&&(u.includes(",")||u.length!=3)){if(i=u.substr(u.length-1),a=u.substring(0,u.length-1),i==",")return tjq("#txtViaAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=u.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtViaAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else tjq("#txtViaAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Via Airport Code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"});if(l!=""&&l!=undefined)if(l.length==3)l.toUpperCase()!="ALL"&&(tjq("#txtAirLine1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if((l.length>=3||l.length!=2)&&(l.includes(",")||l.length!=2)){if(i=l.substr(l.length-1),i==",")return tjq("#txtAirLine1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=l.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtAirLine1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(o!=""&&o!=undefined)if(o.length==3)o.toUpperCase()!="ALL"&&(tjq("#txtOrigincntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(o!=""&&(o.length>=3||o.length!=2)&&(o.includes(",")||o.length!=2)){if(i=o.substr(o.length-1),a=o.substring(0,o.length-1),i==",")return tjq("#txtOrigincntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=o.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtOrigincntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(h!=""&&h!=undefined)if(h.length==3)h.toUpperCase()!="ALL"&&(tjq("#txtDestCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));else if(h!=""&&(h.length>=3||h.length!=2)&&(h.includes(",")||h.length!=2)){if(i=h.substr(h.length-1),i==",")return tjq("#txtDestCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=h.split(","),t=0;t<n.length;t++)if(n[t].length!=2)return tjq("#txtDestCntry1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Country code! (Ex: IN,US,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}if(s!=""&&s!=undefined)if(s.length!=3||s.includes(",")){if(s!=""&&(s.length>=2||s.length!=1)&&(s.includes(",")||s.length!=1)){if(i=s.substr(s.length-1),i==",")return tjq("#txtRBD1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=s.split(","),t=0;t<n.length;t++)if(n[t].length!=1)return tjq("#txtRBD1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else s.toUpperCase()!="ALL"&&(tjq("#txtRBD1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}));if(f!=""&&f!=undefined)if(f.length==3||f.includes(",")){if(f.toUpperCase().indexOf("ALL")!=-1&&f.length>3&&f.includes(","))tjq("#txtOriginAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"});else if(f!=""&&(f.length>=3||f.length!=3)&&(f.includes(",")||f.length!=3)){if(i=f.substr(f.length-1),a=f.substring(0,f.length-1),i==",")return tjq("#txtOriginAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=f.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtOriginAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else tjq("#txtOriginAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"});if(r!=""&&r!=undefined)if(r.length==3||r.includes(",")){if(r.toUpperCase().indexOf("ALL")!=-1&&r.length>3&&r.includes(","))alert(r.length),tjq("#txtDestinationAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Origin Airport code! (Ex: ALL/DXB,BLR)"),tjq("#popupfailure").css({"z-index":"9999"});else if(r!=""&&(r.length>=3||r.length!=3)&&(r.includes(",")||r.length!=3)){if(i=r.substr(r.length-1),a=r.substring(0,r.length-1),i==",")return tjq("#txtDestinationAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(n=[],n=r.split(","),t=0;t<n.length;t++)if(n[t].length!=3)return tjq("#txtDestinationAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid  Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else tjq("#txtDestinationAirport1").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Destination Airport code! (Ex: BLR,DXB,ALL)"),tjq("#popupfailure").css({"z-index":"9999"});if((c=="txtOriginAirport1"||c=="txtDestinationAirport1")&&tjq("#"+c).val()!=null&&tjq("#"+c).val()!=""&&tjq("#"+c).val()!=undefined){var v="",y="";c=="txtOriginAirport1"?(dataObject={airportCode:tjq("#"+c).val(),countryCode:tjq("#txtOrigincntry1").val()},v="Origin country code should not be empty !",y="Origin country code is not matched with origin airport code !"):c=="txtDestinationAirport1"&&(dataObject={airportCode:tjq("#"+c).val(),countryCode:tjq("#txtDestCntry1").val()},v="Destination country code should not be empty !",y="Destination country code is not matched with Destination airport code !");tjq.ajax({url:"/Common/CheckOriginAndDestinationAirportCode",type:"post",dataType:"json",data:dataObject,success:function(n){n[0].Value&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(v),tjq("#"+c).val(""));n[1].Value&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(y),tjq("#"+c).val(""))},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some error occured please contact administrator.")}})}})}function GoogleMaps(){var n=tjq("#txtLatitude").val(),t=tjq("#txtLongitude").val();n==undefined||n==""||t==undefined||t==""?(tjq("#hotelMapNotAvailable").show(),tjq("#hotelMapsIframe").hide()):(tjq("#hotelMapNotAvailable").hide(),tjq("#hotelMapsIframe").show(),tjq("#hotelMapsIframe").attr("src","//maps.google.com/maps?q="+n+","+t+"&hl=es;z=14&output=embed"))}function CheckDuplicateHotelMarkup(){tjq(".duplicate").on("change",function(){var f=tjq("#ddlExistingMarkupField").val();if(f!=0){var t=tjq("#txtRegionName").val(),i=tjq("#txtTravelFrom").val(),r=tjq("#txtTravelTo").val(),u=tjq("#txtValidFrom").val(),n=tjq("#txtValidTo").val();(t!=""||i!=""&&r!=""&&u!="undefined"&&n!=""&&n!="undefined")&&ValidateDuplicateHotelMarkup(t,i,r,u,n)}})}function ValidateDuplicateHotelMarkup(n,t,i,r,u){tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/CommissionAndMarkupHotel/CheckDuplicateRecord",context:document.body,data:{regionName:n,travelFrom:t,travelTo:i,validFrom:r,validTo:u},success:function(n){n==!1&&(tjq("#txtValidFrom").val(""),tjq("#txtValidTo").val(""),tjq("#txtTravelFrom").val(""),tjq("#txtTravelTo").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Same Record is alredy exists with same region!"));tjq("#loader").hide()},error:function(n){tjq("#loader").hide();console.log(n.responseText);alert("Error has occurred..")}})}function RegionListAutoComplete(){tjq("input.RegionList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Common/RegionsList?term="+n.term,success:function(n){n.unshift("ALL");n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".RegionList").val("")}})})})}function MarkupShowandHide(){var t=tjq("#txtMarkupType option:selected").val(),n;t=="Fixed"?(n=tjq("#txtMarkupOn"),n[0].selectedIndex=0,tjq("#divmarkupOn").hide()):tjq("#divmarkupOn").show();tjq("#txtMarkupType").change(function(){if(tjq("#txtMarkupType").val()!="Fixed")tjq("#divmarkupOn").show();else{var n=tjq("#txtMarkupOn");n[0].selectedIndex=0;tjq("#divmarkupOn").hide()}})}function ValidateTravelMarkupEndDate(){var n=tjq("#txtmarkupfrom").val(),t=tjq("#txtmarkupTo").val(),i=tjq("#txtflightfrom").val(),r=tjq("#txtflightTo").val(),u=n.split("/"),f=t.split("/"),s=new Date(u[2],u[1],u[0]),h=new Date(f[2],f[1],f[0]),e=i.split("/"),o=r.split("/"),c=new Date(e[2],e[1],e[0]),l=new Date(o[2],o[1],o[0]);return(n!=""||n!="undefined")&&(t!=""||t!="undefined")&&s>h&&(tjq("#txtmarkupfrom").val(""),tjq("#txtmarkupTo").val(""),alert("From date should not be greater than To date")),(i!=""||i!="undefined")&&(r!=""||r!="undefined")&&c>l&&(tjq("#txtflightfrom").val(""),tjq("#txtflightTo").val(""),alert("From date should not be greater than To date")),!1}function ValidateBookingEndDate(){var n=tjq("#txtbkgfrom").val(),t=tjq("#txtbkgTo").val(),i=n.split("/"),r=t.split("/"),u=new Date(i[2],i[1],i[0]),f=new Date(r[2],r[1],r[0]);return(n!=""||n!="undefined")&&(t!=""||t!="undefined")&&u>f&&(tjq("#txtbkgfrom").val(""),tjq("#txtbkgTo").val(""),alert("From date should not be greater than To date")),!1}function CountriesandAirLinesAutoComplete(){tjq("input.CountryList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Common/GetcountriesList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".CountryList").val("")}})})});tjq("input.AirLineList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Common/GetAirLinesList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".AirLineList").val("")}})})})}function CheckExistingMarkup(){tjq("#ddlExistingMarkupField").change(function(){tjq("#ddlExistinmarkup").val()=="0"?tjq("#create_Existing").show():tjq("#create_Existing").hide()})}function CheckExistingHotelMarkup(){tjq("#ddlExistingdivHotelmarkup").change(function(){tjq("#ddlExistingMarkupField").val()=="0"?tjq("#divHotelmarkup").show():tjq("#divHotelmarkup").hide()})}function UpdationFareMatrixvalidation(){tjq("#ViewFareMatrixForm").validationEngine({scroll:!1,maxErrorsPerField:1,promptPosition:"bottomLeft",onValidationComplete:function(n,t){if(t==!0)return tjq("#ViewFareMatrixForm").submit(),!0}})}function LoadCountriesAutocomplete(){tjq.ajax({url:"/Common/Getcountries",method:"GET",datatype:"json",success:function(n){var t=tjq(".country");t.autocomplete({source:n,change:function(n,i){i.item||t.val("")}})}})}function Bindrolerightactiveclick(){tjq(".rolenav li").on("click",function(){var i,n,t,r;tjq(".rolenav li").removeClass("active");tjq(this).addClass("active");i=tjq(this).attr("id");n=[];n=i.split("-");t="";n[0].toLocaleLowerCase()=="internal"?t=0:n[0].toLocaleLowerCase()=="external"&&(t=1);tjq("#loader").show();r={roleid:n[1],featuretype:t};tjq.ajax({url:"/RolesAndPermission/ViewPermission",method:"GET",datatype:"json",data:r,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#dvfeatureview").html("");tjq("#dvfeatureview").html(n);tjq("#loader").hide()},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})})}function GetFareRules(n,t){var r=tjq(n).data("value"),i;tjq("#loader").show();i={ItineraryId:r,getfromquote:t};tjq.ajax({url:"/Common/GetFareRules",method:"POST",datatype:"json",data:i,success:function(n){if(n.toLocaleLowerCase()=="sotologin"||n.toLocaleLowerCase()=="otherlogin"){tjq("#loader").hide();var t;tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Session Time Out. Kindly Search Again!");t=n.toLocaleLowerCase()=="sotologin"?"/Flight/Index":"/Search/Index";tjq("#popupfailure").on("hidden.bs.modal",function(){window.location.href=t})}else n=="SESSIONTIMEOUT"?HanldeSessionTimeout():(tjq("#divFareIndicatorModal").remove(),tjq("body").append(n),tjq("#btnFareindicatorModal").click(),tjq("#loader").hide())},error:function(){tjq("#divFareIndicatorModal").remove();tjq("body").append(data);tjq("#btnFareindicatorModal").click();tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function ValidateCheckBox(){tjq("#chkfare").is(":checked")&&tjq("#chkterms").is(":checked")?(tjq(".b2cBookingDecision").removeAttr("disabled"),tjq(".b2bBookingDecision").removeAttr("disabled")):(tjq(".b2cBookingDecision").attr("disabled","disabled"),tjq(".b2bBookingDecision").attr("disabled","disabled"))}function ValidateCheckboxHotel(){tjq("#chkHtlAgre").is(":checked")?(tjq(".b2cBookingDecision").removeAttr("disabled"),tjq(".b2bBookingDecision").removeAttr("disabled")):(tjq(".b2cBookingDecision").attr("disabled","disabled"),tjq(".b2bBookingDecision").attr("disabled","disabled"))}function GetBaggage(n,t){var i=tjq(n),u=tjq(i).data("value"),r;if(i.next("div.popover:visible").length>0){i.popover("hide");return}tjq(".GetBaggage").popover({trigger:"manual",html:"true",placement:"top",title:tjq("#txtbaggage").text()+'<a class="closePop pull-right">x<\/a>'});tjq("#loader").show();r={ItineraryId:u,getfromquote:t};tjq.ajax({url:"/Common/GetBaggage",method:"POST",datatype:"html",data:r,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();i.attr("data-content",n);i.popover("show");tjq("#loader").hide()},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function Revalidate(n,t,i,r){var u=tjq("#"+n+"").val(),f={Itineraryid:u,getfromquote:i};r!=""&&r!=undefined&&r.toLocaleLowerCase()=="false"?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("You dont have permission to book a flight.Please contact admin!")):(tjq(".btnRevalidate").attr("disabled",!0),tjq("#"+t+"").show(),tjq("#"+n+"").hide(),tjq.ajax({url:"/Search/Revalidate",method:"POST",datatype:"json",data:f,success:function(i){i=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#"+t+"").hide();tjq(".btnRevalidate").attr("disabled",!1);i==!1?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Selected option is not available!"),tjq("#"+n+"").text("Unavailable"),tjq("#"+n+"").attr("disabled",!0),tjq("#"+n+"").show(),tjq(tjq("#"+n+"")).addClass("btnfareunavailable")):(tjq("#loader").show(),window.location.href="/PassengerDetails/Index")},error:function(){tjq("#"+t+"").hide();tjq("#"+n+"").show();tjq(".btnRevalidate").attr("disabled",!1);tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Selected option is not available!")}}))}function RevalidateDomesticRoundtrip(n,t){var i=tjq("#sticky"),r=i.find(".OutboundDisplay .row"),u=i.find(".InboundDisplay .row"),f,e;if(!r.length||!u.length)return alert("Please select both outbound and inbound flights"),tjq(".btnRevalidate").attr("disabled",!1);f=[tjq.map(r,function(n){return tjq(n).data("itenerayid")?tjq(n).data("itenerayid"):null})[0],tjq.map(u,function(n){return tjq(n).data("itenerayid")?tjq(n).data("itenerayid"):null})[0]];e={Itineraryid:f,getfromquote:n};t!=""&&t!=undefined&&t.toLocaleLowerCase()=="false"?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("You dont have permission to book a flight.Please contact admin!")):(tjq(".btnRevalidate").attr("disabled",!0),tjq("#loader").show(),tjq.ajax({url:"/DomesticFlight/Revalidate",method:"POST",datatype:"json",data:e,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq(".btnRevalidate").attr("disabled",!1);n==!1?(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Selected option is not available!"),tjq("#"+id+"").text("Unavailable"),tjq("#"+id+"").attr("disabled",!0),tjq("#"+id+"").show(),tjq(tjq("#"+id+"")).addClass("btnfareunavailable")):(tjq("#loader").show(),window.location.href="/PassengerDetails/Index")},error:function(){tjq("#loader").hide();tjq(".btnRevalidate").attr("disabled",!1);tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Selected option is not available!")}}))}function CalculateServiceFee(n){var i=!1,t,r,u;window.location.pathname.includes("Search")&&(i=!0);t=!1;r=tjq("#btnservicefee_"+n+"").val();tjq("#chkServiceFeeapplyperpax_"+n+"").attr("checked")&&(t=!0);u={itineraryid:r,servicefee:tjq("#txtServiceFee_"+n+"").val(),isapplyperpax:t,isSearchResults:i,faremodelid:n};tjq("#dvservicefeeloader_"+n+"").show();tjq("#btnservicefee_"+n+"").hide();tjq.ajax({url:"/Search/CalculateServiceFee",method:"POST",datatype:"json",data:u,success:function(t){if(t=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),tjq("#btnservicefee_"+n+"").show(),tjq("#dvpsgrfarepartial_"+n+"").html(""),tjq("#dvpsgrfarepartial_"+n+"").html(t),window.location.pathname.includes("Search")){var i=tjq("#ddlScurrency").val().split(","),r={airlinecode:i[1],currency:i[0]};tjq.ajax({url:"/Search/SearchResponsePartial",method:"POST",datatype:"json",data:r,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#prtlsearchresponse").html("");tjq("#prtlsearchresponse").html(n);tjq(".search-results-title b").text(tjq("div.searchresult").filter(":visible").length);tjq(".min-price-label").html(parseInt(tjq("#hdnMinPrice").val())+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(parseInt(tjq("#hdnMaxPrice").val())+" "+tjq("#hdnCurrency").val());tjq('[data-toggle="popover"]').popover()},error:function(){alert("SError")}})}tjq("#dvservicefeeloader_"+n+"").hide()},error:function(){tjq("#dvservicefeeloader_"+n+"").hide();tjq("#btnservicefee_"+n+"").show();alert("Error")}})}function CheckOutbound(n){var t,i;tjq("#sticky").show();tjq(".OutboundDisplay").html("");t=tjq("#dvOutbound-"+n+"").html();tjq(".OutboundDisplay").append(t);i=parseInt(tjq("#outprice-"+n+"").text());outboundPrice=i;setTotal()}function CheckInbound(n){var t,i;tjq("#sticky").show();tjq(".InboundDisplay").html("");t=tjq("#dvInbound-"+n+"").html();tjq(".InboundDisplay").append(t);i=parseInt(tjq("#inprice-"+n+"").text());inboundPrice=i;setTotal()}function setTotal(){tjq("#totalPrice").html(inboundPrice+outboundPrice)}function Quotes(){var n=[],t=0,i;if(tjq(".promotesingleitin input:checked").each(function(i){n[i]=tjq(this).val();t++}),tjq(".searchresult input:checked").each(function(){n[t]=tjq(this).val();t++}),n=="")return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Select one or upto three options to send a quote!"),!1;i={itineraryids:n};tjq("#loader").show();tjq.ajax({url:"/Search/SendQuotePartial",method:"POST",datatype:"json",data:i,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvSendquotes").html("");tjq("#dvSendquotes").html(n);tjq("#dvsendquotepartial").modal("show")},error:function(){tjq("#loader").hide();alert("Error")}})}function AdhocQuotes(){var n=[],t=0,i;if(tjq(".promotesingleitin input:checked").each(function(i){n[i]=tjq(this).val();t++}),tjq(".searchresult input:checked").each(function(){n[t]=tjq(this).val();t++}),tjq(),n=="")return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(" Please select an itinerary to proceed!"),!1;if(n.length>1)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please select a single itinerary to proceed!"),!1;i={itineraryids:n};tjq("#loader").show();tjq.ajax({url:"/Search/AdhocPartial",method:"POST",datatype:"json",data:i,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvSendquotes").html("");tjq("#dvSendquotes").html(n);tjq("#dvadhocpartial").modal("show")},error:function(){tjq("#loader").hide();alert("Error")}})}function SendmailQuote(){var n="",t="";tjq("input[name=rdnsendquote]:checked").val()=="owner"&&(n=tjq("#hdnsendtoowneremail").val());tjq("input[name=rdnsendquote]:checked").val()=="customer"&&(n=tjq("#email").val());n==""&&(n=tjq("#email").val());tjq("#ToHide").is(":visible")&&(t="true");tjq("#frmSendQuote").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(i,r){if(r==!0){var u={emailto:n,subject:tjq("#Subject").val(),comment:tjq("#comment").val(),elasticEmail:t};tjq("#loader").show();tjq.ajax({url:"/Search/SendQuoteMail",method:"POST",datatype:"json",data:u,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvsendquotepartial").modal("hide");tjq("#popupsuccess").modal("show");tjq("#hpopsuccess").text("Successfully Sent!")},error:function(){tjq("#loader").hide();tjq("#dvsendquotepartial").modal("hide");tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Mail Sending Failed!")}})}}})}function SendadhocQuote(){var n=tjq("#hdnadhocsendtoowneremail").val(),t=tjq("#txtAdhocExpprice").data("itinid")+"|"+tjq("#txtAdhocExpprice").val()+"@";tjq("#frmadhocQuote").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(i,r){if(r==!0){var u={emailto:n,subject:tjq("#Subject").val(),comment:tjq("#comment").val(),adhocitineraryidswithexpectedprice:t};tjq("#loader").show();tjq.ajax({url:"/Search/SendQuoteMail",method:"POST",datatype:"json",data:u,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvadhocpartial").modal("hide");tjq("#popupsuccess").modal("show");tjq("#hpopsuccess").text("Adhoc request Sent Successfully!")},error:function(){tjq("#loader").hide();tjq("#dvadhocpartial").modal("hide");tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Mail Sending Failed!")}})}}})}function HanldeSessionTimeout(){window.location.href="/Common/SessionEnd"}function genLinkResponse(){var n=tjq("#EmailForTravelerProfile").val(),t,i;if(n==null||n==""||!/^\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i.test(n))return t="<div class='EmailForTravelerProfileformError parentFormgenLinkForm formError' style='opacity: 0.87; position: absolute; top: 0px; left: 396px; margin-top: -50px;'><div class='formErrorContent'>* Invalid email address<br><\/div><div class='formErrorArrow'><div class='line10'><\/div><div class='line9'><\/div><div class='line8'><\/div><div class='line7'><\/div><div class='line6'><\/div><div class='line5'><\/div><div class='line4'><\/div><div class='line3'><\/div><div class='line2'><\/div><div class='line1'><\/div><\/div><\/div>",tjq(t).insertBefore(tjq("#EmailForTravelerProfile")),!1;i={EmailForTravelerProfile:n};tjq(".boxajax").removeClass("hidden");tjq.ajax({url:"/Registration/GenarateLink",method:"POST",datatype:"json",data:i,success:function(n){var t=tjq("body").find("#travelerProfileModal").find(".modal-body");tjq(t).html(tjq(n).find(".modal-body").html());tjq(".boxajax").addClass("hidden")}})}function UpdateHotelMarkup(){var r=tjq("#SlabID").val(),n=tjq("#ItemsCount").val(),t=tjq("#pageno").val(),i=tjq("#totalCount").val();BindDropdownWithPageNumber(n);t<=Math.ceil(i/n)?tjq("#pageno").val(t):tjq("#pageno").val(1);tjq("#TotCount").val(i);tjq("#ItemPePage").val(n);tjq("#currPage").val(t);tjq("#UpdateHotelMarkup").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){t==!0&&tjq("#UpdateHotelMarkup").submit()}})}function GetHotemMarkUpSelectedId(n){var r=tjq(n).attr("id"),t=tjq("#ItemsCount").val(),i=tjq("#pageno").val(),u=tjq("#totalCount").val();BindDropdownWithPageNumber(t);i<=Math.ceil(u/t)?tjq("#pageno").val(i):tjq("#pageno").val(1);tjq(".recperpage").val(t);tjq("#loader").show();tjq.get("/CommissionAndMarkupHotel/ManageHotelMarkupPartial?MarkupId="+r,function(n){tjq("#partialHotelMarkup").html("");tjq("#partialHotelMarkup").html(n);tjq("#dvviewhotelmarkup").modal("show");RegionListAutoComplete();tjq("#loader").hide();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()})}function RemoveandResetmulticity(){var t=""+MultiCityId+"",n;tjq("#"+t+"").remove();n="rm"+(MultiCityId-1)+"";tjq("#"+n+"").show();MultiCityId=MultiCityId-1;tjq("#AddMoreMulticity").show()}function UpdateFareMatrix(){tjq("#frmUpdateFareMatrix").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){t==!0&&tjq("#frmUpdateFareMatrix").submit()}})}function UpdateCommissionSlab(){tjq("#frmUpdateCommissionSlab").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){t==!0&&tjq("#frmUpdateCommissionSlab").submit()}})}function EditComissionslab(n){tjq("#loader").show();tjq.get("/Administration/ViewCommissionSlab?id="+n,function(n){tjq("#dvprtlviewCommissionSlab").html("");tjq("#dvprtlviewCommissionSlab").html(n);tjq("#divViewCommissionSlab").modal("show");CountriesandAirLinesAutoComplete();MarkupShowandHide();tjq("#loader").hide();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide()})}function EditCorporateslab(n){tjq("#loader").show();tjq.ajax({url:"/CorporateRules/ViewCorporateSlab",method:"POST",datatype:"json",data:{id:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#dvprtlviewCorporateSlab").html("");tjq("#dvprtlviewCorporateSlab").html(n);tjq("#divViewCorporateSlab").modal("show");tjq("#loader").hide()},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Something went wrong!")}})}function GetSelectedClientCurrency(n,t){var i,n;t!=""&&(i=tjq(n).val(),t=="Hotel"&&(tjq("#farematrixmodel_HCurrency").val(i.substring(i.length-3,i.length)),tjq("#HCurrency").val(i.substring(i.length-3,i.length))),t=="Flight"&&(tjq("#farematrixmodel_FCurrency").val(i.substring(i.length-3,i.length)),tjq("#FCurrency").val(i.substring(i.length-3,i.length))),n=i.slice(0,-3));tjq.ajax({url:"/Accounts/GetBankAccountsBasedOnClientid",method:"POST",datatype:"json",data:{id:n},success:function(n){(n!=null||n!="")&&(tjq("#BankTransferDepositedFromAccountId").empty(),tjq("#BankTransferDepositedFromAccountId").append('<option selected="selected" value=""> Select Deposited Bank A/C <\/option>'),tjq.each(n,function(n,t){tjq("#BankTransferDepositedFromAccountId").append(tjq("<option/>",{value:t.Id,text:t.BankAccountnumberNameandcity}))}))},error:function(){}})}function validateDecimal(n){/^\d*\.?\d{0,2}$/.test(n.value)==!1&&(n.value=n.value.substring(0,n.value.length-1))}function validateCharacters(n){/^[a-zA-Z,]+$/.test(n.value)==!1&&(n.value=n.value.substring(0,n.value.length-1))}function validateAlphaNum(n){/^[a-zA-Z,0-9]+$/.test(n.value)==!1&&(n.value=n.value.substring(0,n.value.length-1))}function validateAlphabets(n){/^[a-zA-Z]+$/.test(n.value)==!1&&(n.value=n.value.substring(0,n.value.length-1))}function validateNumbers(n){var t=n.which?n.which:event.keyCode;return t>31&&(t<48||t>57)?!1:!0}function checkAlphaNumeric(n){return n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122}function validateDecimalNumber(n){/^\d*\.?\d{0,6}$/.test(n.value)==!1&&(n.value=n.value.substring(0,n.value.length-1))}function HotelLoader(){var n="",r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],u;tjq(".HotelChild").html("");var t=new Date(tjq("#CheckIn").val().split("/").reverse().join("-")),i=new Date(tjq("#CheckOut").val().split("/").reverse().join("-")),f=t.getDate()+"-"+r[t.getMonth()]+"-"+t.getFullYear(),e=i.getDate()+"-"+r[i.getMonth()]+"-"+i.getFullYear();n=' <div class="row text-center">';n+='<div class="col-xs-6 modal-border-right">';n+='<h6 style="margin:0">Check In<\/h6>';n+='<h6 style="margin:0"><span class="fa fa-calendar"><\/span>&nbsp;'+f+"<\/h6>";n+="<\/div>";n+='<div class="col-xs-6">';n+='<h6 style="margin:0">Check Out<\/h6>';n+='<h6 style="margin:0"><span class="fa fa-calendar"><\/span>&nbsp;'+e+"<\/h6>";n+="<\/div>";n+="<\/div>";u=tjq("#Region").val();tjq(".HotelDestination").append("<b>"+u+"<\/b>");tjq(".HotelChild").append(n);tjq("#HotelLoader").modal("show")}function JourneyLoader(){var n="",e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o,t,h;tjq(".popupjourneyloaderchild").html("");var u=tjq("#CityPares_0__Origin").val().substring(tjq("#CityPares_0__Origin").val().length-4).replace(")",""),f=tjq("#CityPares_0__Destination").val().substring(tjq("#CityPares_0__Destination").val().length-4).replace(")",""),s=new Date(tjq("#CityPares_0__DepartureDateTime").val().split("/").reverse().join("-")),r=s.getDate()+"-"+e[s.getMonth()]+"-"+s.getFullYear();if(n='<table class="table table-striped table-popup">',n+="<th>"+u+"<\/th>",n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>',n+='<th style="width:30%;">'+r+"<\/th>",n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>',n+="<th>"+f+"<\/th>",n+="<\/table>",tjq("input[name=JourneyType]:checked").val().toUpperCase()=="RETURN"||tjq("input[name=JourneyType]:checked").val().toUpperCase()=="MULTI"||tjq("input[name=JourneyType]:checked").val().toUpperCase()=="RETURNM"){var r="",u=tjq("#CityPares_1__Origin").val().substring(tjq("#CityPares_1__Origin").val().length-4).replace(")",""),f=tjq("#CityPares_1__Destination").val().substring(tjq("#CityPares_1__Destination").val().length-4).replace(")","");if((tjq("input[name=JourneyType]:checked").val().toUpperCase()=="RETURN"||tjq("input[name=JourneyType]:checked").val().toUpperCase()=="RETURNM")&&(o=new Date(tjq("#CityPares_1__ReturnDateTime").val().split("/").reverse().join("-")),r=o.getDate()+"-"+e[o.getMonth()]+"-"+o.getFullYear()),tjq("input[name=JourneyType]:checked").val().toUpperCase()=="MULTI"&&(t=new Date(tjq("#CityPares_1__DepartureDateTime").val().split("/").reverse().join("-")),r=t.getDate()+"-"+e[t.getMonth()]+"-"+t.getFullYear()),n+='<table class="table table-striped table-popup">',n+="<th>"+u+"<\/th>",n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>',n+='<th style="width:30%;">'+r+"<\/th>",n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>',n+="<th>"+f+"<\/th>",n+="<\/table>",tjq("input[name=JourneyType]:checked").val().toUpperCase()=="MULTI")for(h=tjq("#parentbox").children().size(),maxlen=h+2,i=2;i<maxlen;i++){var u=tjq("#CityPares_"+i+"__Origin").val().substring(tjq("#CityPares_"+i+"__Origin").val().length-4).replace(")",""),f=tjq("#CityPares_"+i+"__Destination").val().substring(tjq("#CityPares_"+i+"__Destination").val().length-4).replace(")",""),t=new Date(tjq("#CityPares_"+i+"__DepartureDateTime").val().split("/").reverse().join("-"));r=t.getDate()+"-"+e[t.getMonth()]+"-"+t.getFullYear();n+='<table class="table table-striped table-popup">';n+="<th>"+u+"<\/th>";n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>';n+='<th style="width:30%;">'+r+"<\/th>";n+='<th><span class="fa fa-long-arrow-right fa-ar"><\/span><\/th>';n+="<th>"+f+"<\/th>";n+="<\/table>"}}tjq(".popupjourneyloaderchild").append(n);tjq("#popupjourneyloader").modal({backdrop:"static",keyboard:!1});tjq("#popupjourneyloader").modal("show")}function SearchBookings(){if(tjq("#txtSearchBooking").val()=="")return!1;tjq("#loader").show();tjq.ajax({url:"/Common/SearchBooking",method:"POST",datatype:"json",data:{input:tjq("#txtSearchBooking").val()},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n=="nothing"?(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("No Records!"),tjq("#txtSearchBooking").val("")):window.location.href=n},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("No Records!");tjq("#txtSearchBooking").val("")}})}function SaveVATandServiceTax(){return tjq("#frmvatsave").validationEngine("validate",{autoHidePrompt:!0})}function EditVat(){tjq("#loader").show();tjq.ajax({url:"/Administration/EditVat",method:"GET",datatype:"json",success:function(n){tjq("#loader").hide();tjq("#dveditvat").html("");tjq("#dveditvat").html(n);tjq("#dvEditVat").modal("show");n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function SaveRoe(n){tjq("#frmroe-"+n+"").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(t,i){if(!i)return!1;tjq("#loader").show();var r=tjq("#frmroe-"+n+"").serialize();tjq.ajax({data:r,url:"/ROE/Save",method:"POST",datatype:"json",success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t==!0?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("ROE Saved Successfully!"),tjq.ajax({url:"/ROE/ViewRoe",method:"Get",datatype:"json",success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#frmroe-"+n+"").trigger("reset");tjq("#roeview").html("");tjq("#roeview").html(t);tjq(".tblpagination").paging({limit:10,rowDisplayStyle:"block",activePage:0,rows:[]})}}),n=="update"&&tjq("#dvEditROEmodal").modal("hide")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("ROE Already Exists!"))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}})}function EditROE(n){tjq("#loader").show();tjq.ajax({url:"/ROE/EditROE",method:"GET",datatype:"json",data:{roeid:n},success:function(n){tjq("#loader").hide();tjq("#dveditroe").html("");tjq("#dveditroe").html(n);tjq("#dvEditROEmodal").modal("show");n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function CreateBranch(){var n="";n=tjq("#hdnUClientId").val();tjq("#loader").show();tjq.ajax({url:"/Settings/CreateBranch",method:"GET",datatype:"json",data:{d:n},success:function(n){tjq("#loader").hide();tjq("#dvBranchCreate").html(n);tjq("#dvBranchCreatemodal").modal("show");CityListAutocomplete();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function SaveBranch(){var n="";n=tjq("#hdnUClientId").val();tjq("#branch-registration-form").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(t,i){if(!i)return!1;tjq("#loader").show();var r=tjq("#branch-registration-form").serialize();tjq.ajax({data:r,url:"/Settings/CreateBranch",method:"POST",datatype:"json",success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t==!0&&(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Branch Created Successfully!"),n!=""&&n!=undefined&&tjq.ajax({data:{d:n},url:"/Settings/ViewBranches",method:"Get",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=null&&(tjq("#branch-registration-form").trigger("reset"),tjq("#dvBranchCreatemodal").modal("hide"),tjq("#dvBranches").html("").html(n),tjq(".tblpagination").paginathing({limit:10,rowDisplayStyle:"block",activePage:0,rows:[]}))}}))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide();tjq("#dvBranchCreatemodal").modal("hide")}})}})}function EditBranch(n){tjq("#loader").show();tjq.ajax({url:"/Settings/EditBranch",method:"GET",datatype:"json",data:{branchid:n},success:function(n){tjq("#loader").hide();tjq("#dvBranchIUpdate").html("");tjq("#dvBranchIUpdate").html(n);tjq("#dvBranchIUpdatemodal").modal("show");CityListAutocomplete();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function UpdateBranch(){var n="";n=tjq("#hdnUClientId").val();tjq("#frmBranchUpdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(t,i){if(!i)return!1;tjq("#loader").show();var r=tjq("#frmBranchUpdate").serialize();tjq.ajax({data:r,url:"/Settings/UpdateBranch",method:"POST",datatype:"json",success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t==!0&&(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Branch Updated Successfully!"),n!=""&&n!=undefined&&tjq.ajax({data:{d:n},url:"/Settings/ViewBranches",method:"Get",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=null&&(tjq("#frmBranchUpdate").trigger("reset"),tjq("#dvBranches").html("").html(n),tjq(".tblpagination").paginathing({limit:10,rowDisplayStyle:"block",activePage:0,rows:[]}))}}))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide();tjq("#dvBranchIUpdatemodal").modal("hide")}})}})}function SaveRole(){tjq("#frmRole").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(!t)return!1;tjq("#loader").show();var i=tjq("input:radio[name='RoleType']:checked").val(),r={RoleName:tjq("#txtRoleName").val(),RoleType:i};tjq.ajax({data:r,url:"/RolesAndPermission/Save",method:"POST",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n==!0?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Role Saved Successfully!"),tjq.ajax({url:"/RolesAndPermission/ViewRole",method:"Get",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#frmRole").trigger("reset");tjq("#roleview").html("");tjq("#roleview").html(n);Bindrolerightactiveclick()}})):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Role Already Exists!"))},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}})}function UpdateFeaturesbasedonRole(){var n=[],i,t;if(tjq(".roles input:checked").each(function(){n.push(tjq(this).val())}),n=="")return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Select Rights"),!1;if(tjq("ul.rolenav li.active").attr("id")==undefined)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please select role"),!1;i=tjq("ul.rolenav li.active").attr("id");t=[];t=i.split("-");tjq("#loader").show();tjq.ajax({data:{roleid:t[1],featureids:n},url:"/RolesAndPermission/UpdateFeatures",method:"POST",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n==!0?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Rights updated Successfully!")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some problem occured"))},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}function PrepareHotelCancel(n){tjq("#loader").show();tjq.ajax({data:{bookingref:n},url:"/HotelDetails/PrepareHotelCancel",method:"GET",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#dvcancelhoteldet").html("");tjq("#dvcancelhoteldet").html(n);tjq("#mdlcancelHotel").modal({backdrop:"static",keyboard:!1});tjq("#mdlcancelHotel").modal("show")},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}function ConfirmHotelCancel(n){tjq("#loader").show();tjq.ajax({data:{bookingref:n},url:"/HotelDetails/ConfirmCancel",method:"GET",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#mdlcancelHotel").modal("hide");n==!0?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Booking cancelled Successfully")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Failure while booking cancel"))},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}function HotelNoCancel(){tjq("#loader").show();tjq.ajax({data:{},url:"/HotelDetails/HotelNoCancel",method:"GET",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#mdlcancelHotel").modal("hide")},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}function UpdateBusMarkup(){tjq("#ViewBusMarkupForm").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){t==!0&&tjq("#ViewBusMarkupForm").submit()}})}function CalculateBaggageTotalALLPerPax(n,t){var i=[],r=0,u,f;tjq("#drpbagall"+n+"").length>0&&(i=tjq("#drpbagall"+n+"").val().split("~"),i.length==3?(r+=parseFloat(i[0]),RemoveexistingSelectedBaggage("All",n.substring(0,3),n.substring(3,4)),extrabaggageindicator.push({JourneyType:"All",PaxType:n.substring(0,3),PaxIndex:n.substring(3,4),Pieceandweight:i[1]}),u=i[1].split(","),u[0]!="1"?(f=i[2].split("||"),tjq("#spnbagnoteAll"+n+"").text(f[0]),tjq("#spnbagnoteallhide"+n+"").show()):tjq("#spnbagnoteallhide"+n+"").hide()):RemoveexistingSelectedBaggage("All",n.substring(0,3),n.substring(3,4)));tjq("#"+t+"").val(r.toFixed(2))}function CalculateBaggageTotalOutboundPerPax(n,t){var i=[],r=0,u,f;tjq("#drpbagout"+n+"").length>0&&(i=tjq("#drpbagout"+n+"").val().split("~"),i.length==3?(r=parseFloat(i[0]),RemoveexistingSelectedBaggage("Outbound",n.substring(0,3),n.substring(3,4)),extrabaggageindicator.push({JourneyType:"Outbound",PaxType:n.substring(0,3),PaxIndex:n.substring(3,4),Pieceandweight:i[1]}),u=i[1].split(","),u[0]!="1"?(f=i[2].split("||"),tjq("#spnbagnoteout"+n+"").text(f[0]),tjq("#spnbagnoteouthide"+n+"").show()):tjq("#spnbagnoteouthide"+n+"").hide()):RemoveexistingSelectedBaggage("Outbound",n.substring(0,3),n.substring(3,4)));tjq("#drpbagin"+n+"").length>0&&(i=tjq("#drpbagin"+n+"").val().split("~"),i.length==3&&(r+=parseFloat(i[0])));tjq("#"+t+"").val(r.toFixed(2))}function CalculateBaggageTotalInboundPerPax(n,t){var i=[],r=0,u,f;tjq("#drpbagout"+n+"").length>0&&(i=tjq("#drpbagout"+n+"").val().split("~"),i.length==3&&(r=parseFloat(i[0])));tjq("#drpbagin"+n+"").length>0&&(i=tjq("#drpbagin"+n+"").val().split("~"),i.length==3?(r+=parseFloat(i[0]),RemoveexistingSelectedBaggage("Inbound",n.substring(0,3),n.substring(3,4)),extrabaggageindicator.push({JourneyType:"Inbound",PaxType:n.substring(0,3),PaxIndex:n.substring(3,4),Pieceandweight:i[1]}),u=i[1].split(","),u[0]!="1"?(f=i[2].split("||"),tjq("#spnbagnotein"+n+"").text(f[0]),tjq("#spnbagnoteinhide"+n+"").show()):tjq("#spnbagnoteinhide"+n+"").hide()):RemoveexistingSelectedBaggage("Inbound",n.substring(0,3),n.substring(3,4)));tjq("#"+t+"").val(r.toFixed(2))}function CalculateBaggageTotalALLGroup(){var n=[],t=0,i,r;tjq("#drpbagallgroup").length>0&&(n=tjq("#drpbagallgroup").val().split("~"),n.length==3?(t=parseFloat(n[0]),RemoveexistingSelectedBaggage("AllGroup",0,0),extrabaggageindicator.push({JourneyType:"AllGroup",PaxType:0,PaxIndex:0,Pieceandweight:n[1]}),i=n[1].split(","),i[0]!="1"?(r=n[2].split("||"),tjq("#spnbagnoteAllgroup").text(r[0]),tjq("#spnbagnoteallgrouphide").show()):tjq("#spnbagnoteallgrouphide").hide()):RemoveexistingSelectedBaggage("AllGroup",0,0));tjq("#txtbagtotal").val(t.toFixed(2))}function CalculateBaggageTotalOutboundGroup(){var n=[],t=0,i,r;tjq("#drpbagoutgroup").length>0&&(n=tjq("#drpbagoutgroup").val().split("~"),n.length==3?(t=parseFloat(n[0]),RemoveexistingSelectedBaggage("OutboundGroup",0,0),extrabaggageindicator.push({JourneyType:"OutboundGroup",PaxType:0,PaxIndex:0,Pieceandweight:n[1]}),i=n[1].split(","),i[0]!="1"?(r=n[2].split("||"),tjq("#spnbagnoteoutgroup").text(r[0]),tjq("#spnbagnoteoutgrouphide").show()):tjq("#spnbagnoteoutgrouphide").hide()):RemoveexistingSelectedBaggage("OutboundGroup",0,0));tjq("#drpbagingroup").length>0&&(n=tjq("#drpbagingroup").val().split("~"),n.length==3&&(t+=parseFloat(n[0])));tjq("#txtbagtotal").val(t.toFixed(2))}function CalculateBaggageTotalInboundGroup(){var n=[],t=0,i,r;tjq("#drpbagingroup").length>0&&(n=tjq("#drpbagingroup").val().split("~"),n.length==3?(t=parseFloat(n[0]),RemoveexistingSelectedBaggage("InboundGroup",0,0),extrabaggageindicator.push({JourneyType:"InboundGroup",PaxType:0,PaxIndex:0,Pieceandweight:n[1]}),i=n[1].split(","),i[0]!="1"?(r=n[2].split("||"),tjq("#spnbagnoteingroup").text(r[0]),tjq("#spnbagnoteingrouphide").show()):tjq("#spnbagnoteingrouphide").hide()):RemoveexistingSelectedBaggage("InboundGroup",0,0));tjq("#drpbagoutgroup").length>0&&(n=tjq("#drpbagoutgroup").val().split("~"),n.length==3&&(t+=parseFloat(n[0])));tjq("#txtbagtotal").val(t.toFixed(2))}function RemoveexistingSelectedBaggage(n,t,i){if(extrabaggageindicator.length>0)for(var r=0;r<extrabaggageindicator.length;r++)if(extrabaggageindicator[r].JourneyType==n&&extrabaggageindicator[r].PaxType==t&&extrabaggageindicator[r].PaxIndex==i){extrabaggageindicator.splice(r,1);break}}function CalculateBaggageTotal(){var n=tjq("input[name='payment']:checked").val();tjq("#loader").show();tjq.ajax({data:{selectedservices:extrabaggageindicator,indicator:n},url:"/PassengerDetails/CalculateTotalExtraservice",method:"Post",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""&&n!=null){var t=n.split("|");t[0]!="0"?(tjq("#bagpartialtotalbaggagecost").text(t[0]),tjq("#dvbagpartialtotalbaggagecost").show(),tjq("#psgrpartialtotalbaggageCost").text(t[0]),tjq("#dvpsgrpartialtotalbaggageCost").show(),tjq(".baggagecost").text(t[0]),tjq("#spntotalbaggagecost").text(t[0]),tjq(".dvbagtotal").show()):(tjq("#bagpartialtotalbaggagecost").text(""),tjq("#dvbagpartialtotalbaggagecost").hide(),tjq("#psgrpartialtotalbaggageCost").text(""),tjq("#dvpsgrpartialtotalbaggageCost").hide(),tjq(".dvbagtotal").hide(),tjq("#spntotalbaggfee").text("0.0"),tjq("#spntotalbaggagecost").text("0.0"),tjq(".baggagecost").text("0.0"));tjq("#psgrpartialtotalfare").text(t[1]);tjq(".spntotal").text(t[1]);t.length>2&&tjq(".CcCharge").text(t[2])}},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}})}function ResetBaggageTotal(){tjq("#loader").show();var n=tjq("input[name='payment']:checked").val();tjq.ajax({url:"/PassengerDetails/ResetExtraservice",method:"Post",data:{indicator:n},success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""&&n!=null){var t=n.split("|");t[0]!="0"?(tjq("#bagpartialtotalbaggagecost").text(t[0]),tjq("#dvbagpartialtotalbaggagecost").show(),tjq("#psgrpartialtotalbaggageCost").text(t[0]),tjq("#dvpsgrpartialtotalbaggageCost").show(),tjq(".baggagecost").text(t[0]),tjq("#spntotalbaggagecost").text(t[0]),tjq(".dvbagtotal").show()):(tjq("#bagpartialtotalbaggagecost").text(""),tjq("#dvbagpartialtotalbaggagecost").hide(),tjq("#psgrpartialtotalbaggageCost").text(""),tjq("#dvpsgrpartialtotalbaggageCost").hide(),tjq(".dvbagtotal").hide(),tjq("#spntotalbaggfee").text("0.0"),tjq("#spntotalbaggagecost").text("0.0"),tjq(".baggagecost").text("0.0"),tjq(".bagselection").val("0"),tjq(".bagselectiontotal").val("0.0"));tjq("#psgrpartialtotalfare").text(t[1]);tjq(".spntotal").text(t[1]);t.length>2&&tjq(".CcCharge").text(t[2])}},error:function(){tjq("#loader").hide();alert("error")},complete:function(){tjq("#loader").hide()}});extrabaggageindicator=[]}function AirportsList(){tjq("input.AirportsList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){var n=tjq(this);tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Search/AirportList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(t,i){i.item||n.val("")}})})})}function GetSearchandBookCount(n,t){var n=n,t=t;tjq.ajax({data:{StartDate:n,EndDate:t},url:"/Flight/SearchandBookCount",method:"POST",datatype:"json",success:function(n){tjq("#totalSearchCount").html(n.NoOfSearches);tjq("#totalBookCount").html(n.NoOfBookings);tjq("#totalTicketedCount").html(n.NoOfTickets);tjq("#totalExpiringCount").html(n.NoOfExpiring);tjq("#totalHotelSearchCount").html(n.NoOfHotelSearches);tjq("#totalHotelBookCount").html(n.NoOfHotelBookings)},error:function(){}})}function fnCheckDate(){var n=tjq("#txtTravelDateFrom").val(),t=tjq("#txtTravelDateTo").val(),i=tjq("#txtBookingDateFrom").val(),r=tjq("#txtBookingDateTo").val();return n!=""&&t==""?(alert("Please select Travel Date To from the calender"),!1):t!=""&&n==""?(alert("Please select travel From date "),!1):i!=""&&r==""?(alert("Please select Booking Date To from the calender"),!1):r!=""&&i==""?(alert("Please select Booking from date"),!1):(tjq("#loader").show(),!0)}function CheckBranchNameDuplicate(n){var t=tjq("#"+n.id),i="";i=tjq("#hdnUClientId").val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Registration/CheckForDuplicate",data:{Name:t.val(),d:i},success:function(n){n==!1&&(t.val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Branch Name already exist!"),tjq("#popupfailure").css({"z-index":"1052"}));tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function CheckBranchEmailDuplicate(n){var t="",i=tjq("#"+n.id);t=tjq("#hdnUClientId").val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Registration/CheckForDuplicate",data:{Email:i.val(),d:t},success:function(n){n==!1&&(i.val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Email already exist!"),tjq("#popupfailure").css({"z-index":"1052"}));tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function CheckUsernameDuplicate(n){var t=tjq("#"+n.id);tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Registration/CheckForDuplicateStaff",data:{UserName:t.val()},success:function(n){n==!1&&(t.val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Username  already exist!"),tjq("#popupfailure").css({"z-index":"1052"}),tjq("#txtUserName").focus());tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function checkDuplicateEmail(n){var t=tjq("#"+n.id);tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Settings/CheckDuplicateStaffMember",data:{email:t.val()},success:function(n){n==!1&&(t.val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Email already exist!"),tjq("#popupfailure").css({"z-index":"1052"}),tjq("#"+t).focus());tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function CityListAutocomplete(){tjq("input.CityList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Common/CitiesList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".CityList").val("")}})})})}function displayMessage(){tjq(".layout").css("display","block");tjq(".layout").text("Click on image to upload/change your photo").css("color","red")}function displayHide(){tjq(".layout").css("display","block");tjq(".layout").text("")}function fnGetSearchReferences(){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=t,r=t;tjq.ajax({url:"/Common/GetSearchReferences",method:"POST",datatype:"json",data:{StartDate:i,EndDate:r},success:function(n){if(n!="NA"){var i=tjq.parseJSON(n),t=[];tjq.each(i,function(n,i){t.push("<li><a>"+i.Origin+'<span class="fa fa-long-arrow-right"><\/span>'+i.Destination+(i.TripEnddate!=""&&i.TripEnddate!="undefined"?"(Roundtrip)":"")+"&nbsp;&nbsp"+i.TripStartDate+" "+i.TripEnddate+"<\/a><\/li>")});tjq("#searchref").append(t.join(""))}else n=="NA"&&tjq("#searchref").hide()},error:function(){}})}function fnGetHotelSearchReferences(){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=t,r=t;tjq.ajax({url:"/Common/GetSearchReferences",method:"POST",datatype:"json",data:{StartDate:i,EndDate:r,isHotel:!0},success:function(n){if(n!="NA"){var i=tjq.parseJSON(n),t=[];tjq.each(i,function(n,i){t.push("<li><a>"+i.Destination+"&nbsp;&nbsp"+i.CheckInDate+"<\/a><\/li>")});tjq("#hotelsearchref").append(t.join(""))}else n=="NA"&&tjq("#searchref").hide()},error:function(){}})}function fnGetBookingReferences(){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),r=t,u=t,i=!1;window.location.pathname.toLowerCase()=="/search/hotel"&&(i=!0);tjq.ajax({url:"/Common/GetBookingReferences",method:"POST",datatype:"json",data:{StartDate:r,EndDate:u,isHotel:i},success:function(n){if(n!="NA"){var i=tjq.parseJSON(n),t=[];tjq.each(i,function(n,i){t.push("<li>&nbsp;&nbsp&nbsp&nbsp"+i.BookingReference+"<\/li>")});tjq("#bookingref").append(t.join(""))}else n=="NA"&&tjq("#bookingref").hide()},error:function(){}})}function fnGetTicketingReferences(){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),i=t,r=t;tjq.ajax({url:"/Common/GetTicketingReferences",method:"POST",datatype:"json",data:{StartDate:i,EndDate:r},success:function(n){if(n!="NA"){var i=tjq.parseJSON(n),t=[];tjq.each(i,function(n,i){t.push("<li>&nbsp;&nbsp&nbsp&nbsp"+i.TicketingReference+"<\/li>")});tjq("#ticketingref").append(t.join(""))}else n=="NA"&&tjq("#ticketingref").hide()},error:function(){}})}function fnGetExpiringReferences(){tjq.ajax({url:"/Common/GetExpiringReferences",method:"POST",datatype:"json",success:function(n){if(n!="NA"){var i=tjq.parseJSON(n),t=[];tjq.each(i,function(n,i){t.push("<li>&nbsp;&nbsp&nbsp&nbsp"+i.ExpiringReference+"<\/li>")});tjq("#expiringref").append(t.join(""))}else n=="NA"&&tjq("#expiringref").hide()},error:function(){}})}function fnGetClientAccountDetails(){tjq.ajax({url:"/Common/GetClientAccountDetails",method:"POST",datatype:"json",success:function(n){if(n!="NA"){var t=tjq.parseJSON(n);tjq.each(t,function(n,t){tjq("#balAmount").html(t.Currency+""+t.Balance);tjq("#paymentType").html(t.Type);tjq("#clientCurrency").html(t.Currency);tjq("#totalBalance").html(t.Total);tjq("#utilizedAmount").html(t.Utilised);tjq("#remainingBalance").html(t.Balance)})}else n=="NA"&&tjq("#accountDetails").hide()},error:function(){}})}function fnReload(){window.location.reload()}function UpdateRoute(){tjq("#frmRouteUpdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t){tjq("#loader").show();var i=tjq("#frmRouteUpdate").serialize();tjq.ajax({url:"/SearchRules/UpdateRoute",data:i,method:"POST",datatype:"json",success:function(){RNRPagination(!1);tjq("#dvRouteUpdate").modal("hide");tjq("#loader").hide();tjq("#popupsuccess").modal("show");tjq("#hpopsuccess").text("Search rules updated successfully !")}})}else return tjq("#loader").hide(),!1}})}function UpdateBookRules(){tjq("#frmBookRulesUpdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t){tjq("#loader").show();var i=tjq("#frmBookRulesUpdate").serialize();tjq.ajax({url:"/BookRules/UpdateBookRules",data:i,method:"POST",datatype:"json",success:function(n){tjq("#dvBookRulesUpdate").modal("hide");tjq("#loader").hide();n=="true"?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Book rules updated successfully !")):n=="Duplicate"?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Rule already exist!")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some problem has occured please contact admin!"));BookRulesPagination(!1)}});tjq("#loader").hide()}else return tjq("#loader").hide(),!1}})}function UpdateFlightIndicator(){tjq("#frmFlightIndicatorUpdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t){tjq("#loader").show();var i=tjq("#frmFlightIndicatorUpdate").serialize();tjq.ajax({url:"/FlightIndicator/UpdateFlightIndicator",data:i,method:"POST",datatype:"json",success:function(n){tjq("#dvFlightIndicatorUpdate").modal("hide");tjq("#loader").hide();n=="true"?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Flight indicator updated successfully !")):n=="Duplicate"?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Flight indicator already exist!")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some problem has occured please contact admin!"));FlightIndicatorPagination(!1)}});tjq("#loader").hide()}else return tjq("#loader").hide(),!1}})}function UpdateCorporateRules(){tjq("#frmCorporateRulesUpdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t){tjq("#loader").show();var i=tjq("#frmCorporateRulesUpdate").serialize();tjq.ajax({url:"/CorporateRules/UpdateCorporateRules",data:i,method:"POST",datatype:"json",success:function(n){tjq("#dvCorporateRulesUpdate").modal("hide");tjq("#loader").hide();n=="true"?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Corporate rules updated successfully !")):n=="Duplicate"?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Rule already exist!")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some problem has occured please contact admin!"));CorporateRulesPagination(!1)}});tjq("#loader").hide()}else return tjq("#loader").hide(),!1}})}function ShowTicketFare(n){var t;n.checked==!0?(t=tjq(".tktlink"),tjq.each(t,function(n,i){i.href.indexOf("true")!=-1?t[n].href=i.href.replace("true","false"):i.href.indexOf("false")!=-1&&(t[n].href=i.href.replace("false","true"))})):(t=tjq(".tktlink"),tjq.each(t,function(n,i){i.href.indexOf("true")!=-1?t[n].href=i.href.replace("true","false"):i.href.indexOf("false")!=-1&&(t[n].href=i.href.replace("false","true"))}))}function ValidateDOB(n){var t=[],t=n.id.split("-"),i=tjq("#travelDate").val(),o,r;if(t[0].toUpperCase()=="ADT"){var u=tjq("#ADT-DD-"+t[2]).val(),f=tjq("#ADT-MM-"+t[2]).val(),e=tjq("#ADT-YY-"+t[2]).val();if(u!=""&&f!=""&&e!=""&&(i!=null||i!=undefined)&&(o=e+"-"+f+"-"+u,r=CalculateAge(o,i),r<12)){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Adult DOB should be greate than 12.");tjq("#ADT-DD-"+t[2]).val("").change();tjq("#ADT-MM-"+t[2]).val("").change();tjq("#ADT-YY-"+t[2]).val("").change();return}}if(t[0].toUpperCase()=="CHD"){var u=tjq("#CHD-DD-"+t[2]).val(),f=tjq("#CHD-MM-"+t[2]).val(),e=tjq("#CHD-YY-"+t[2]).val();if(u!=""&&f!=""&&e!=""&&(i!=null||i!=undefined)&&(o=e+"-"+f+"-"+u,r=CalculateAge(o,i),r<2||r>=12)){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Child DOB should be between 2 to 12.");tjq("#CHD-DD-"+t[2]).val("").change();tjq("#CHD-MM-"+t[2]).val("").change();tjq("#CHD-YY-"+t[2]).val("").change();return}}if(t[0].toUpperCase()=="INF"){var u=tjq("#INF-DD-"+t[2]).val(),f=tjq("#INF-MM-"+t[2]).val(),e=tjq("#INF-YY-"+t[2]).val();if(u!=""&&f!=""&&e!=""&&(i!=null||i!=undefined)&&(o=e+"-"+f+"-"+u,r=CalculateAge(o,i),r>=2)){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Infant DOB should be less than 2.");tjq("#INF-DD-"+t[2]).val("").change();tjq("#INF-MM-"+t[2]).val("").change();tjq("#INF-YY-"+t[2]).val("").change();return}}}function CalculateAge(n,t){var i=new Date(t),r=new Date(n),u=i.getFullYear()-r.getFullYear(),f=i.getMonth()-r.getMonth();return(f<0||f===0&&i.getDate()<r.getDate())&&u--,u}function fnStartEndDate(){function t(t){var i;try{i=tjq.datepicker.parseDate(n,t.value)}catch(r){i=null}return i}var n="dd/mm/yy",i=tjq(document).on("foucs",".startDate",function(){tjq(this).datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){r.datepicker("option","minDate",t(this))})}),r=tjq(document).on("foucs",".endDate",function(){tjq(this).datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){i.datepicker("option","maxDate",t(this))})}),u=tjq(".startDate").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){f.datepicker("option","minDate",t(this))}),f=tjq(".endDate").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){u.datepicker("option","maxDate",t(this))}),o=tjq(".datePicker").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}),e=tjq("<span />",{"class":"input-group-addon datePickerCalender"}).html('<i class="fa fa-calendar"><\/i>');tjq(".datePicker,.startDate,.endDate").find(".datePickerCalender").length===0&&tjq(".datePicker,.startDate,.endDate").after(e);tjq("span.datePickerCalender").on("click",function(){tjq(this).prev().datepicker("show")})}function fnGetSupplierText(n,t){var u=t.id,i=n.id,r=tjq("#"+u).val(),f;r.toLowerCase()=="all"?(tjq("#"+i).empty(),tjq("#"+i).append(tjq("<option />",{value:"ALL",text:"ALL"}))):(f=[],r==""&&(tjq("#"+i).empty(),tjq("#"+i).append(tjq("<option />",{value:"",text:"-Select-"}))),r!=""&&r!=undefined&&(tjq("#loader").show(),tjq.ajax({url:"/Common/GetSupplierText",data:{source:r},method:"GET",datatype:"json",success:function(n){if(tjq("#loader").hide(),n!=""){var t=tjq("#"+i);t.empty();tjq.each(n,function(n,i){t.append(tjq("<option />",{value:i,text:i}))})}else tjq("#"+i).empty();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide();tjq("#"+i).empty()}})))}function fnGetPreferredValueOnExclude(n){var i=n.id,t=tjq("#"+i).val();t.toUpperCase()=="YES"?tjq(".rnrPreferred").val("No"):t.toUpperCase()=="NO"?tjq(".rnrPreferred").val("Yes"):t.toUpperCase()=="NA"&&tjq(".rnrPreferred").val("NA")}function PromoteTagShowOrHide(n){var f=n.id,e=tjq("#"+f).prop("checked");if(e)tjq(".rnrexcludePreferred").prop("disabled","disabled"),tjq("<option />",{value:"NA",text:"NA",selected:!0}).appendTo(tjq(".rnrexcludePreferred")),tjq(".rnrPreferred").val("NA"),tjq(".dvPromoteText").show();else{tjq(".rnrexcludePreferred").prop("disabled","");tjq(".rnrexcludePreferred").find("option[value=NA]").remove();tjq(".rnrPreferred").val("No");tjq(".dvPromoteText").hide();tjq(".promoteText").val("");var o=tjq("#hdnAction").val(),t=tjq("#hdnExcludeValue").val(),i=tjq("#hdnPreferredValue").val(),r=tjq("#hdnPromoteStatus").val(),u=tjq("#hdnPromoteTag").val();u!=""&&u!=undefined&&r!=""&&r!=undefined&&r.toLocaleLowerCase()=="true"?(tjq(".rnrexcludePreferred option:selected").val("Yes"),tjq(".rnrPreferred").val("No"),tjq(".promoteText").val(u)):t!=""&&t!=undefined&&i!=""&&i!=undefined?(tjq(".rnrexcludePreferred").val(t),tjq(".rnrPreferred").val(i)):fnGetPreferredValueOnExclude(drpdwnExclude)}}function fnShowOrHideImportPNR(n){var i=n.id,t=tjq("#"+i).val();t!=""&&t!=undefined&&t.toLocaleLowerCase()=="ticketed"?tjq("#btnImportPnr").show():t!=""&&t!=undefined&&t.toLocaleLowerCase()=="notticketed"&&(tjq("#btnImportPnr").hide(),tjq("#isPricingDetailsSaved").modal("show"))}function fnAdditionalDiscountShowOrHide(n){var t=n.id,i=tjq("#"+t).prop("checked");i?(tjq(".additionalDiscount").show(),tjq(".txtAdditionalDiscount").val(""),tjq(".IATA").hide(),tjq(".PLB").hide()):(tjq(".additionalDiscount").hide(),tjq(".IATA").show(),tjq(".PLB").show(),tjq(".txtIATA").val(""),tjq(".txtPLB").val(""))}function fnCancelFlight(n){tjq("#loader").show();tjq.ajax({url:"/PurchaseOrder/CancelBooking",method:"POST",data:{BookingRef:n},datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""&&n!=undefined&&n=="true"){tjq("#loader").hide();tjq("#popupsuccess").modal("show");tjq("#hpopsuccess").text(tjq("#txtcancelmsg").val());tjq("#popupsuccess").on("hidden.bs.modal",function(){window.parent.location.reload(!0)})}else tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(n.toString())},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function fnShowOrHideToSendQuote(){tjq("#loader").show();tjq.ajax({url:"/Search/getClientEmailToSendQuotes",method:"GET",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n==!1?(tjq("#loader").hide(),alert("Client email settings are missing!"),tjq("#ToHide").hide(),tjq("#dvSubject").hide(),tjq("#dvComment").hide(),tjq("#btnSendMailQuote").hide()):(tjq("#loader").hide(),tjq("#ToHide").show(),tjq("#dvSubject").show(),tjq("#dvComment").show(),tjq("#btnSendMailQuote").show())},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function GetLedgerDetails(){tjq("#PageNumber")[0].selectedIndex=0;tjq("#ItemsCount")[0].selectedIndex=0;var t=tjq(".recperpage").val(),n=tjq(".drpPage").val();tjq(".drpPage").val(n);tjq("#frmpaymenttransaction").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t==!1)return!1;var i,r=tjq(".ddlpaymenttransaction").val();i=r.substring(0,r.length-3);tjq("#paymenttransloading").show();tjq("#btngetLedger").hide();tjq.ajax({url:"/Accounts/GeneralLedgerPartial",method:"POST",datatype:"json",data:{d:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#paymenttransloading").hide();tjq("#btngetLedger").show();tjq("#dvpaymenttransaction").html("");tjq("#dvpaymenttransaction").html(n);var t=tjq("#pagecount").val();PageNumbersPushingInDropDownWithPageCount(t);tjq(".tblpagination tbody").paginathing({perPage:15,insertAfter:".paginationtable"})},error:function(){tjq("#paymenttransloading").hide();tjq("#btngetLedger").show()}})}})}function CalculateAdditionalMarkup(){tjq("#frmAdditionalMarkup").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t==!1)return!1;tjq("#loader").show();var i={serviceFee:tjq(".txtserviceFee").val(),Markup:tjq(".txtMarkupAmount").val(),isFlat:tjq("#isFlat").is(":checked"),isPercentage:tjq("#isPercentage").is(":checked"),totalBaggage:tjq(".baggagecost").text()};tjq.ajax({url:"/PassengerDetails/CalculateMarkupServiceFee",method:"POST",datatype:"json",data:i,success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""&&n!=null){var t=n.split("|");t[0]!="0"&&(tjq("#loader").hide(),tjq(".addMarkup").text(t[0]),tjq(".dvAddMarkup").show(),tjq(".dvServicefee").show(),tjq(".addServiceFee").text(t[2]));tjq("#psgrpartialtotalfare").text(t[1]);tjq(".spntotal").text(t[1])}},error:function(){tjq("#loader").hide()}})}})}function ResetMarkup(){tjq("#loader").show();tjq.ajax({url:"/PassengerDetails/ResetMarkupServiceFee",data:{totalBaggage:tjq(".baggagecost").text()},method:"Post",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=""&&n!=null&&n!=undefined&&(tjq("#loader").hide(),tjq(".dvAddMarkup").hide(),tjq(".dvServicefee").hide(),tjq("#psgrpartialtotalfare").text(n),tjq(".spntotal").text(n));tjq(".txtMarkupAmount").val("");tjq(".txtserviceFee").val("");tjq("#isPercentage").prop("checked",!1);tjq("#isFlat").prop("checked",!0)},error:function(){tjq("#loader").hide()}})}function fnVoidTicket(n){tjq("#loader").show();tjq.ajax({url:"/PurchaseOrder/VoidBooking",method:"POST",data:{BookingRef:n},datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""&&n!=undefined&&n=="true"){tjq("#loader").hide();tjq("#popupsuccess").modal("show");tjq("#hpopsuccess").text("Booking has been voided successfully");tjq("#popupsuccess").on("hidden.bs.modal",function(){window.parent.location.reload(!0)})}else n!=""&&n!=undefined&&n=="false"&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some problem has occured"))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function BusPaxCahnge(){var t=tjq("#busdepartpax").val(),r=parseInt(tjq("#busdepartpax > option").length)-1,n,i;tjq("#busdepartpaxchild").text(parseInt(r)-parseInt(t)+" Child");n=tjq("#busreturnpax").val();n==undefined&&(n=0);i=parseInt(tjq("#busreturnpax > option").length)-1;tjq("#busreturnpaxchild").text(parseInt(i)-parseInt(n)+" Child");tjq("#loader").show();tjq.ajax({url:"/Bus/PaxCountChange",data:{departadultpax:t,returnadutpax:n},method:"Post",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=""&&n!=undefined&&(tjq("#busdepartfare").text(n.DepartTicketFareInClinetCurrency),tjq("#busreturnfare").text(n.ReturnTicketFareInClinetCurrency),tjq("#busadminfee").text(n.AdminFeeInClinetCurrency),tjq("#busdicsount").text(n.DiscountInClinetCurrency),tjq("#bustotalfare").text(n.TotalAmountInClinetCurrency),console.log(n))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}function ValidateBusPaxAge(n,t){var r=[],u;r=n.split("_");var f=tjq("#"+r[0]+"_"+r[1]+"__PassengerType").val(),e=tjq("#"+n).val(),i=[];i=e.split("/");dob=i[2]+"-"+i[0]+"-"+i[1];u=CalculateAge(dob,t);f=="A"&&u<12&&(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Adult DOB should be greate than 12."),tjq("#"+n).val(""));f=="C"&&u>=12&&(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Child DOB should be less than 12."),tjq("#"+n).val(""))}function CheckSupplierDuplicate(n){var t=tjq.trim(tjq(n).val()),i=window.location.search.substr(3);tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Supplier/CheckForDuplicateSupplier",data:{Name:t},success:function(t){t==!1&&(tjq(n).val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("This Supplier name is already registered please try another name."));tjq("#loader").hide()},error:function(){tjq("#loader").hide();alert("Error has occurred..")}})}function supplierDetailsModal(n){tjq("#loader").show();tjq.ajax({type:"POST",url:"/Supplier/ViewSupplier",data:{SupplierId:n},success:function(n){tjq("#dvEditOrCreateModal").html("");tjq("#dvEditOrCreateModal").html(n);tjq("#editSupplier").modal("show");tjq("#loader").hide()},error:function(){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Somethig went wrong please contact admin.");tjq("#loader").hide()}})}function HHsupplierDetailsModal(n){tjq("#loader").show();tjq.ajax({type:"POST",url:"/HHsuppliers/ViewSupplier",data:{Id:n},success:function(n){tjq("#dvEditOrCreateModal").html("");tjq("#dvEditOrCreateModal").html(n);tjq("#editSupplier").modal("show");tjq("#loader").hide()},error:function(){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Somethig went wrong please contact admin.");tjq("#loader").hide()}})}function airlineAccountsModal(n){tjq("#loader").show();tjq.ajax({type:"POST",url:"ViewSupplier",data:{Id:n},success:function(n){tjq("#dvEditOrCreateModal").html("");tjq("#dvEditOrCreateModal").html(n);tjq("#editSupplier").modal("show");tjq("#loader").hide()},error:function(){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Somethig went wrong please contact admin.");tjq("#loader").hide()}})}function bankAccountModal(n){tjq("#loader").show();tjq.ajax({type:"POST",url:"/Deposit/BankAccountEditView",data:{id:n},success:function(n){tjq("#dvEditOrCreateModal").html("");tjq("#dvEditOrCreateModal").html(n);tjq("#editBankAccount").modal("show");tjq("#loader").hide()},error:function(){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Somethig went wrong please contact admin.");tjq("#loader").hide()}})}function fnGetGender(n,t){var i=n,u=t,r="Passengers_"+u+"__Gender";tjq("#"+i).val()!=""&&tjq("#"+i).val()!=undefined&&(tjq("#"+i).val().toLocaleLowerCase()=="mr"||tjq("#"+i).val().toLocaleLowerCase()=="mstr")&&tjq("#"+r).val("Male").change();tjq("#"+i).val()!=""&&tjq("#"+i).val()!=undefined&&(tjq("#"+i).val().toLocaleLowerCase()=="ms"||tjq("#"+i).val().toLocaleLowerCase()=="mrs"||tjq("#"+i).val().toLocaleLowerCase()=="miss")&&tjq("#"+r).val("Female").change()}function Uncheck(n){var t=tjq("#isActive").prop("checked"),i=tjq("#isArchive").prop("checked");t==!0&&i==!0&&(n==1?tjq("#isArchive").prop("checked",!1):n==2&&tjq("#isActive").prop("checked",!1))}function fnArchiveClient(){tjq("#CnfmArchive,#Dcnarchive").click(function(){this.id=="CnfmArchive"?tjq("#isArchive").prop("checked",!0):this.id=="Dcnarchive"&&tjq("#isArchive").prop("checked",!1)})}function fnShowConfirmation(){var n=tjq("#isArchive").prop("checked");n==!0&&tjq("#dvArchiveclient").modal("show")}function UpdateSupplier(){tjq("#frmUpdateSupplier").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t)tjq("#frmUpdateSupplier").submit();else return!1}})}function formValidationsCheck(n){tjq("#"+n).validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!0,onValidationComplete:function(t,i){if(i)tjq("#"+n).submit(),tjq("#loader").show();else return!1}})}function UpdateHHSupplier(){tjq("#frmUpdateHHSupplier").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t)tjq("#frmUpdateHHSupplier").submit();else return!1}})}function UpdateAirlineAccount(){tjq("#frmUpdateAirlineAccounts").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){if(t)tjq("#frmUpdateAirlineAccounts").submit();else return!1}})}function StartAndEndDate(){function t(t){var i;try{i=tjq.datepicker.parseDate(n,t.value)}catch(r){i=null}return i}var n="dd/mm/yy",i=tjq(document).on("foucs",".startingDate",function(){tjq(this).datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!0,numberOfMonths:2,dateFormat:n,maxDate:new Date,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){r.datepicker("option","minDate",t(this))})}),r=tjq(document).on("foucs",".endingDate",function(){tjq(this).datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!0,numberOfMonths:2,dateFormat:n,maxDate:new Date,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){i.datepicker("option","maxDate",t(this))})}),u=tjq(".startingDate").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!0,numberOfMonths:2,dateFormat:n,maxDate:new Date,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){f.datepicker("option","minDate",t(this))}),f=tjq(".endingDate").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!0,numberOfMonths:2,dateFormat:n,maxDate:new Date,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}).on("change",function(){u.datepicker("option","maxDate",t(this))}),o=tjq(".datePicker").datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!0,numberOfMonths:2,dateFormat:n,dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t)}}),e=tjq("<span />",{"class":"input-group-addon datePickerCalender"}).html('<i class="fa fa-calendar"><\/i>');tjq(".datePicker,.startingDate,.endingDate").find(".datePickerCalender").length===0&&tjq(".datePicker,.startingDate,.endingDate").after(e);tjq("span.datePickerCalender").on("click",function(){tjq(this).prev().datepicker("show")})}function RevalidateHotel(n){var t=tjq("#"+n+"").val(),i={roomIndex:t};tjq("#loader").show();tjq("#"+n+"").hide();tjq.ajax({url:"/HotelDetails/Revalidate",method:"POST",datatype:"json",data:i,success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();t==!1?(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Sorry the requested room is sold out."),tjq("#"+n+"").text("Unavailable"),tjq("#"+n+"").attr("disabled",!0),tjq("#"+n+"").show(),tjq(tjq("#"+n+"")).addClass("btnfareunavailable")):(tjq("#loader").show(),window.location.href="/HotelDetails/GuestDetails")},error:function(){tjq("#loader").hide();tjq("#"+n+"").show();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Sorry the requested room is sold out.")}})}function ValidateAgreeTerms(){tjq("#chkBusTerms").is(":checked")?(tjq("#btnBusBook").removeAttr("disabled"),tjq("#btnBusBook").removeAttr("disabled")):(tjq("#btnBusBook").attr("disabled","disabled"),tjq("#btnBusBook").attr("disabled","disabled"))}function hideorshowBusReturndate(n){n.toLocaleLowerCase()=="o"&&(tjq(".retrn_date").hide(),tjq("#ReturnDate").val(""))}function fnSubmitEnquiryForm(){var r;tjq("#loader").show();var n=tjq("#txtEnquiryName").val(),u=tjq("#txtEnquiryPhNum").val(),t=tjq("#txtEnquiryEmail").val(),i=tjq("#txtEnquiryMessage").val();if(n==""||n==undefined)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter name"),tjq("#txtEnquiryName").focus(),!1;if(t==""||t==undefined)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter email"),tjq("#txtEnquiryEmail").focus(),!1;if(i==""||i==undefined)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter Message to send"),tjq("#txtEnquiryMessage").focus(),!1;r={Name:n,PhoneNumber:u,Email:t,Message:i};tjq.ajax({type:"POST",url:"/Common/SaveEnquiryForm",data:r,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=""&&n!=undefined&&n.toLocaleLowerCase()!="na"&&n.toLocaleLowerCase()=="success"&&(tjq("#txtEnquiryName").val(""),tjq("#txtEnquiryPhNum").val(""),tjq("#txtEnquiryEmail").val(""),tjq("#txtEnquiryMessage").val(""),tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Thank you for reaching us One of our representative will revert to you with in 1 business day"));tjq("#loader").hide()},error:function(){tjq("#loader").hide();tjq("#txtEnquiryName").val("");tjq("#txtEnquiryPhNum").val("");tjq("#txtEnquiryEmail").val("");tjq("#txtEnquiryMessage").val("");tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Something went wrong!")}})}function ViewBusmarkupForUpdate(n){var t=tjq("#ItemsCount").val(),i=tjq("#pageno").val(),r=tjq("#totalCount").val();BindDropdownWithPageNumber(t);i<=Math.ceil(r/t)?tjq("#pageno").val(i):tjq("#pageno").val(1);BindDropdownWithItemsPerPage();tjq(".recperpage").val(t);tjq("#loader").show();tjq.get("/Bus/BusmarkupPartial?busmarkupid="+n,function(n){tjq("#loader").hide();tjq("#dvshowbusmarkup").html("");tjq("#dvshowbusmarkup").html(n);tjq("#dvModifyBusMarkup").modal("show")})}function BindDropdownWithItemsPerPage(n){var t=tjq("#ItemsViewPerPage").val(),r=tjq("#ItemsPerPageIterations").val(),e=t,o=r,u,f,i;for((t==""||t==undefined||t=="0")&&(e=10),(r==""||r==undefined||r=="0")&&(o=5),u=[],f=1;f<=o;f++){if(i=0,i+=e,n<i&&n<i+t&&n<i-t)return!1;u.push(i);tjq(".recperpage").empty();tjq.each(u,function(n,t){tjq(".recperpage").append(tjq("<option />",{value:t,text:t}))})}}function PageNumbersPushingInDropDownWithPageCount(n){var i,t;if(n==""||n==undefined||n=="0")tjq(".drpPage").empty(),tjq(".drpPage").append(tjq("<option />",{value:1,text:1}));else if(n!=""&&n!=undefined&&n!="0"){for(i=[],t=1;t<=n;t++)i.push(t);tjq(".drpPage").empty();tjq.each(i,function(n,t){tjq(".drpPage").append(tjq("<option />",{value:t,text:t}))})}}function BindDropdownWithPageNumber(n){var u=tjq("#totalCount").val(),f=tjq("#totalPages").val(),t,r,i;if((n==""||n==undefined)&&(t=f),n!=""&&n!=undefined&&(t=Math.ceil(u/n)),t!=undefined&&t=="0")tjq(".drpPage").empty(),tjq(".drpPage").append(tjq("<option />",{value:1,text:1}));else if(t!=""&&t!=undefined&&t!="0"){for(r=[],i=1;i<=t;i++)r.push(i);tjq(".drpPage").empty();tjq.each(r,function(n,t){tjq(".drpPage").append(tjq("<option />",{value:t,text:t}))})}}function RNRPagination(n){var t=tjq(".recperpage").val(),i=tjq("#pageno").val(),r=tjq("#totalCount").val();n==!0&&(tjq("#pageno")[0].selectedIndex=0,i=tjq("#pageno").val());BindDropdownWithPageNumber(t);i<=Math.ceil(r/t)?tjq("#pageno").val(i):tjq("#pageno").val(1);tjq(".recperpage").val(t);tjq("#loader").show();tjq.ajax({url:"/SearchRules/SearchRulesPagination",method:"POST",datatype:"json",data:{TotalItems:r,PageNumber:i,ItemsperPage:t},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationViewRNR").html("");tjq("#dvPaginationViewRNR").html(n)},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some problem has occured please contact admin!")}})}function viewUpdateSearchRules(n){tjq("#loader").show();tjq.ajax({url:"/SearchRules/ViewSearchRules",data:{routeID:n},method:"POST",datatype:"json",success:function(n){tjq("#SearchResultUpdateBody").html("");tjq("#SearchResultUpdateBody").html(n);UpdatePromoteTagShowOrHide(isUpdatePromote);fnGetSupplierText(dropdownSupplier1,drpdownSource1);tjq("#dvRouteUpdate").modal("show");validationforSearchRules();tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function viewBookRulesEdit(n){tjq("#loader").show();tjq.ajax({url:"/BookRules/ViewBookResult",data:{Id:n},method:"POST",datatype:"json",success:function(n){tjq("#BookRulesUpdateBody").html("");tjq("#BookRulesUpdateBody").html(n);tjq("#dvBookRulesUpdate").modal("show");fnGetSupplierText(dropdownSupplier1,drpdownSource1);validationforSearchRules();tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function viewFlightIndicatorEdit(n){tjq("#loader").show();tjq.ajax({url:"/FlightIndicator/ViewFlightIndicatorResult",data:{Id:n},method:"POST",datatype:"json",success:function(n){tjq("#FlightindicatorUpdateBody").html("");tjq("#FlightindicatorUpdateBody").html(n);tjq("#dvFlightIndicatorUpdate").modal("show");fnGetSupplierText(dropdownSupplier1,drpdownSource1);validationforSearchRules();tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function AccountCodeCheck(){tjq("#txtAccount, #txtAccountCode").on("keypress",function(n){var t=new RegExp("^[a-zA-Z0-9]+$"),i=String.fromCharCode(n.charCode?n.charCode:n.which);return t.test(i)?!0:(n.preventDefault(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Account code allows only alphanumeric characters!"),!1)})}function viewCorporateRulesEdit(n){tjq("#loader").show();tjq.ajax({url:"/CorporateRules/ViewCorporateRulesResult",data:{Id:n},method:"POST",datatype:"json",success:function(n){tjq("#CorporateRulesUpdateBody").html("");tjq("#CorporateRulesUpdateBody").html(n);tjq("#dvCorporateRulesUpdate").css("z-index",1049);tjq("#dvCorporateRulesUpdate").modal("show");fnGetSupplierText(dropdownSupplier1,drpdownSource1);validationforSearchRules();AccountCodeCheck();tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function BusCommisionPagination(n,t){var i=tjq("#ItemsCount").val(),r=tjq("#pageno").val(),u=tjq("#totalCount").val();t==!0&&(tjq("#pageno")[0].selectedIndex=0,r=tjq("#pageno").val());BindDropdownWithPageNumber(i);r<=Math.ceil(u/i)?tjq("#pageno").val(r):tjq("#pageno").val(1);tjq(".recperpage").val(i);tjq("#loader").show();tjq.ajax({url:"/Bus/ManageBusMarkupPagination",method:"POST",datatype:"json",data:{TotalItems:u,PageNumber:r,ItemsperPage:i,SlabId:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationViewBusMarkUp").html("");tjq("#dvPaginationViewBusMarkUp").html(n)},error:function(){tjq("#loader").hide()}})}function HotelMarkupCommisionPagination(n){var t=tjq("#ItemsCount").val(),i=tjq("#pageno").val(),r=tjq("#totalCount").val(),u=tjq("#totalSlabId").val();n==!0&&(tjq("#pageno")[0].selectedIndex=0,i=tjq("#pageno").val());BindDropdownWithPageNumber(t);i<=Math.ceil(r/t)?tjq("#pageno").val(i):tjq("#pageno").val(1);tjq(".recperpage").val(t);tjq("#loader").show();tjq.ajax({url:"/CommissionAndMarkupHotel/PagingManageHotelMarkup",method:"POST",datatype:"json",data:{TotalItems:r,PageNumber:i,ItemsperPage:t,HotelSlabId:u},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationHotelComission").html("");tjq("#dvPaginationHotelComission").html(n)},error:function(){tjq("#loader").hide()}})}function AssociatedClientsPagination(n){var t=tjq("#ItemsCount").val(),i=tjq("#pageno").val(),r=tjq("#totalCount").val();n==!0&&(tjq("#pageno")[0].selectedIndex=0,i=tjq("#pageno").val());BindDropdownWithPageNumber(t);i<=Math.ceil(r/t)?tjq("#pageno").val(i):tjq("#pageno").val(1);tjq(".recperpage").val(t);tjq("#loader").show();tjq.ajax({url:"/Administration/ClientAssociationPagination",method:"POST",datatype:"json",data:{TotalItems:r,PageNumber:i,ItemsperPage:t},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvAssociatedClients").html("");tjq("#dvAssociatedClients").html(n)},error:function(){tjq("#loader").hide()}})}function FlighCommisionPagination(n,t,i){var r=tjq("#ItemsCount").val(),u=tjq("#pageno").val(),f=tjq("#totalCount").val();i==!0&&(tjq("#pageno")[0].selectedIndex=0,u=tjq("#pageno").val());BindDropdownWithPageNumber(r);u<=Math.ceil(f/r)?tjq("#pageno").val(u):tjq("#pageno").val(1);tjq(".recperpage").val(r);tjq("#loader").show();tjq.ajax({url:"/Administration/SlabPagination",method:"POST",datatype:"json",data:{TotalItems:f,PageNumber:u,ItemsperPage:r,id:n,markup:t},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvFlightCommisionManageActivities").html("");tjq("#dvFlightCommisionManageActivities").html(n)},error:function(){tjq("#loader").hide()}})}function UserActivityPagination(n,t){var i=tjq("#PageNumber").val(),f=tjq(".recperpage").val(),e,r,u;t==!0&&(tjq("#PageNumber")[0].selectedIndex=0,i=tjq("#PageNumber").val());e=tjq("#totalCount").val();r=tjq("#txtStartDate").val();(r==""||r==undefined)&&(r=null);u=tjq("#txtEndDate").val();(u==""||u==undefined)&&(u=null);tjq(".drpPage").val(i);BindDropdownWithPageNumber(f);i<=Math.ceil(e/f)?tjq(".drpPage").val(i):tjq(".drpPage").val(1);tjq(".recperpage").val(f);tjq("#loader").show();tjq.ajax({url:"/UserActivity/ActivityPagination",method:"POST",datatype:"json",data:{TotalItems:e,PageNumber:i,ItemsperPage:f,StartDate:r,EndDate:u,FltHtlBus:n.toLowerCase()},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvUserActivities").html("");tjq("#dvUserActivities").html(n)},error:function(){tjq("#loader").hide()}})}function disableTravelfromtoSalesfromto(){tjq("#ddlMarkupType").on("change",function(){tjq(this).val()=="2"?(tjq("#dvTravelfromtoSalesfromto input[type=text]").val(""),tjq("#dvTravelfromtoSalesfromto input[type=text]").attr("disabled","disabled"),tjq("#dvTravelfromtoSalesfromto input[type=text]").removeClass("validate[required]")):(tjq("#dvTravelfromtoSalesfromto input[type=text]").removeAttr("disabled"),tjq("#dvTravelfromtoSalesfromto input[type=text]").addClass("validate[required]"))})}function EditFlightsMarupandComission(n,t,i){var r=tjq("#ItemsCount").val(),u=tjq("#pageno").val(),f=tjq("#totalCount").val();BindDropdownWithPageNumber(r);u<=Math.ceil(f/r)?tjq("#pageno").val(u):tjq("#pageno").val(1);tjq(".recperpage").val(r);tjq("#loader").show();tjq.get("/Administration/ViewSlab?Farematrixid="+n+"&markuptype="+t+"&isMarkup="+i,function(n){tjq("#dvprtlviewslab").html("");tjq("#dvprtlviewslab").html(n);tjq("#markupHiden").length>0&&(tjq("#ddlMarkupType").val(tjq("#markupHiden").val()),tjq("#ddlMarkupType").trigger("change"));tjq("#dvviewslab").modal("show");validationforCommissionandMarkup();fnGetSupplierText(dropdownSupplier,drpdownSource);CountriesandAirLinesAutoComplete();disableTravelfromtoSalesfromto();MarkupShowandHide();tjq("#markupHiden").length>0&&tjq("#ddlMarkupType").trigger("change");tjq("#loader").hide();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide()})}function GeneralLedgerPaginationitemsCountChange(){var r,t,i,n;tjq("#PageNumber")[0].selectedIndex=0;r=tjq(".recperpage").val();t=tjq(".drpPage").val();tjq(".drpPage").val(t);tjq(".drpPage").val(t);tjq(".ddlpaymenttransaction").length>0?(i=tjq(".ddlpaymenttransaction").val(),n=i.substring(0,i.length-3)):n=tjq("#txtclientid").length>0?tjq("#txtclientid").val():"";tjq("#loader").show();tjq.ajax({url:"/Accounts/GeneralLedgerPagination",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:r,clientId:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvpaymenttransaction").html("");tjq("#dvpaymenttransaction").html(n);var t=tjq("#pagecount").val();PageNumbersPushingInDropDownWithPageCount(t)},error:function(){tjq("#loader").hide()}})}function GeneralLedgerPaginationpageCountChange(){var r=tjq(".recperpage").val(),t=tjq(".drpPage").val(),i,n;tjq(".drpPage").val(t);BindDropdownWithPageNumber(r);tjq(".drpPage").val(t);tjq(".ddlpaymenttransaction").length>0?(i=tjq(".ddlpaymenttransaction").val(),n=i.substring(0,i.length-3)):n=tjq("#txtclientid").length>0?tjq("#txtclientid").val():"";tjq("#loader").show();tjq.ajax({url:"/Accounts/GeneralLedgerPagination",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:r,clientId:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvpaymenttransaction").html("");tjq("#dvpaymenttransaction").html(n)},error:function(){tjq("#loader").hide()}})}function manageClientsPagination(n){var r;n==!1&&(tjq("#PageNumber")[0].selectedIndex=0);var u=tjq("#txtFilter").val(),t=tjq(".recperpage").val(),i=tjq(".drpPage").val();BindDropdownWithPageNumber(t);tjq(".drpPage").val(i);r=tjq("ul.nav-tabs li.active").attr("id");tjq("#loader").show();tjq.ajax({url:"/Administration/ManageClientPagination",method:"POST",datatype:"json",data:{PageNumber:i,ItemsperPage:t,status:r,filter:u},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#divManageClientPagination").html("");tjq("#divManageClientPagination").html(n)},error:function(){tjq("#loader").hide()}})}function changeManageClientTab(n){var t=tjq(n).attr("id");tjq("#txtFilter").val("");tjq("#loader").show();tjq.ajax({url:"/Administration/ViewClients",method:"POST",datatype:"json",data:{d:t},success:function(n){var e,i;n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#divManageClientPagination").html("");tjq("#divManageClientPagination").html(n);tjq("#ItemsCount")[0].selectedIndex=0;e=tjq(".recperpage").val();BindDropdownWithPageNumber(e);tjq("#PageNumber")[0].selectedIndex=0;var t=parseInt(tjq("#txttotalPages").val()),o=parseInt(tjq("#txtItemsPerPageIteration").val()),r=parseInt(tjq("#txtItemsPerPage").val()),u=0,f=[];if(t!=undefined&&t==0)tjq(".recperpage").empty(),tjq(".recperpage").append(tjq("<option />",{value:r,text:r}));else if(t!=""&&t!=undefined&&t!=0){if(t<o)for(i=1;i<=t;i++)u+=r,f.push(u);else for(i=1;i<=o;i++)u+=r,f.push(u);tjq(".recperpage").empty();tjq.each(f,function(n,t){tjq(".recperpage").append(tjq("<option />",{value:t,text:t}))})}tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function filterClientsBasedOnNameEmailandPhone(){var n=tjq("ul.nav-tabs li.active").attr("id"),t=tjq("#txtFilter").val();tjq("#loader").show();tjq.ajax({url:"/Administration/ManageClientFilter",method:"POST",datatype:"json",data:{filter:t,status:n},success:function(n){var e,i;n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#divManageClientPagination").html("");tjq("#divManageClientPagination").html(n);tjq("#ItemsCount")[0].selectedIndex=0;e=tjq(".recperpage").val();BindDropdownWithPageNumber(e);tjq("#PageNumber")[0].selectedIndex=0;var t=parseInt(tjq("#txttotalPages").val()),o=parseInt(tjq("#txtItemsPerPageIteration").val()),r=parseInt(tjq("#txtItemsPerPage").val()),u=0,f=[];if(t!=undefined&&t==0)tjq(".recperpage").empty(),tjq(".recperpage").append(tjq("<option />",{value:r,text:r}));else if(t!=""&&t!=undefined&&t!=0){if(t<o)for(i=1;i<=t;i++)u+=r,f.push(u);else for(i=1;i<=o;i++)u+=r,f.push(u);tjq(".recperpage").empty();tjq.each(f,function(n,t){tjq(".recperpage").append(tjq("<option />",{value:t,text:t}))})}tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function DepositViewPagination(n){n&&(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/Deposit/GetAllDespostRequests",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvdepositTransaction").html("");tjq("#dvdepositTransaction").html(n)},error:function(){tjq("#loader").hide()}})}function PaginationForDepositRequest(n){n&&(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/Deposit/GetDepositRequestBasedOnClientId",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvdepositTransaction").html("");tjq("#dvdepositTransaction").html(n)},error:function(){tjq("#loader").hide()}})}function BookRulesPagination(n){n&&(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/BookRules/BookRulesView",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationViewBookRules").html("");tjq("#dvPaginationViewBookRules").html(n)},error:function(){tjq("#loader").hide()}})}function FlightIndicatorPagination(n){n&&(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/FlightIndicator/FlightIndicatorView",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationViewFlightIndicators").html("");tjq("#dvPaginationViewFlightIndicators").html(n)},error:function(){tjq("#loader").hide()}})}function CorporateRulesPagination(n){n&&(tjq("#PageNumber")[0].selectedIndex=0);var r=tjq("#hiddenSlabId").val(),i=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/CorporateRules/CorporateRulesView",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:i,Id:r},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvPaginationViewCorporateRules").html("");tjq("#dvPaginationViewCorporateRules").html(n)},error:function(){tjq("#loader").hide()}})}function UserLogPaginationitemsCountChange(){tjq("#PageNumber")[0].selectedIndex=0;var t=tjq(".recperpage").val(),n=tjq(".drpPage").val();tjq(".drpPage").val(n);BindDropdownWithPageNumber(t);tjq(".drpPage").val(n);tjq("#loader").show();tjq.ajax({url:"/UserLog/ActivityPagination",method:"POST",datatype:"json",data:{PageNumber:n,ItemsperPage:t},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvUserActivities").html("");tjq("#dvUserActivities").html(n)},error:function(){tjq("#loader").hide()}})}function UserLogPaginationpageCountChange(){var t=tjq(".recperpage").val(),n=tjq(".drpPage").val();tjq(".drpPage").val(n);BindDropdownWithPageNumber(t);tjq(".drpPage").val(n);tjq("#loader").show();tjq.ajax({url:"/UserLog/ActivityPagination",method:"POST",datatype:"json",data:{PageNumber:n,ItemsperPage:t},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvUserActivities").html("");tjq("#dvUserActivities").html(n)},error:function(){tjq("#loader").hide()}})}function ReservationSearchPagination(n){n||(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".recperpage").val(),t=tjq(".drpPage").val(),r=tjq("#totalCount").val();tjq(".drpPage").val(t);BindDropdownWithPageNumber(i);tjq(".drpPage").val(t);tjq("#loader").show();tjq.ajax({url:"/Reservations/GetBookingsSearchPagination",method:"POST",datatype:"json",data:{TotalItems:r,PageNumber:t,ItemsperPage:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvreservationpartial").html("");tjq("#dvreservationpartial").html(n)},error:function(){tjq("#loader").hide()}})}function ReservationPagination(){var t=tjq(".recperpage").val(),n=tjq(".drpPage").val(),r=tjq("#totalCount").val(),i;tjq(".drpPage").val(n);BindDropdownWithPageNumber(t);tjq(".drpPage").val(n);tjq("#loader").show();i=tjq("#txtStatus").val();tjq.ajax({url:"/Reservations/ReservationPagination",method:"POST",datatype:"json",data:{TotalItems:r,PageNumber:n,ItemsperPage:t,Status:i},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvreservationpartial").html("");tjq("#dvreservationpartial").html(n)},error:function(){tjq("#loader").hide()}})}function PageCountChanngeInReservationPagination(){tjq("#PageNumber")[0].selectedIndex=0;var i=tjq("#totalCount").val(),t=tjq(".recperpage").val(),n=tjq(".drpPage").val(),r=tjq("#txtStatus").val();tjq(".drpPage").val(n);BindDropdownWithPageNumber(t);tjq(".drpPage").val(n);tjq("#loader").show();tjq.ajax({url:"/Reservations/ReservationPagination",method:"POST",datatype:"json",data:{TotalItems:i,PageNumber:n,ItemsperPage:t,Status:r},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvreservationpartial").html("");tjq("#dvreservationpartial").html(n)},error:function(){tjq("#loader").hide()}})}function CreateStaff(){var n="";n=tjq("#hdnUClientId").val();tjq("#loader").show();tjq.ajax({url:"/Settings/CreateStaff",method:"GET",datatype:"json",data:{d:n},success:function(n){tjq("#loader").hide();tjq("#dvStaffCreate").html(n);tjq("#dvStaffCreatemodal").modal("show");n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function SaveStaff(){var n="";n=tjq("#hdnUClientId").val();tjq("#member-registration-form").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(t,i){if(!i)return!1;tjq("#loader").show();var r=tjq("#member-registration-form").serialize();tjq.ajax({data:r,url:"/Settings/CreateStaff",method:"POST",datatype:"json",success:function(t){if(t=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),t!==""&&t!==undefined)if(t===!1)tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Email or UserName Already Exist!"),tjq("#popfailure").css({"z-index":"1052"});else{var i=tjq("#staffCreaterUpdate").val();i.toLocaleLowerCase()=="create"?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Staff Created Successfully!")):i.toLocaleLowerCase()=="update"&&(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Staff Updated Successfully!"));n!=""&&n!=undefined&&tjq.ajax({data:{d:n},url:"/Settings/ViewStaff",method:"Get",datatype:"json",success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=null&&(tjq("#member-registration-form").trigger("reset"),tjq("#dvStaffCreatemodal").modal("hide"),tjq("#Staff_Members").html("").html(n),tjq(".tblpagination").paginathing({limit:10,rowDisplayStyle:"block",activePage:0,rows:[]}))}})}},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide();tjq("#dvStaffCreatemodal").modal("hide")}})}})}function EditStaff(n){tjq("#loader").show();tjq.ajax({url:"/Settings/EditStaff",method:"GET",datatype:"json",data:{staffId:n},success:function(n){tjq("#loader").hide();tjq("#dvStaffCreate").html("").html(n);tjq("#dvStaffCreatemodal").modal("show");CityListAutocomplete();n=="SESSIONTIMEOUT"&&HanldeSessionTimeout()},error:function(){tjq("#loader").hide()}})}function ReloadClient(){window.location.href=window.location.pathname.toLocaleLowerCase().search("/myaccount/index/")>-1?"/MyAccount/Index":"/Administration/ViewClients"}function checkSpacePassangerFirstName(n){n.value.match(/[^a-zA-Z]/g)&&(n.value=n.value.replace(/[^a-zA-Z]/g,""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("First name should contain only characters"),tjq("#txtfocus").val(n.id),tjq(n).trigger("blur"))}function checkSpacePassangerLastName(n){n.value.match(/[^a-zA-Z]/g)&&(n.value=n.value.replace(/[^a-zA-Z]/g,""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Last name should contain only characters"),tjq("#txtfocus").val(n.id),tjq(n).trigger("blur"))}function checkpassangerPassportNum(n){n.value.match(/[^a-zA-Z0-9]/g)&&(n.value=n.value.replace(/[^a-zA-Z0-9]/g,""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Passport number should contain only characters and numbers"),tjq("#txtfocus").val(n.id),tjq(n).trigger("blur"))}function checkpassangernamelength(n){var f=tjq(n).val().length,r=0,t=n.id,i="",u;t.indexOf("First")>=0?(i=t.replace("First","Last"),r=tjq("#"+i).val().length):(i=t.replace("Last","First"),r=tjq("#"+i).val().length);u=f+r;u>28&&(tjq("#"+i).val(""),tjq("#"+t).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("First name and last name should not contain more than 28 characters"),t.indexOf("First")>=0?tjq("#txtfocus").val(t):tjq("#txtfocus").val(i),setTimeout(function(){tjq("input[type=text]").trigger("blur")},200))}function OnChangeChildrensAge(n){var t=tjq("#"+n).val();roomchildages.push(t);tjq("#ChildrenAges").val(roomchildages)}function childSelectionChanged(){var i,r,n,t,u;if(roomchildages=[],i=tjq("#ChildCount").val(),r=tjq("#RoomsCount").val(),i==0)return tjq("#divChildrenAges1").hide("slow"),tjq("#divChildrenAges2").hide("slow"),tjq("#divChildrenAges3").hide("slow"),tjq("#divChildrenAges4").hide("slow"),!1;if(i!=0)for(n=0;n<r;n++)for(tjq("#divChildrenAges"+(n+1)+" > div").hide(),tjq("#divChildrenAges"+(n+1)).show("slow"),t=0;t<i;t++)tjq("#divChildrenAges"+(n+1)+" > div").eq(t).show(),u=tjq("#divChildrenAges"+(n+1)).find("select")[t].id,tjq("#"+u).val(""),tjq("#divChildrenAges"+(n+1)).find("span.custom-select").text("--Select--")}function clearSupplierCountrytext(n){tjq(n).val("")}function paymentTransactionPaginations(n){var f;n==!1&&(tjq("#PageNumber")[0].selectedIndex=0);var i=tjq(".ddlpaymenttransaction").val(),u=i.substring(0,i.length-3),r=tjq(".recperpage").val(),t=tjq(".drpPage").val();tjq(".drpPage").val(t);f=tjq("ul.nav-tabs li.active").attr("id");tjq("#loader").show();tjq.ajax({url:"/Accounts/PaymentTransactionPagination",method:"POST",datatype:"json",data:{PageNumber:t,ItemsperPage:r,clientId:u},success:function(i){i=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#dvpaymenttransaction").html("");tjq("#dvpaymenttransaction").html(i);BindDropdownWithPageNumber(r);n==!0&&tjq(".drpPage").val(t)},error:function(){tjq("#loader").hide()}})}function setTwoNumberDecimal(n){var t=tjq(n).attr("id"),i=tjq("#"+t).val().split("."),r;i.length>1&&i[1].length>2&&(r=parseFloat(tjq("#"+t).val()),tjq("#"+t).val(r.toFixed(2)))}function paymentModeClick(n){var t=tjq(n).attr("id"),i=tjq(n).val();tjq(".dvBookandPay").show();tjq(".dvInstatOrBookandHoldBtn").hide();tjq.ajax({url:"/PassengerDetails/ShowCcProcessingFee",data:{indicator:i},method:"POST",datatype:"json",success:function(n){var i;n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t=="radioCC"?(i=n.split("|"),tjq(".CcCharge").text(i[1]),tjq(".dvCcCharge").show(),tjq(".spntotal").text(i[0])):(i=n.split("|"),tjq(".spntotal").text(i[0]),tjq(".dvInstatOrBookandHoldBtn").show(),tjq(".dvBookandPay").hide(),tjq(".CcCharge").text("00"),tjq(".dvCcCharge").hide())}})}function submitPaymentEntryForm(){tjq("#frmpaymentEntry").validationEngine("detach");tjq("#frmpaymentEntry").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,focusInvalid:!1,onValidationComplete:function(n,t){t==!0&&(tjq("#loader").show(),tjq("#frmpaymentEntry").submit())}})}function readURL(n,t,i){var u=n.value.substring(n.value.lastIndexOf(".")+1,n.value.length);if(u.toUpperCase()=="JPG"){var f=n.files[0].size/1024,e=n.value.lastIndexOf("\\"),o=n.value.substring(e+1,n.value.length),r=new FileReader;r.onload=function(n){tjq("#"+t).attr("src",n.target.result)};tjq("#"+t+"size").text(f+" kb");tjq("#"+t+"filename").text(" "+o);tjq("#dv"+t+"Details").show();r.readAsDataURL(n.files[0]);tjq("#"+i).show()}else tjq("#"+t).attr("src",""),tjq("#"+i).hide(),tjq("#dv"+t+"Details").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Uploaded file is not a valid file type. Only JPG files are allowed !")}function agencyChange(n){tjq("#loader").show();var t=tjq(n).attr("id"),i="";t.toUpperCase().indexOf("FLIGHTS")>=0&&(i=t.replace("flightsagency",""));tjq.ajax({url:"/Source/ActivateDeactivateAgencyInfo",data:{code:i},method:"POST",datatype:"json",success:function(n){n?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Source updated Sucessfully ! ")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some error occured please contact administrator."));tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function LoadTravellerCountriesAutocomplete(){tjq.ajax({url:"/TravellerProfile/Getcountries",method:"GET",datatype:"json",success:function(n){var t=tjq(".country");t.autocomplete({source:n,change:function(n,i){i.item||t.val("")}})}})}function PrimaryPassportChange(){tjq("#divPassport input:checkbox").length>1?tjq("#divPassport input:checkbox:last").is(":checked")&&tjq("#divPassport input:checkbox:first").is(":checked")?(tjq("#divPassport input:checkbox:first").attr("checked",!0),tjq("#divPassport input:checkbox:last").attr("checked",!1)):tjq("#divPassport input:checkbox:last").is(":checked")||tjq("#divPassport input:checkbox:first").is(":checked")||(tjq("#divPassport input:checkbox:first").attr("checked",!1),tjq("#divPassport input:checkbox:last").attr("checked",!0)):tjq("#divPassport input:checkbox:first").attr("checked",!0)}function loadFile(n){var t=new FileReader;t.onload=function(){var i=n.target.id,r=tjq("#"+i).parents("div.divlistpassport:first").find(".passportimage");tjq(r).attr("src",t.result)};t.readAsDataURL(n.target.files[0])}function HideFindTraveler(n){tjq("#"+n.id).is(":checked")?tjq("#"+n.id).parents().find("#dvfindtraveler").attr("hidden","hidden"):tjq("#"+n.id).parents().find("#dvfindtraveler").removeAttr("hidden")}function CheckExistingtravelerPassenger(n){var t;if(tjq("#"+n.id).parents().find(".createprofiletraveler").is(":checked")&&(t=[],t=n.id.split("_"),t[1]!=undefined)){var i=t[1],r=tjq("#Passengers_"+i+"__FirstName").val(),u=tjq("#Passengers_"+i+"__LastName").val(),f=tjq("#Passengers_"+i+"__PassportNum").val(),e=tjq("#Email").val();r!=undefined&&r!=""&&u!=undefined&&u!=""&&f!=undefined&&f!=""&&(tjq("#loader").show(),tjq.ajax({method:"POST",dataType:"json",data:{FirstName:r,LastName:u,PassportNo:f,Email:e!=undefined?e:""},url:window.location.origin+"/TravellerProfile/CheckExistingTraveler",success:function(t){t==!0&&(tjq("#txtName").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Traveler alredy exists!"),tjq("#"+n.id).parents().find(".createprofiletraveler").attr("checked",!1));tjq("#loader").hide()}}))}}function CheckExistingtraveler(n){if(tjq(".divlistpassengers").length>1){var u=tjq(".travellerFirstName").map(function(){return tjq(this).val()}).toArray(),f=u.AllValuesSame(),e=tjq(".travellerLastName").map(function(){return tjq(this).val()}).toArray(),t=e.AllValuesSame(),o=tjq(".travellerPassportNum").map(function(){return tjq(this).val()}).toArray(),s=o.AllValuesSame(),h=tjq(".travellerEmail").map(function(){return tjq(this).val()}).toArray(),i=h.AllValuesSame();f==!0&&t==!0&&s==!0&&i==!0&&(tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerFirstName").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerEmail").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerLastName").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerPassportNum").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Same traveller details exists!"))}if(n!=undefined){var r=tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerFirstName").val(),t=tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerLastName").val(),i=tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerEmail").val(),c=tjq("#BranchId").val();tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerPassportNum").each(function(){r!=undefined&&r!=""&&t!=undefined&&t!=""&&tjq(this).val()!=undefined&&tjq(this).val()!=""&&i!=undefined&&i!=""&&(tjq("#loader").show(),tjq.ajax({method:"POST",dataType:"json",data:{FirstName:r,LastName:t,PassportNo:tjq(this).val(),Email:i,BranchId:c},url:window.location.origin+"/TravellerProfile/CheckExistingTraveler",success:function(t){t==!0&&(tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Traveler alredy exists!"),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerFirstName").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerLastName").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerPassportNum").val(""),tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerEmail").val(""));tjq("#loader").hide()}}))})}}function ClearPassengerDetails(n){var r,i;if(n.value==""&&(r=tjq(n).parent().parent().find(".createprofiletraveler").prop("id"),r!=undefined&&(i=[],i=r.split("_"),i[1]!=undefined))){var t=i[1],u=parseInt(t)+1,f=tjq("#Passengers_"+t+"__PaxType").val();tjq("#createProfile"+(parseInt(t)+1)).css("display","");tjq("#Passengers_"+t+"__FirstName").val("");tjq("#Passengers_"+t+"__LastName").val("");tjq("#Passengers_"+t+"__SeatPref").val("");tjq("#Passengers_"+t+"__MealReq").val("");tjq("#Passengers_"+t+"__FFNum").val("");tjq("#"+f+"-DD-"+u).val("");tjq("#"+f+"-MM-"+u).val("");tjq("#"+f+"-YY-"+u).val("");tjq("#Passengers_"+t+"__PassportNum").val("");tjq("#Passengers_"+t+"__Country").val("");tjq("#Passengers_"+t+"__Nationality").val("");tjq("#Passengers_"+t+"__PDay").val("");tjq("#Passengers_"+t+"__PMonth").val("");tjq("#Passengers_"+t+"__PYear").val("");t==0&&(tjq("#Email").val(""),tjq("#MobileNum").val(""),tjq("#Address1").val(""),tjq("#PostalCode").val(""),tjq("#City").val(""))}}function ValidateTravellerDOB(n){var o=tjq("#"+n.id).parents("div.divlistpassengers:first").find(".travellerPaxtype").val(),t=new Date,e,i;if(o=="1"){var r=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val(),u=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val(),f=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val();r!=""&&u!=""&&f!=""&&(t!=null||t!=undefined)&&(e=f+"-"+u+"-"+r,i=CalculateAge(e,t),i<12&&(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Adult DOB should be greate than 12."),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val("").change()))}if(o=="2"){var r=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val(),u=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val(),f=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val();r!=""&&u!=""&&f!=""&&(t!=null||t!=undefined)&&(e=f+"-"+u+"-"+r,i=CalculateAge(e,t),(i<2||i>=12)&&(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Child DOB should be between 2 to 12."),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val("").change()))}if(o=="3"){var r=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val(),u=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val(),f=tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val();r!=""&&u!=""&&f!=""&&(t!=null||t!=undefined)&&(e=f+"-"+u+"-"+r,i=CalculateAge(e,t),i>=2&&(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Infant DOB should be less than 2."),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBdd").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOBmm").val("").change(),tjq("#"+n.id).parents("div.divlistpassport:first").find(".DOByy").val("").change()))}}function CalculateAge(n,t){var i=new Date(t),r=new Date(n),u=i.getFullYear()-r.getFullYear(),f=i.getMonth()-r.getMonth();return(f<0||f===0&&i.getDate()<r.getDate())&&u--,u}function LoadPriceRange(){tjq("#price-range").slider({range:!0,min:parseInt(tjq("#hdnMinPrice").val()),max:parseInt(tjq("#hdnMaxPrice").val()),values:[parseInt(tjq("#hdnMinPrice").val()),parseInt(tjq("#hdnMaxPrice").val())],slide:function(n,t){tjq(".min-price-label").html(t.values[0]+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(t.values[1]+" "+tjq("#hdnCurrency").val());minValue=t.values[0];maxValue=t.values[1]}});tjq(".min-price-label").html(tjq("#price-range").slider("values",0)+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(tjq("#price-range").slider("values",1)+" "+tjq("#hdnCurrency").val());strminPrice=parseInt(tjq("#hdnMinPrice").val());strmaxPrice=parseInt(tjq("#hdnMaxPrice").val())}function LoadOutboundDepartureTime(){tjq("#flight-timesdept").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".deptstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".deptend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];outbounddeparturestart=t.values[0];outbounddepartureend=t.values[1]}});tjq(".deptstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesdept").slider("values",0)));tjq(".deptend-time-label").html(convertTimeToHHMM(tjq("#flight-timesdept").slider("values",1)))}function LoadInboundDepartureTime(){tjq("#inboundflight-timesdept").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".inbounddeptstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".inbounddeptend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];inbounddeparturestart=t.values[0];inbounddepartureend=t.values[1]}});tjq(".inbounddeptstart-time-label").html(convertTimeToHHMM(tjq("#inboundflight-timesdept").slider("values",0)));tjq(".inbounddeptend-time-label").html(convertTimeToHHMM(tjq("#inboundflight-timesdept").slider("values",1)))}function LoadDepartureTimeforB2C(){tjq("#flight-timesdeptinbound").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".inbounddeptstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".inbounddeptend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];inbounddeparturestart=t.values[0];inbounddepartureend=t.values[1]}});tjq(".inbounddeptstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesdeptinbound").slider("values",0)));tjq(".inbounddeptend-time-label").html(convertTimeToHHMM(tjq("#flight-timesdeptinbound").slider("values",1)))}function LoadOutboundArrivalTime(){tjq("#flight-timesarr").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".arrstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".arrend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];outboundarrivalstart=t.values[0];outboundarrivalend=t.values[1]}});tjq(".arrstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesarr").slider("values",0)));tjq(".arrend-time-label").html(convertTimeToHHMM(tjq("#flight-timesarr").slider("values",1)))}function LoadInboundArrivalTime(){tjq("#inboundflight-timesarr").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".inboundarrstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".inboundarrend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];inboundarrivalstart=t.values[0];inboundarrivalend=t.values[1]}});tjq(".inboundarrstart-time-label").html(convertTimeToHHMM(tjq("#inboundflight-timesarr").slider("values",0)));tjq(".inboundarrend-time-label").html(convertTimeToHHMM(tjq("#inboundflight-timesarr").slider("values",1)))}function LoadArrivalTimeForB2C(){tjq("#flight-timesarrinbound").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".inboundarrstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".inboundarrend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];inboundarrivalstart=t.values[0];inboundarrivalend=t.values[1]}});tjq(".inboundarrstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesarrinbound").slider("values",0)));tjq(".inboundarrend-time-label").html(convertTimeToHHMM(tjq("#flight-timesarrinbound").slider("values",1)))}function LoadOutboundTransitTime(){tjq("#flight-timestransitoutbound").slider({range:!0,min:parseFloat(tjq("#hdntransitstart").val()),max:parseFloat(tjq("#hdntransitend").val()),step:parseFloat("1"),values:[parseFloat(tjq("#hdntransitstart").val()),parseFloat(tjq("#hdntransitend").val())],slide:function(n,t){tjq(".outboundtransitstart-time-label").html(t.values[0]);tjq(".outboundtransitend-time-label").html(t.values[1]);outboundtransitstart=t.values[0];outboundtransitend=t.values[1]}});tjq(".outboundtransitstart-time-label").html(tjq("#flight-timestransitoutbound").slider("values",0));tjq(".outboundtransitend-time-label").html(tjq("#flight-timestransitoutbound").slider("values",1));outboundminTransit=parseFloat(tjq("#hdntransitstart").val());outboundmaxTransit=parseFloat(tjq("#hdntransitend").val())}function LoadInboundTransitTime(){tjq("#flight-timestransitinbound").slider({range:!0,min:parseFloat(tjq("#hdninboundtransitstart").val()),max:parseFloat(tjq("#hdninboundtransitend").val()),step:parseFloat("1"),values:[parseFloat(tjq("#hdninboundtransitstart").val()),parseFloat(tjq("#hdninboundtransitend").val())],slide:function(n,t){tjq(".inboundtransitstart-time-label").html(t.values[0]);tjq(".inboundtransitend-time-label").html(t.values[1]);inboundtransitstart=t.values[0];inboundtransitend=t.values[1]}});tjq(".inboundtransitstart-time-label").html(tjq("#flight-timestransitinbound").slider("values",0));tjq(".inboundtransitend-time-label").html(tjq("#flight-timestransitinbound").slider("values",1));inboundminTransit=parseFloat(tjq("#hdninboundtransitstart").val());inboundmaxTransit=parseFloat(tjq("#hdninboundtransitend").val())}function updateNumberOfResults(){var n=parseInt(tjq("#hdnModelCount").val()),t=parseInt(tjq("div.searchresult").filter(":visible").length);n==t?tjq(".search-results-title").text(parseInt(tjq("#hdnModelCount").val())):tjq(".search-results-title").text(tjq("div.searchresult").filter(":visible").length).append("  Of  "+parseInt(tjq("#hdnModelCount").val()))}function updateNumberOfFlightOptions(){tjq(".search-results-title").text(parseInt(tjq("#hdnModelCount").val()))}function resetSearchFilter(n){n!="stops"&&tjq("input[name='chkstop']").attr("checked",!1);n!="airline"&&tjq("input[name='chkgrpairlne']").attr("checked",!1);var t=tjq("#flight-timesduration"),i=tjq("#flight-timestransit"),r=tjq("#flight-timesdept"),u=tjq("#flight-timesarr");n!="duration"&&(t.slider("values",0,tjq("#hdndurstart").val()),t.slider("values",1,tjq("#hdndurend").val()),tjq(".durstart-time-label").html(t.slider("values",0)),tjq(".durend-time-label").html(t.slider("values",1)));n!="transit"&&(i.slider("values",0,tjq("#hdntransitstart").val()),i.slider("values",1,tjq("#hdntransitend").val()),tjq(".transitstart-time-label").html(i.slider("values",0)),tjq(".transitend-time-label").html(i.slider("values",1)));n!="departure"&&(r.slider("values",0,0),r.slider("values",1,1439),tjq(".deptstart-time-label").html(convertTimeToHHMM(r.slider("values",0))),tjq(".deptend-time-label").html(convertTimeToHHMM(r.slider("values",1))));n!="arrival"&&(u.slider("values",0,0),u.slider("values",1,1439),tjq(".arrstart-time-label").html(convertTimeToHHMM(u.slider("values",0))),tjq(".arrend-time-label").html(convertTimeToHHMM(u.slider("values",1))))}function convertTimeToHHMM(n){var t=n%60,i=(n-t)/60,r=(i+"").lpad("0",2)+":"+(t+"").lpad("0",2),u=new Date("2014/01/01 "+r+":00");return u.toLocaleTimeString(navigator.language,{hour:"2-digit",minute:"2-digit",hour12:!1})}function LoadOutboundDurationTime(){tjq("#flight-timesdurationoutbound").slider({range:!0,min:parseFloat(tjq("#hdnoutbounddurstart").val()),max:parseFloat(tjq("#hdnoutbounddurend").val()),step:parseFloat("1"),values:[parseFloat(tjq("#hdnoutbounddurstart").val()),parseFloat(tjq("#hdnoutbounddurend").val())],slide:function(n,t){tjq(".outbounddurstart-time-label").html(t.values[0]);tjq(".outbounddurend-time-label").html(t.values[1]);outbounddurstart=t.values[0];outbounddurend=t.values[1]}});tjq(".outbounddurstart-time-label").html(tjq("#flight-timesdurationoutbound").slider("values",0));tjq(".outbounddurend-time-label").html(tjq("#flight-timesdurationoutbound").slider("values",1));outboundminDuration=parseFloat(tjq("#hdnoutbounddurstart").val());outboundmaxDuration=parseFloat(tjq("#hdnoutbounddurend").val())}function LoadInboundDurationTime(){tjq("#flight-timesdurationinbound").slider({range:!0,min:parseFloat(tjq("#hdninbounddurstart").val()),max:parseFloat(tjq("#hdninbounddurend").val()),step:parseFloat("1"),values:[parseFloat(tjq("#hdninbounddurstart").val()),parseFloat(tjq("#hdninbounddurend").val())],slide:function(n,t){tjq(".inbounddurstart-time-label").html(t.values[0]);tjq(".inbounddurend-time-label").html(t.values[1]);inbounddurstart=t.values[0];inbounddurend=t.values[1]}});tjq(".inbounddurstart-time-label").html(tjq("#flight-timesdurationinbound").slider("values",0));tjq(".inbounddurend-time-label").html(tjq("#flight-timesdurationinbound").slider("values",1));inboundminDuration=parseFloat(tjq("#hdninbounddurstart").val());inboundmaxDuration=parseFloat(tjq("#hdninbounddurend").val())}function fltSliderFilter(){isFromSlider=!0;var n=[];tjq.each(tjq("input[name='chkgrpairlne']:checked"),function(){n.push(tjq(this).val())});airlineName=n.join(",");fnFlightsCombinationFilter(LowHigh,stopCount,airlineName,minValue,maxValue,preferredAirline,selectedCurrency,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend,inboundtransitstart,inboundtransitend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,inbounddurstart,inbounddurend)}function fnFlightsCombinationFilter(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g,nt,tt){var rt,ut,ft,et,it;tjq("#loader").show();rt="";ut="";tjq(".rbdFilter").length>0&&(i!=""&&i!=null&&i!=undefined?(tjq(".rbdFilter").show(),rt=tjq("#txtInboundRBD").val(),ut=tjq("#txtOutboundRBD").val()):tjq(".rbdFilter").hide());var ot=i,st=n,ht=t,ct=tjq("#hdnFilterId").val(),lt=window.location.pathname,at=lt.split("/");f=at[3];(r==""||r==undefined||r==0)&&(r=strminPrice);(u==""||u==undefined||u==0)&&(maxprice=strmaxPrice);ft=r;et=u;(h==""||h==undefined)&&(h=outboundminDuration);(c==""||c==undefined)&&(c=outboundmaxDuration);(o==""||o==undefined)&&(o=outboundminTransit);(s==""||s==undefined)&&(s=outboundmaxTransit);(v==""||v==undefined)&&(v=0);(y==""||y==undefined)&&(y=1439);(l==""||l==undefined)&&(l=0);(a==""||a==undefined)&&(a=1439);(nt==""||nt==undefined)&&(nt=inboundminDuration);(tt==""||tt==undefined)&&(tt=inboundmaxDuration);(p==""||p==undefined)&&(p=inboundminTransit);(w==""||w==undefined)&&(w=inboundmaxTransit);(d==""||d==undefined)&&(d=0);(g==""||g==undefined)&&(g=1439);(b==""||b==undefined)&&(b=0);(k==""||k==undefined)&&(k=1439);it=!1;(tjq("#cmbViewBy").val()!=""&&tjq("#cmbViewBy").val()!=undefined&&tjq("#cmbViewBy").val().toLocaleLowerCase()=="/search/searchresponsegridview"||window.location.pathname.toLocaleLowerCase()=="/search/searchresponsegridview")&&(it=!0);var vt=h+"|"+c,yt=nt+"|"+tt,pt=o+"|"+s,wt=p+"|"+w,bt=l+"|"+a,kt=b+"|"+k,dt=v+"|"+y,gt=d+"|"+g,ni={PreferredAirline:f,AirlineName:ot,PriceLowHigh:st,MinPrice:ft,MaxPrice:et,StopCount:ht,SelectedCurrency:e,InboundOrOutbound:ct,OutboundDuration:vt,InboundDuration:yt,OutboundTransit:pt,InboundTransit:wt,OutboundArrival:bt,InboundArrival:kt,OutboundDeparture:dt,InboundDeparture:gt,IsListOrGridView:it,OutboundRBD:ut,InboundRBD:rt};tjq.ajax({type:"POST",url:"/Search/FlightsCombinationFilter",data:ni,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n.length!==0&&tjq("#dvSearchResponseList li").length!=0&&(it==!0?tjq("#prtlsearchresponsegrid").html("").html(n):tjq("#prtlsearchresponse").html("").html(n));tjq("#dvSearchResponseList li").length==0&&(tjq("#popupfailurefilter").modal("show"),tjq("#hpopupfailurefilter").text("No results found for this filter criteria,Click reset to view all results"));tjq("#btnloadMore").hide();tjq("#loadMore").hide();tjq("#loader").hide();tjq("[data-toggle=popover]").popover();it==!1&&updateNumberOfResults()},error:function(){tjq("#loader").hide()}})}function ResetSliders(n){LoadPriceRange();n.toLocaleLowerCase()=="resetoutbound"&&(LoadDepartureTimeforB2C(),LoadArrivalTimeForB2C(),LoadOutboundDepartureTime(),LoadOutboundArrivalTime(),LoadOutboundDurationTime(),LoadOutboundTransitTime(),outboundtransitstart=parseFloat(tjq("#hdntransitstart").val()),outboundtransitend=parseFloat(tjq("#hdntransitend").val()),outbounddurstart=parseFloat(tjq("#hdnoutbounddurstart").val()),outbounddurend=parseFloat(tjq("#hdnoutbounddurend").val()),outboundarrivalstart=0,outboundarrivalend=1439,outbounddeparturestart=0,outbounddepartureend=1439);n.toLocaleLowerCase()=="resetinbound"&&(LoadDepartureTimeforB2C(),LoadArrivalTimeForB2C(),LoadInboundArrivalTime(),LoadInboundDepartureTime(),LoadInboundDurationTime(),LoadInboundTransitTime(),inboundtransitstart=parseFloat(tjq("#hdninboundtransitstart").val()),inboundtransitend=parseFloat(tjq("#hdninboundtransitend").val()),inbounddurstart=parseFloat(tjq("#hdninbounddurstart").val()),inbounddurend=parseFloat(tjq("#hdninbounddurend").val()),inboundarrivalstart=0,inboundarrivalend=1439,inbounddeparturestart=0,inbounddepartureend=1439);strminPrice=parseInt(tjq("#hdnMinPrice").val());strmaxPrice=parseInt(tjq("#hdnMaxPrice").val());fnFlightsCombinationFilter(LowHigh,stopCount,airlineName,strminPrice,strmaxPrice,preferredAirline,selectedCurrency,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend,inboundtransitstart,inboundtransitend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,inbounddurstart,inbounddurend)}function LoadHotelPriceRange(){tjq("#hotelpricerange").slider({range:!0,min:parseInt(tjq("#hdnMinPrice").val()),max:parseInt(tjq("#hdnMaxPrice").val()),values:[parseInt(tjq("#hdnMinPrice").val()),parseInt(tjq("#hdnMaxPrice").val())],slide:function(n,t){tjq(".hotelminprice").html(t.values[0]+" "+tjq("#hdnCurrency").val());tjq(".hotelmaxprice").html(t.values[1]+" "+tjq("#hdnCurrency").val());strminprice=t.values[0];strmaxPrice=t.values[1]}});tjq(".hotelminprice").html(tjq("#hotelpricerange").slider("values",0)+" "+tjq("#hdnCurrency").val());tjq(".hotelmaxprice").html(tjq("#hotelpricerange").slider("values",1)+" "+tjq("#hdnCurrency").val());tjq("#lblminPrice").text(parseInt(tjq("#hdnMinPrice").val())+" "+tjq("#hdnCurrency").val());tjq("#lblMaxPrice").text(parseInt(tjq("#hdnMaxPrice").val())+" "+tjq("#hdnCurrency").val());tjq("#txtMinPrice").text(parseInt(tjq("#hdnMinPrice").val()));tjq("#txtMaxPrice").text(parseInt(tjq("#hdnMaxPrice").val()));minValue=parseInt(tjq("#hdnMinPrice").val());maxValue=parseInt(tjq("#hdnMaxPrice").val())}function CallSortHotelPrice(n){var i=n.id,t=tjq("#"+i).val();t!=""&&t!=undefined&&SortHotelPrice(t)}function SortHotelPrice(n){strLHOrHL=n.toLocaleLowerCase()=="hl"?!1:!0;HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)}function HotelFilter(n,t,i,r,u){tjq("#loader").show();var f=n,e=t,o=u;(i==""||i==undefined||i==0)&&(i=minValue);(r==""||r==undefined||r==0)&&(r=maxValue);var s=i,h=r,c={HotelName:f,HotelStar:e,PriceLowHigh:o,MinPrice:s,MaxPrice:h};tjq.ajax({type:"POST",url:"/Search/HotelsCombinationFilter",data:c,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n.length!==0&&(tjq("#hotelLoadmore").hide(),tjq("#prtlhotelresponse").html("").html(n),tjq("span.stars").stars());tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})}function Reset(){strLHOrHL=!0;hotelname="";strminprice=parseInt(tjq("#hdnMinPrice").val());strmaxPrice=parseInt(tjq("#hdnMaxPrice").val());starrating=0;window.location.reload()}function HanldeSessionTimeout(){window.location.href="/Common/SessionEnd"}function GetFareTypes(){tjq.ajax({url:"/Dashboard/GetFareTypes",method:"GET",datatype:"json",success:function(n){var t;n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();var i=0,r=0,u=0;n!=""&&(t=JSON.parse(n),u=t.pubfares,i=t.webfare,r=t.privatefares);var f=google.visualization.arrayToDataTable([["FareTypes","Count"],["WEB("+i+")",i],["PRI("+r+")",r],["PUB("+u+")",u],]),e=new google.visualization.PieChart(document.getElementById("faretypes"));e.draw(f,{title:"",is3D:!0,sliceVisibilityThreshold:0})},error:function(){}})}function GetCurrentYearFareTypes(){tjq.ajax({url:"/Dashboard/GetCurrentFareTypes",method:"GET",datatype:"json",success:function(n){var t;n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();var i=0,r=0,u=0;n!=""&&(t=JSON.parse(n),u=t.pubfares,i=t.webfare,r=t.privatefares);var f=google.visualization.arrayToDataTable([["FareTypes","Count"],["WEB("+i+")",i],["PRI("+r+")",r],["PUB("+u+")",u],]),e=new google.visualization.PieChart(document.getElementById("faretypes"));e.draw(f,{title:"",is3D:!0,sliceVisibilityThreshold:0})},error:function(){}})}function GetBookingCounts(){tjq.ajax({url:"/Dashboard/GetBookingCounts",method:"GET",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#ticketedcnt").text(t.ticketed);tjq("#bookedcnt").text(t.booked);tjq("#expiringcnt").text(t.expireinnext3hours);tjq("#inprocesscnt").text(t.inprocess)}},error:function(){alert(" fare type Error")}})}function GetCurrentMonthBookingCounts(n){tjq.ajax({url:"/Dashboard/GetBookingCountsForCurrentMonth",method:"GET",datatype:"json",data:{itemtype:n},success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#ticketedcnt").text(t.ticketed);tjq("#bookedcnt").text(t.booked);tjq("#expiringcnt").text(t.expired);tjq("#inprocesscnt").text(t.inprocess)}},error:function(){alert(" fare type Error")}})}function GetCurentYearBookingDetails(n,t){var i;i=n&&t!="undefined"?tjq(t).parent().attr("id"):tjq("ul.tabs li.active").attr("id");i.toUpperCase()=="FLIGHT"?(tjq("#hotelsearches").hide(),tjq("#bussearches").hide(),tjq("#dvfaretypes").show(),tjq("#flightsearches").show()):i.toUpperCase()=="HOTEL"?(tjq("#hotelsearches").show(),tjq("#dvfaretypes").hide(),tjq("#bussearches").hide(),tjq("#flightsearches").hide()):i.toUpperCase()=="BUS"?(tjq("#bussearches").show(),tjq("#hotelsearches").hide(),tjq("#flightsearches").hide(),tjq("#dvfaretypes").hide()):i.toUpperCase()=="ALL"&&(tjq("#bussearches").show(),tjq("#hotelsearches").show(),tjq("#flightsearches").show(),tjq("#dvfaretypes").show());tjq.ajax({url:"/Dashboard/GetCurentYearBookingDetails",method:"GET",datatype:"json",data:{productType:i,timeperiod:"year"},success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#TicketCount").text(t.Ticketed);tjq("#BookingCount").text(t.booked);tjq("#SignUp").text(t.NewClients);tjq("#Profit").text(t.Profit);tjq("#ActiveCustomer").text(t.ActiveClients)}GetCurrentMonthBookingCounts(i)},error:function(){alert(" fare type Error")}})}function GetBookingDetails(n,t){var i;i=n&&t!="undefined"?tjq(t).parent().attr("id"):tjq("ul.tabs li.active").attr("id");tjq.ajax({url:"/Dashboard/GetCurentYearBookingDetails",method:"GET",datatype:"json",data:{productType:i,timeperiod:"all"},success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#TicketCount").text(t.Ticketed);tjq("#BookingCount").text(t.booked);tjq("#SignUp").text(t.NewClients);tjq("#Profit").text(t.Profit);tjq("#ActiveCustomer").text(t.ActiveClients)}},error:function(){alert(" fare type Error")}})}function GetSeaerches(){tjq.ajax({url:"/Dashboard/GetSearches",method:"POST",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#flightsearchesvalue").text(t.flightsearches);tjq("#hotelsearchesvalue").text(t.hotelsearches);tjq("#bussearchesvalue").text(t.bussearches)}}})}function GetLastMonthTopCustomers(){tjq.ajax({url:"/Dashboard/GetLastMonthTopCustomers",method:"POST",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#topcustomers tbody").html("");tjq.each(t,function(n,t){var i="<tr><td>"+t.ClientName+"<\/td><td>"+t.Transaction+"<\/td><td>000<\/td><\/tr>";tjq("#topcustomers tbody").append(i)})}},error:function(n){alert(n)}})}function GetTopCustomers(){tjq.ajax({url:"/Dashboard/GetTopCustomers",method:"POST",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#topcustomers tbody").html("");tjq.each(t,function(n,t){var i="<tr><td>"+(parseInt(n)+1)+"<\/td><td>"+t.ClientName+"<\/td><td>"+t.RegisterdAt+"<\/td><\/tr>";tjq("#topcustomers tbody").append(i)})}},error:function(n){alert(n)}})}function NewSignUpClients(){tjq.ajax({url:"/Dashboard/NewSignUpClients",method:"POST",datatype:"json",success:function(n){if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),n!=""){var t=JSON.parse(n);tjq("#tablenewsignup tbody").html("");tjq.each(t,function(n,t){var i="<tr><td>"+t.UserId+"<\/td><td>"+t.ClientName+"<\/td><td>"+t.RegDate+"<\/td><\/tr>";tjq("#tablenewsignup tbody").append(i)})}},error:function(n){alert(n)}})}var MultiCityId=1,extrabaggageindicator=[],inboundPrice,outboundPrice,roomchildages,hotelname,starrating,strminprice,strmaxPrice,strLHOrHL,minValue,maxValue,delay,mod;tjq(document).ready(function(){function u(n){history.pushState(null,null,n+window.location.search);window.addEventListener("popstate",function(){history.pushState(null,null,n+window.location.search)})}function c(n){tjq(n.target).prev(".panel-heading").find(".more-less").toggleClass("fa-minus  fa-plus")}function c(n){tjq(n.target).prev(".panel-heading1").find(".more-less1").toggleClass("fa-plus  fa-minus")}function v(n){this.dd=n;this.initEvents()}function f(n,t){var f=n.files[0].size/1024,i=n.value.substring(n.value.lastIndexOf(".")+1,n.value.length),r,u;i.toUpperCase()!="PNG"&&i.toUpperCase()!="JPG"&&i.toUpperCase()!="JPEG"&&i.toUpperCase()!="GIF"&&i.toUpperCase()!="PDF"?(tjq(n).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Uploaded file is not a valid file type. Only JPG, JPEG , PNG , PDF and GIF files are allowed !")):f>500&&(tjq(n).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("File size should be less than 500kb"));r=n.value.lastIndexOf("\\");u=n.value.substring(r+1,n.value.length);document.getElementById(t).value=tjq(n).val()!=""?u:"Upload JPG , JPEG , PNG , PDF and GIF file format"}var p,a,w,e,n,y,r,h,l;tjq(".ddlFilter").select2();tjq(".menu-toggle").on("click",function(n){tjq(this).toggleClass("on");tjq(".menu-section").toggleClass("on");tjq("nav ul").toggleClass("hidden");n.stopPropagation()});tjq(".menu-section").on("click",function(n){n.stopPropagation()});tjq(document).on("click",function(){tjq(".menu-toggle").removeClass("on");tjq(".menu-section").removeClass("on");tjq(".right-menu").addClass("hidden")});tjq(window).scroll(function(){var n=tjq(window).scrollTop();n>0?tjq(".tr-menu").addClass("SleekHeader"):tjq(".tr-menu").removeClass("SleekHeader")});tjq(window).scroll(function(){tjq(".FareRight").addClass("tr-scroll");tjq(window).scrollTop()+tjq(window).height()==tjq(document).height()&&tjq(".FareRight").removeClass("tr-scroll")});tjq(document).on("click",".closePop",function(){tjq(this).parent().parent(".popover").hide()});tjq("#myCarouselsliderBooke").carousel({interval:4e3});tjq(".One_Way").click(function(){tjq(".retrn_date").hide();tjq("#ReturnDate").val("")});tjq(".Round_Trip").click(function(){tjq(".retrn_date").show()});window.location.pathname.toLocaleLowerCase()=="/"&&u("/");window.location.pathname.toLocaleLowerCase()=="/flight/index"&&(tjq("#backbtnshow").hide(),u("/Flight/Index"));window.location.pathname.toLocaleLowerCase()=="/search/index"&&(tjq("#backbtnshow").hide(),u("/Search/Index"));window.location.pathname.toLocaleLowerCase()=="/purchaseorder/index"&&(window.location.search||(tjq("#backbtnshow").hide(),u("/Purchaseorder/Index")));tjq(".Toggleicon").click(function(){tjq(this).find(".fa").toggleClass("fa-chevron-down fa-chevron-up ")});tjq(window).scroll(function(){tjq(window).scrollTop()+tjq(window).height()>tjq(document).height()-50&&tjq("#sticky").hide();tjq(window).scrollTop()+tjq(window).height()<tjq(document).height()-50&&(tjq("#sticky div.OutboundDisplay .row").length>0?tjq("#sticky").show():tjq("#sticky").hide())});tjq("#openmodal").on("change",function(n){n.target.checked&&tjq("#cancelation_policy").modal()});tjq("#hdnmodifyfltmulticityid").length>0&&tjq("#hdnmodifyfltmulticityid").val()!=""&&(MultiCityId=parseInt(tjq("#hdnmodifyfltmulticityid").val()));tjq(".menu-opener").click(function(){tjq(".menu-opener, .menu-opener-inner, .menu").toggleClass("active")});tjq(".hideafter5sec").show().delay(5e3).fadeOut();tjq("#client-menu li").click(function(){tjq("#client-menu li").removeClass("active");tjq(this).addClass("active")});tjq(".short-tour").hide();tjq("#long").click(function(){tjq(".short-tour").hide();tjq(".long-tour").show()});tjq("#short").click(function(){tjq(".long-tour").hide();tjq(".short-tour").show()});tjq("#tourb2c li").click(function(){tjq("#tourb2c li").removeClass("selectedb2c");tjq(this).addClass("selectedb2c")});tjq('[data-toggle="popover"]').popover();tjq(".panel-group").on("hidden.bs.collapse",c);tjq(".panel-group").on("shown.bs.collapse",c);tjq(".panel-group1").on("hidden.bs.collapse",c);tjq(".panel-group1").on("shown.bs.collapse",c);tjq("#qs-btn").click(function(){tjq("#qs-div1").animate({width:"toggle"},250)});tjq(".editable").each(function(){var n=tjq(this),t=tjq(this).next();n.click(function(){tjq(this).hide();tjq(this).next().show()});t.focusout(function(){tjq(this).hide();tjq(this).prev().html(tjq(this).val());tjq(this).prev().show()})});tjq("#hdnSessionState").val()=="True"&&tjq.ajax({method:"GET",url:"/PurchaseOrder/CheckPNRStatus",datatype:"json",success:function(n){tjq("#tktTimeLimit").html(n.TktTimeLimit);tjq(".tickets").html(n.AirlinePNR)},error:function(){}});tjq(".return_date").click(function(){tjq("#return_date_div").show()});tjq(".return_date_no").click(function(){tjq("#return_date_div").hide()});tjq(".loginPopup").click(function(){tjq("#loginB2C").fadeIn()});tjq("#Airsearch").trigger("reset");tjq("input[name=JourneyType][value=Return]").prop("checked",!0);tjq(".oneway").click(function(){tjq("#parentbox").hide();tjq("#AddMultiCityDiv").hide();tjq(this).is(":checked")&&(tjq(this).val("OneWay"),tjq(".cloned").fadeOut(0),(tjq("#IsB2C").val()=="True"||tjq("#IsB2C").val()=="true")&&(tjq(".non-multi").fadeIn(0),(tjq("#pax-nonmulti").html()==null||tjq("#pax-nonmulti").html()=="")&&(tjq("#pax-nonmulti").html(tjq("#pax-multi").html()),tjq("#pax-multi").html(""))))});tjq(".multi").click(function(){tjq("#parentbox").show();tjq("#AddMultiCityDiv").show();tjq(this).is(":checked")&&(tjq(this).val("Multi"),tjq(".cloned").fadeIn(0),tjq(".toggler_multi").fadeIn(0),tjq(".toggler_return").fadeOut(0),(tjq("#IsB2C").val()=="True"||tjq("#IsB2C").val()=="true")&&(tjq(".non-multi").fadeIn(0),(tjq("#pax-nonmulti").html()==null||tjq("#pax-nonmulti").html()=="")&&(tjq("#pax-nonmulti").html(tjq("#pax-multi").html()),tjq("#pax-multi").html(""))))});tjq(".return").click(function(){tjq("#parentbox").hide();tjq("#AddMultiCityDiv").hide();tjq(this).is(":checked")&&(tjq(this).val("Return"),tjq(".cloned").fadeIn(0),tjq(".toggler_return").fadeIn(0),tjq(".toggler_multi").fadeOut(0),(tjq("#IsB2C").val()=="True"||tjq("#IsB2C").val()=="true")&&(tjq(".non-multi").fadeOut(0),tjq("#pax-multi").html(tjq("#pax-nonmulti").html()),tjq("#pax-nonmulti").html("")))});tjq("#CityPares_0__Origin").focusout(function(){tjq("input[name=JourneyType]:checked").val().toUpperCase()!="MULTI"&&tjq("#CityPares_1__Destination").val(tjq("#CityPares_0__Origin").val())});tjq("#CityPares_0__Destination").focusout(function(){tjq("input[name=JourneyType]:checked").val().toUpperCase()!="MULTI"&&tjq("#CityPares_1__Origin").val(tjq("#CityPares_0__Destination").val())});tjq("#AddMoreMulticity").click(function(){var i;if(MultiCityId<=9){if(MultiCityId=MultiCityId+1,MultiCityId<=9){var r=tjq("#orgintxt").text(),u=tjq("#destinationtxt").text(),f=tjq("#departDatetxt").text(),t=tjq("#entercitytxt").text(),e=tjq("#selectDatetxt").text(),n='<div class="row" id="'+MultiCityId+'"  ><div class="form-group col-md-4"><label for="text">'+r+'<\/label><div class=""><input class="input-text full-width AirportsList validate[required] searchLeavingFrom" autocomplete="off" type="text"  placeholder="'+t+'" id="CityPares_'+MultiCityId+'__Origin" name="CityPares['+MultiCityId+'].Origin"><\/div><\/div><div class="form-group col-md-4" style="float: left !important;"><label for="text">'+u+'<\/label><div style="margin-top: 5px;"><input class="input-text full-width AirportsList validate[required] searchGoingTo" type="text" placeholder="'+t+'" id="CityPares_'+MultiCityId+'__Destination" name="CityPares['+MultiCityId+'].Destination"><\/div><\/div>';n=n+'<div class="form-group col-md-4" style="float: left !important;"><label for="text">'+f+'<\/label><div class="dyndatepicker datepicker-wrap dark-blue" style="width: 100%; float: left;"><input class="input-text full-width datepicker_date_to validate[required,custom[dateFormat]] searchdate" type="text" autocomplete="off" placeholder="'+e+'" id="CityPares_'+MultiCityId+'__DepartureDateTime" name="CityPares['+MultiCityId+'].DepartureDateTime"><\/div><\/div><div class="Remoove_icon"><i onclick="RemoveandResetmulticity()" id="rm'+MultiCityId+'" style="margin-top: 23px;cursor: pointer;color: red;position: absolute;right: -7px;padding: 12px;display: block;" class="fa fa-times btn-remove"><\/i><\/div><\/div>';tjq(".children").append(n);MultiCityId==9&&tjq("#AddMoreMulticity").hide();tjq(".searchGoingTo, .searchLeavingFrom").attr("placeholder","Enter airport code/city name")}MultiCityId>=3&&MultiCityId<=9&&(i="rm"+(MultiCityId-1)+"",tjq("#"+i+"").hide())}AirportsList()});tjq("body").on("focus",".datepicker-wrap",function(){tjq(".datepicker-wrap input").each(function(){var t=new Date,i=t.getDate(),n=tjq(this).data("min-date");typeof n=="undefined"&&(n=0);tjq(this).datepicker({showOn:"both",buttonImage:"",buttonText:"",buttonImageOnly:!0,changeYear:!1,minDate:n,numberOfMonths:2,dateFormat:"dd/mm/yy",dayNamesMin:["S","M","T","W","T","F","S"],beforeShow:function(n){var t=tjq(n).parent().attr("class").replace("datepicker-wrap","");tjq("#ui-datepicker-div").attr("class","");tjq("#ui-datepicker-div").addClass("ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all");tjq("#ui-datepicker-div").addClass(t);tjq(this).attr("name")=="CityPares[2].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[1].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[2].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_1__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[3].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[2].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[3].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_2__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[4].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[3].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[4].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_3__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[5].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[4].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[5].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_4__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[6].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[5].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[6].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_5__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[7].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[6].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[7].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_6__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[8].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[7].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[8].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_7__DepartureDateTime").val());tjq(this).attr("name")=="CityPares[9].DepartureDateTime"&&tjq(this).closest("form").find('input[name="CityPares[8].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[9].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_8__DepartureDateTime").val());tjq(this).attr("name")=="EditTravelDateTo"&&tjq(this).closest("form").find('input[name="CityPares[8].DepartureDateTime"]').length>0&&tjq(this).closest("form").find('input[name="CityPares[9].DepartureDateTime"]').datepicker("option","minDate",tjq("#CityPares_8__DepartureDateTime").val())},onClose:function(n){tjq(this).attr("name")=="EditTravelDateFrom"&&tjq(this).closest("form").find('input[name="EditTravelDateTo"]').length>0&&tjq(this).closest("form").find('input[name="EditTravelDateTo"]').datepicker("option","minDate",n)}})})});tjq("#AdultCount").on("change",function(){var t=tjq("#InfantCount"),r=t.val(),i,n;for(tjq("#InfantCount").empty(),i=tjq(this).val(),n=0;n<=i;n++)n==r?tjq("<option />",{selected:"selected",value:n}).html(n).appendTo(t):tjq("<option />",{value:n}).html(n).appendTo(t);r>i&&(t.find("option[value=0]").prop("selected","selected"),t.next().html(0))});tjq("input.AirportsList[type=text]").on("focus.autocomplete",null,function(){tjq(this).each(function(){var n=tjq(this);tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Search/AirportList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(t,i){i.item||n.val("")}})})});CityListAutocomplete();tjq("input.HotelRegion[type=text]").focus(function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Search/HotelRegionList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".HotelRegion").val("")}})})});tjq("input.ClientList[type=text]").focus(function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/Search/ClientList?term="+n.term,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();t(n)}})},change:function(n,t){t.item||tjq(".ClientList").val("")}})})});CountriesandAirLinesAutoComplete();RegionListAutoComplete();tjq("#Airsearch").validationEngine({scroll:!1,maxErrorsPerField:1,promptPosition:"bottomLeft",onValidationComplete:function(n,t){var u,f,r,e,o,s,i;if(t==!0){if(u=new Date,f=tjq("#CityPares_0__DepartureDateTime").val().split("/"),u.setFullYear(f[2],f[1],f[0]),r=new Date,e=!0,tjq(".choose-travel:checked").val()!="Return")for(o=1;o<10;o++){if(s="CityPares_"+o.toString()+"__DepartureDateTime",tjq("#"+s).length>0){if(i=tjq("#"+s).val().split("/"),r.setFullYear(i[2],i[1],i[0]),r<u){e=!1;break}}else break;u=new Date(r)}else i=tjq("#CityPares_1__ReturnDateTime").val().split("/"),r.setFullYear(i[2],i[1],i[0]),r<u&&(e=!1);return e?(JourneyLoader(),!0):(tjq(".searchdate").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please select valid dates!"),!1)}}});tjq("#Hotelsearch").validationEngine({scroll:!1,maxErrorsPerField:1,promptPosition:"bottomLeft",onValidationComplete:function(n,t){if(t==!0)return HotelLoader(),!0}});tjq("#CreateSlabForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#ManageFlightMarkupForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#ManageHotelMarkupForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#ViewFareMatrixForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#paymentForm").validationEngine({autoHidePrompt:!0});tjq("#frmb2clogin").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmb2cRegister").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0,focusInvalid:!1});tjq("#LoginForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmregister").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq(".client-registration-form").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq(".member-registration-form").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq(".branch-registration-form").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#Register").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#myProfile").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmImportPnr").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#BusMarkupForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#HotelMarkupForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#UpdateHotelMarkup").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmroe-create").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmroe-update").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmViewRoe").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#ViewBusMarkupForm").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmActivityOnDate").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmCreateHHSupplier").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmCreateAirlineAccounts").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmBusSearch").validationEngine({scroll:!1,maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmCreateRoute").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmTravellerProfile").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#frmCreateSupplier").validationEngine({maxErrorsPerField:1,autoHidePrompt:!0});tjq("#btnForgotPwd").click(function(){tjq("#ForgotPassword").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,onValidationComplete:function(n,t){t&&tjq.ajax({url:"/Login/ForgotPassword",method:"POST",datatype:"json",data:{EmailId:tjq("#emailid").val()},success:function(n){n==!0?(tjq("#dvforgotpwd").hide(),tjq("#dvforgotpwdmsg").addClass("alert alert-success"),tjq("#dvforgotpwdmsg").text("Password has been sent to the given Email Id.."),tjq("#dvforgotpwdmsg").toggle("slow")):(tjq("#dvforgotpwdmsg").addClass("alert alert-danger"),tjq("#dvforgotpwdmsg").text("Email Not Exist..."),tjq("#dvforgotpwdmsg").show())},error:function(){}})}})});tjq("#b2cregister").click(function(){tjq("#frmb2cRegister").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,focusInvalid:!1,onValidationComplete:function(n,t){if(t==!0)return tjq("#loader").show(),!0}})});tjq("#b2clogin").click(function(){tjq("#frmb2clogin").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,focusInvalid:!1,onValidationComplete:function(n,t){if(t==!0)return tjq("#loader").show(),!0}})});tjq(".b2bBookingDecision").click(function(){var n=tjq(this).val();tjq("#action").val(n);tjq(".booking-form").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,onValidationComplete:function(n,t){t==!0&&(tjq("#loader").show(),u("/PassengerDetails/Index"),tjq(".booking-form").submit())}})});tjq(".traveler-registration-form").validationEngine({autoHidePrompt:!0});tjq("#genLinkForm").validationEngine({autoHidePrompt:!0});tjq(".farerulesafterreval").click(function(){var n=tjq(this);n.prev().show();tjq(".farerulesafterreval").hide();tjq.ajax({method:"POST",url:"/Common/GetFareRulesAfterRevalidation",data:{flightfarerulesid:tjq(this).val()},success:function(t){if(t.toLocaleLowerCase()=="sotologin"||t.toLocaleLowerCase()=="otherlogin"){tjq("#loader").hide();var i;tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Session Time Out. Kindly Search Again!");i=t.toLocaleLowerCase()=="sotologin"?"/Flight/Index":"/Search/Index";tjq("#popupfailure").on("hidden.bs.modal",function(){window.location.href=i})}else t=="SESSIONTIMEOUT"?HanldeSessionTimeout():(n.prev().hide(),tjq("#divFareIndicatorModal").remove(),tjq("body").append(t),tjq("#btnFareindicatorModal").click())},error:function(){tjq("#divFareIndicatorModal").remove();tjq("body").append(data);n.prev().hide();tjq("#btnFareindicatorModal").click()},complete:function(){n.prev().hide();tjq(".farerulesafterreval").show()}})});p=function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}();tjq("img.imgCvvInfo").mouseover(function(){tjq("img.imgCvvInfo").removeClass("circleBorder");tjq(".imgCvv").slideToggle()});tjq("img.imgCvvInfo").mouseout(function(){tjq("img.imgCvvInfo").addClass("circleBorder");tjq(".imgCvv").slideToggle("slow")});tjq("#markuptype").change(function(){tjq(this).val()==1&&tjq("#divAddHotelmarkup").hide();tjq(this).val()==2&&tjq("#divAddHotelmarkup").show()});tjq("#ddlExistingMarkupField").change(function(){tjq("#ddlExistingBusMarkupField").val()=="0"?tjq("#create_Existing").show():tjq("#create_Existing").hide()});window.location.pathname.toLocaleLowerCase()=="/administration/createslabmarkup"&&MarkupShowandHide();tjq("#ddlExistingdivHotelmarkup").change(function(){tjq("#ddlExistingMarkupField").val()=="0"?tjq("#divHotelmarkup").show():tjq("#divHotelmarkup").hide()});tjq(".Count").each(function(){var n=tjq(this);tjq({Counter:0}).animate({Counter:n.text()},{duration:1e4,easing:"swing",step:function(){n.text(Math.ceil(this.Counter))}})});v.prototype={initEvents:function(){var n=this;n.dd.on("click",function(n){tjq(this).toggleClass("active");n.stopPropagation()})}};tjq(function(){var n=new v(tjq("#dd"));tjq(document).click(function(){tjq(".wrapper-dropdown-2").removeClass("active")})});tjq(".fltsuppliers").click(function(){var n=[];tjq.each(tjq("input[name='chkfltsuppliers']:checked"),function(){n.push(tjq(this).val())});n.length==0?tjq("#FlightSuppliers").val(""):tjq("#FlightSuppliers").val(n.toString())});tjq(".htlsuppliers").click(function(){var n=[];tjq.each(tjq("input[name='chkhtlsuppliers']:checked"),function(){n.push(tjq(this).val())});n.length==0?tjq("#HotelSuppliers").val(""):tjq("#HotelSuppliers").val(n.toString())});tjq(".chkftltcomissionandmarkup").on("click",function(){var n=[];tjq.each(tjq("input[name='chkgrpcomissionandmarkup']:checked"),function(){n.push(tjq(this).val())});n.length==1&&(n[0]=="commission"&&(tjq("#divAddflightcommision").show(),tjq("#divAddFlightmarkup").hide(),tjq("#dvbtncreateflight").show(),tjq(".clsbtnupdate").show()),n[0]=="markup"&&(tjq("#divAddFlightmarkup").show(),tjq("#divAddflightcommision").hide(),tjq("#dvbtncreateflight").show(),tjq("#markupCountryClass").show(),tjq(".clsbtnupdate").show()));n.length==2&&(tjq("#divAddflightcommision").show(),tjq("#divAddFlightmarkup").show(),tjq("#dvbtncreateflight").show(),tjq("#markupCountryClass").hide(),tjq(".clsbtnupdate").show());n.length==0&&(tjq("#divAddflightcommision").hide(),tjq("#divAddFlightmarkup").hide(),tjq("#dvbtncreateflight").hide(),tjq(".clsbtnupdate").hide())});tjq("#btnCancelCnt").on("click",function(){tjq("#frmCancelFlt").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t==!1)return!1;tjq("#Cancel").show()}})});tjq("#dcncancel").on("click",function(){tjq("#Cancel").hide();tjq("#frmCancelFlt")[0].reset()});tjq("#cfrmcancel").on("click",function(){tjq("#frmCancelFlt").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t==!1)return!1;var i=tjq("#frmCancelFlt").serialize();tjq("#loader").show();tjq.ajax({url:"/Common/CancelFlight",method:"POST",datatype:"json",data:i,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n=="true"?(tjq("#Cancel").hide(),tjq("#frmCancelFlt")[0].reset(),tjq("#loader").hide(),tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Itinerary cancellation succeed")):(tjq("#Cancel").hide(),tjq("#frmCancelFlt")[0].reset(),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(n.toString()))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}})});tjq("#DcnCancel").on("click",function(){tjq("#dvcancelBooking").hide()});tjq("#btngetpaymenttrans").click(function(){tjq("#frmpaymenttransaction").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t!=!1){var i=tjq(".ddlpaymenttransaction").val(),r=i.substring(0,i.length-3);tjq("#paymenttransloading").show();tjq("#btngetpaymenttrans").hide();tjq.ajax({url:"/Accounts/PaymentTransaction",method:"POST",datatype:"json",data:{Clientid:r},success:function(n){var t;if(n=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),tjq("#dvpaymenttransaction").html(""),tjq("#dvpaymenttransaction").html(n),tjq("#paymenttransloading").hide(),tjq("#btngetpaymenttrans").show(),tjq("#no_records").val()>0?tjq(".refresh_hide").hide():tjq(".refresh_hide").show(),tjq("#dvNoRecordAlert").length==0){tjq("#dvPaymentEntryPagination").show();var i=parseInt(tjq("#txttotalPages").val()),e=parseInt(tjq("#txtItemsPerPageIteration").val()),u=parseInt(tjq("#txtItemsPerPage").val()),f=0,r=[];if(i!=undefined&&i==0)tjq(".recperpage").empty(),tjq(".recperpage").append(tjq("<option />",{value:u,text:u}));else if(i!=""&&i!=undefined&&i!=0){if(i<e)for(t=1;t<=i;t++)f+=u,r.push(f);else for(t=1;t<=e;t++)f+=u,r.push(f);for(tjq(".recperpage").empty(),tjq.each(r,function(n,t){tjq(".recperpage").append(tjq("<option />",{value:t,text:t}))}),r=[],t=1;t<=i;t++)r.push(t);tjq(".drpPage").empty();tjq.each(r,function(n,t){tjq(".drpPage").append(tjq("<option />",{value:t,text:t}))})}}else tjq("#dvPaymentEntryPagination").hide()},error:function(){tjq("#paymenttransloading").hide();tjq("#btngetpaymenttrans").show();alert("Error")}})}}})});tjq("#upload_Chequeimg").change(function(){f(this,"upload_Chequefile")});tjq("#upload_bankdepositimg").change(function(){f(this,"upload_bankdepositfile")});tjq("#upload_banktransferimg").change(function(){f(this,"upload_banktransferfile")});tjq("#upload_cashimg").change(function(){f(this,"upload_cashfile")});tjq("#upload_otherimg").change(function(){f(this,"upload_otherfile")});tjq("#btnImportPnr").on("click",function(){tjq("#frmImportPnr").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t!=!1){var i=tjq("#frmImportPnr").serialize();tjq("#loader").show();tjq.ajax({url:"/ImportPnr/GetandSavePnr",method:"POST",datatype:"json",data:i,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();n.indexOf("BookingId")>=0?window.location.href="/PurchaseOrder/Index?"+n+"":(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text(n.toString()))},error:function(){tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})}}})});tjq("#drpdownSource").on("change",function(){var n=tjq("#drpdownSource").val();n!=""&&n!=undefined&&n.toLocaleLowerCase()=="my"?tjq("#txtPnrPlaceholder").attr("placeholder","Enter MyFare ReferenceNumber"):tjq("#txtPnrPlaceholder").attr("placeholder","Enter PNR")});tjq(".dvWaitlist").on("click",function(){tjq("#GDSComplexItinerary").attr("placeholder","Copy and paste GDS waitlist itinerary")});tjq(".dvComplex").on("click",function(){tjq("#GDSComplexItinerary").attr("placeholder","Copy and paste GDS complex itinerary")});a="";tjq(".divitineray").on("click",function(){a=tjq(this).attr("class").split(/\s+/)[1]});tjq("#btncomplexItinery").on("click",function(){tjq("#frmcomplexitineray").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t!=!1){tjq("#loader").show();var i={GDSComplexItinerary:tjq("#GDSComplexItinerary").val(),Subject:tjq("#Subject").val(),Message:tjq("#Message").val(),ItinerayType:a};tjq.ajax({url:"/Flight/ComplexItinerarysave",method:"POST",datatype:"json",data:i,success:function(n){tjq("#dvComplexItinerary").modal("hide");tjq("#loader").hide();tjq("#frmcomplexitineray").trigger("reset");n==!0?(tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("itinerary Saved and mail sent Sucessfully")):(tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Some Problem Occured,Please try again later"))},error:function(){tjq("#loader").hide()}})}}})});Bindrolerightactiveclick();tjq("#txtName").on("change",function(){var n=tjq(this).val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/CommissionAndMarkupHotel/CheckUnique",context:document.body,data:{Name:n},success:function(n){n==!1&&(tjq("#txtName").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Name alredy exists!"));tjq("#loader").hide()},error:function(n){tjq("#loader").hide();console.log(n.responseText);alert("Error has occurred..")}})});tjq("#txtBusSlabName").on("change",function(){var n=tjq(this).val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Bus/CheckUnique",context:document.body,data:{Name:n},success:function(n){n==!1&&(tjq("#txtBusSlabName").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("SlabName alredy exists!"));tjq("#loader").hide()},error:function(n){tjq("#loader").hide();console.log(n.responseText);alert("Error has occurred..")}})});tjq("#txtCNMName").on("change",function(){var n=tjq(this).val(),t=tjq("#txtisMarkup").val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Administration/CheckUnique",context:document.body,data:{Name:n,isMarkup:t},success:function(n){n==!1&&(tjq("#txtCNMName").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Name alredy exists!"));tjq("#loader").hide()},error:function(n){tjq("#loader").hide();console.log(n.responseText)}})});tjq("#txtCorpName").on("change",function(){var n=tjq(this).val();tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/CorporateRules/CheckUniqueName",context:document.body,data:{name:n},success:function(n){n==!1&&(tjq("#txtCorpName").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Name alredy exists!"));tjq("#loader").hide()},error:function(n){tjq("#loader").hide();console.log(n.responseText)}})});validationforCommissionandMarkup();tjq("#txtMarkUp").on("change",function(){var n=tjq(this).val(),t=tjq("#txtRoe").val(),i=parseFloat(n)+parseFloat(t);tjq("#txtActualRoe").val(parseFloat(i))});tjq("#txtRoe").on("change",function(){var n=tjq(this).val(),t=tjq("#txtMarkUp").val(),i=parseFloat(n)+parseFloat(t);tjq("#txtActualRoe").val(parseFloat(i))});window.location.pathname.toLocaleLowerCase()=="/passengerdetails/index"&&(LoadCountriesAutocomplete(),tjq("#radioAB").length>0&&tjq("#radioAB").prop("checked")&&tjq(".dvBookandPay").hide());window.location.pathname.toLocaleLowerCase()=="/bus/booking"&&LoadCountriesAutocomplete();tjq("#btnBusBook").click(function(){tjq("#BusPassengerDetails").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,focusInvalid:!1,onValidationComplete:function(n,t){t==!0&&(tjq("#loader").show(),tjq("#BusPassengerDetails")[0].submit())}})});tjq("#RoomsCount").on("change",function(){tjq("#ChildCount").val("0").change();tjq("#AdultCount").val("1").change();var n=tjq(this).val(),t=tjq("#AdultCount").val(),r=tjq("#ChildCount").val(),i=n*4,u=(i-n*t)/n;tjq("#AdultCount > option").each(function(){this.value*n>9?tjq(this).hide():tjq(this).show()})});tjq("#AdultCount").on("change",function(){var t=tjq(this).val(),n=tjq("#RoomsCount").val(),u=tjq("#ChildCount").val(),i=n*4,r=(i-n*t)/n;n!=1?tjq("#ChildCount > option").each(function(){this.value*n+t*n>9?tjq(this).hide():tjq(this).show()}):tjq("#ChildCount > option").each(function(){this.value>r?tjq(this).hide():tjq(this).show()});tjq("#ChildCount").val("0").change()});tjq("#ChildCount").on("change",function(){var t=tjq(this).val(),n=tjq("#RoomsCount").val(),u=tjq("#AdultCount").val(),i=n*4,r=(i-n*t)/n;n!=1?tjq("#AdultCount > option").each(function(){this.value*n+t*n>9?tjq(this).hide():tjq(this).show()}):tjq("#AdultCount > option").each(function(){this.value>r?tjq(this).hide():tjq(this).show()})});w=9;e=parseInt(tjq("#fltAdultCount").val());tjq("#fltInfantCount > option").each(function(){this.value>e?tjq(this).hide():tjq(this).show()});tjq("#fltAdultCount").on("change",function(){tjq("#fltChildCount").val("0").change();tjq("#fltInfantCount").val("0").change();e=parseInt(tjq(this).val());var n=9-e,t=parseInt(tjq("#fltInfantCount").val());tjq("#fltInfantCount > option").each(function(){this.value>e?tjq(this).hide():tjq(this).show()});tjq("#fltChildCount > option").each(function(){this.value>n?tjq(this).hide():tjq(this).show()})});if(tjq(".b2cBookingDecision").click(function(){var n=tjq("#alertmsg").text();tjq(".booking-form").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,onValidationComplete:function(t,i){if(i==!0){var r=tjq("#IsB2C").val(),f=tjq("#hdnB2CLogin").val();(r=="True"||r=="true")&&f=="false"?tjq("#loginB2C").removeClass("hide").modal("show"):(tjq("#loader").show(),tjq("#maindivtext").text(n),u("/PassengerDetails/Index"),tjq(".booking-form").submit())}}})}),window.location.pathname.toLocaleLowerCase()=="/flight/index"){n=new Date;y=n.getMonth()+1>9?n.getMonth()+1:"0"+(n.getMonth()+1);var t=n.getDate()+"/"+y+"/"+n.getFullYear(),o="01/01/1910",s=t;GetSearchandBookCount(o,s)}if(tjq("#btnFromTo,#btnToday").click(function(){var n,t;if(this.id=="btnFromTo"){if(n=tjq("#txtStartDate").val(),t=tjq("#txtEndDate").val(),n=="")return alert("Please select the From date from the calender"),!1;if(t=="")return alert("Please select the To date from the calender"),!1;GetSearchandBookCount(n,t)}else if(this.id=="btnToday"){var i=new Date,r=i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear(),n=r,t=r;GetSearchandBookCount(n,t)}}),window.location.pathname.toLocaleLowerCase()=="/booking/index"&&(r=tjq("#IsB2C").val(),h=tjq("#hdnB2CLogin").val(),(r=="True"||r=="true")&&h=="false"&&(tjq("#loginB2C").modal({backdrop:"static",keyboard:!1}),tjq("#loginB2C").modal("show"))),window.location.pathname.toLocaleLowerCase()=="/passengerdetails/index"&&(r=tjq("#IsB2C").val(),h=tjq("#hdnB2CLogin").val(),(r=="True"||r=="true")&&h=="false"&&(tjq("#loginB2C").modal({backdrop:"static",keyboard:!1}),tjq("#loginB2C").modal("show"))),tjq("#IsB2BHaltrip").val()!=undefined&&tjq("#IsB2BHaltrip").val().toUpperCase()=="TRUE"){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),o=t,s=t;GetSearchandBookCount(o,s);fnGetClientAccountDetails()}if(tjq("#IsB2C").val()!=undefined&&tjq("#IsB2C").val().toUpperCase()=="FALSE"&&tjq("#IsB2BHaltrip").val()!=undefined&&tjq("#IsB2BHaltrip").val().toUpperCase()=="FALSE"&&(window.location.pathname.toLocaleLowerCase()=="/search/index"||window.location.pathname.toLocaleLowerCase()=="/search/hotel")){var n=new Date,t=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),o=t,s=t;GetSearchandBookCount(o,s);fnGetSearchReferences();fnGetBookingReferences();fnGetTicketingReferences();fnGetExpiringReferences();fnGetClientAccountDetails();fnGetHotelSearchReferences()}tjq(".hdnEmulateClientID").val("0");tjq(".hdnEmulateBranchID").val("0");tjq("#ddlEmulateClient").on("change",function(){var n=tjq(this).val();if(n=="0")return tjq("#ddlEmulateClient").val("0"),tjq("#ddlEmaulateBranch").val("0"),tjq("#emulateClientBlance").text("0.00"),tjq(".hdnEmulateClientID").val("0"),tjq(".hdnEmulateBranchID").val("0"),!1;tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Search/GetEmulateBranches",dataType:"JSON",data:{ClientId:n},success:function(t){if(t=="SESSIONTIMEOUT"&&HanldeSessionTimeout(),tjq("#ddlEmaulateBranch").html(""),tjq("#ddlEmaulateBranch").append(tjq("<option><\/option>").val("0").html("Select Branch")),t.Branches.length>0){for(i=0;i<t.Branches.length;i++)tjq("#ddlEmaulateBranch").append(tjq("<option><\/option>").val(t.Branches[i].BranchID).html(t.Branches[i].BranchName));tjq("#emulateClientBlance").text(t.ClientBalance);tjq(".hdnEmulateClientID").val(parseInt(n))}else parseInt(n)!=0&&(tjq("#emulateClientBlance").text("0.00"),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("No branch found! Please add branch..."))},error:function(n){tjq("#loader").hide();console.log(n);alert("Error has occurred..")}});tjq("#loader").hide()});tjq("#ddlEmaulateBranch").on("change",function(){var n=tjq(this).val();tjq(".hdnEmulateBranchID").val(n)});tjq("#resetEmulate").click(function(){tjq("#ddlEmulateClient").val("0");tjq("#ddlEmaulateBranch").val("0");tjq("#emulateClientBlance").text("0.00");tjq(".hdnEmulateClientID").val("0");tjq(".hdnEmulateBranchID").val("0")});tjq("#hdnManage").val()!=""&&tjq("#hdnManage").val()!=undefined&&tjq("#hdnManage").val().toUpperCase()=="TRUE"?tjq("#dvManageMenu").show():tjq("#dvManageMenu").hide();tjq("#hdnrules").val()!=""&&tjq("#hdnrules").val()!=undefined&&tjq("#hdnrules").val().toUpperCase()=="TRUE"?tjq("#dvRules").show():tjq("#dvRules").hide();tjq("#hdnAdministerMenu").val()!=""&&tjq("#hdnAdministerMenu").val()!=undefined&&tjq("#hdnAdministerMenu").val().toUpperCase()=="TRUE"?tjq("#dvAdminister").show():tjq("#dvAdminister").hide();tjq("#hdnAccountsMenu").val()!=""&&tjq("#hdnAccountsMenu").val()!=undefined&&tjq("#hdnAccountsMenu").val().toUpperCase()=="TRUE"?tjq("#dvAccountsHeader").show():tjq("#dvAccountsHeader").hide();tjq("#hdnlogic").val()!=""&&tjq("#hdnlogic").val()!=undefined&&tjq("#hdnlogic").val().toUpperCase()=="TRUE"?tjq("#dvlogic").show():tjq("#dvlogic").hide();tjq("#hdnReportMenu").val()!=""&&tjq("#hdnReportMenu").val()!=undefined&&tjq("#hdnReportMenu").val().toUpperCase()=="TRUE"?tjq("#dvReportsHeader").show():tjq("#dvReportsHeader").hide();tjq("#ordertktauto").click(function(){var n=tjq("#hdnBookingId").val();tjq("#loader").show();tjq.ajax({url:"/PurchaseOrder/UpdateTicketAuto",type:"post",dataType:"json",data:{bookingId:n},success:function(n){n=="Success"&&window.parent.location.reload(!0);tjq("#loader").hide()},error:function(){console.log("There is some error!");tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}})});tjq(".allowprev").focus(function(){tjq(".datepicker-wrap .allowprev input").datepicker("option","minDate",null)});tjq("#deposit_type").change(function(){tjq(".deposit_types,.cheque_deposit").hide();tjq("#dvbtn").hide();var n=this.options[this.selectedIndex].text;tjq("#"+n).show();tjq("#"+n).length>0&&tjq("#dvbtn").show()});tjq("#btnSubscribe").click(function(){tjq("#frmNewsLetter").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t==!1)return!1;var i=tjq("#NLName").val(),r=tjq("#NLEmail").val();tjq("#loader").show();tjq.ajax({url:"/Search/NewsLetter",type:"post",dataType:"json",data:{Email:r,Name:i},success:function(n){n=="Success"&&(tjq("#loader").hide(),tjq("#popupsuccess").modal("show"),tjq("#hpopsuccess").text("Thank you for subscribing to our newsletter."),tjq("#NLName").val(""),tjq("#NLEmail").val(""))},error:function(){tjq("#loader").hide();tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Some error occured please contact administrator.");tjq("#NLName").val("");tjq("#NLEmail").val("")},complete:function(){tjq("#NLName").val("");tjq("#NLEmail").val("");tjq("#loader").hide()}})}})});window.location.pathname.toLocaleLowerCase().search("/searchrules/viewsearchrules")>-1&&(tjq("#btnupdateroute").trigger("click"),fnGetSupplierText(dropdownSupplier,drpdownSource),fnGetPreferredValueOnExclude(drpdwnExclude),PromoteTagShowOrHide(isPromoteId),validationforCommissionandMarkup());window.location.pathname.toLocaleLowerCase().search("/supplier/viewsupplier")>-1&&tjq("#btnupdatesupplier").trigger("click");window.location.pathname.toLocaleLowerCase()=="/searchrules/index"&&PromoteTagShowOrHide(isPromoteId);tjq(".PreferredAirline.txtPreferredAirline").on("change",function(){var n=tjq(".PreferredAirline.txtPreferredAirline").val(),r,t,i;if(n!=""&&n!=undefined)if(n.length<=2&&n.includes(",")&&(tjq(".PreferredAirline.txtPreferredAirline").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,SG,9W)"),tjq("#popupfailure").css({"z-index":"9999"})),n.length>=3&&!n.includes(","))tjq(".PreferredAirline.txtPreferredAirline").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,SG,9W)"),tjq("#popupfailure").css({"z-index":"9999"});else if((n.length>=3||n.length!=2)&&(n.includes(",")||n.length!=2)){if(r=n.substr(n.length-1),r==",")return tjq(".PreferredAirline.txtPreferredAirline").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid Airline code! (Ex:AI,SG,9W)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;if(t=[],t=n.split(","),t.length>0&&t.length<=3)for(i=0;i<t.length;i++)if(t[i].length!=2)return tjq(".PreferredAirline.txtPreferredAirline").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid Airline code! (Ex:AI,EY,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;t.length>3&&(tjq(".PreferredAirline.txtPreferredAirline").val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter upto 3 airlines (Ex:AI,SG,9W)"),tjq("#popupfailure").css({"z-index":"9999"}))}});StartAndEndDate();l=tjq("input[name=busJourneytype]:checked").val();l!=""&&l!=undefined&&hideorshowBusReturndate(l)});tjq(document).on("change","#txtMarkUp",function(){var n=tjq(this).val(),t=tjq("#frmroe-update").find("#txtRoe").val(),i=parseFloat(n)+parseFloat(t);tjq("#frmroe-update").find("#txtActualRoe").val(parseFloat(i))});tjq(document).on("change","#txtRoe",function(){var n=tjq(this).val(),t=tjq("#frmroe-update").find("#txtMarkUp").val(),i=parseFloat(n)+parseFloat(t);tjq("#frmroe-update").find("#txtActualRoe").val(parseFloat(i))});inboundPrice=0;outboundPrice=0;tjq(function(){var t=tjq("#p_scents"),n=tjq("#p_scents p").size()+1;tjq("#addScnt").on("click",function(){return n<=6&&(tjq('<p><table class="table table-striped table-c"><tbody><tr><th style="width:17%;">2.<\/th><th><input type="text" class="form-control" id="usr" placeholder="Enter  itenary"><\/th><th><a href="#" id="addScnt"><sapn class="fa fa-plus"><\/span><\/a><br /><\/th><\/tr><\/tbody><\/table><\/p>').appendTo(t),n++),!1});tjq("#remScnt").on("click",function(){return n>2&&(tjq(this).parents("tr").remove(),n--),!1})});tjq(function(){var t=tjq("#p_scents_name"),n=tjq("#p_scents_name p").size()+1;tjq("#addScnt_name").on("click",function(){return n<=6&&(tjq('<p><table class="table table-striped table-c"><tbody> <tr><th style="width:17%;">2.<\/th><th><select class="form-control" id="sel1"><option>Mr.<\/option><option>Mrs.<\/option><option>Miss.<\/option><\/select><\/th><th><input type="text" class="form-control" id="usr" placeholder="First Name "><\/th><th><input type="text" class="form-control" id="usr" placeholder="Last Name "><\/th><th><a href="#" id="addScnt_name"><sapn class="fa fa-plus"><\/span><\/a><\/th><\/tr> <\/tbody><\/table><\/p>').appendTo(t),n++),!1})});tjq(function(){var t=tjq("#p_scents_Waitlisted"),n=tjq("#p_scents_Waitlisted p").size()+1;tjq("#addScnt_Waitlisted").on("click",function(){return n<=6&&(tjq('<p><table class="table table-striped table-c"><tbody><tr><th style="width:17%;">2.<\/th><th><input type="text" class="form-control" id="usr" placeholder="Enter  itenary"><\/th><th><a href="#" id="addScnt_Waitlisted"><sapn class="fa fa-plus"><\/span><\/a><\/th><\/tr><\/tbody><\/table><\/p>').appendTo(t),n++),!1})});tjq(document).ready(function(){tjq("#two").hide();tjq("#Cone").click(function(){tjq("#two").hide();tjq("#one").show()});tjq("#Ctwo").click(function(){tjq("#one").hide();tjq("#two").show()});tjq("#Cnav li").click(function(){tjq("#Cnav li").removeClass("active");tjq(this).addClass("active")});tjq(window).scroll(function(){var n=tjq(window).scrollTop();n>0?tjq(".pull-search-right").addClass("dis"):tjq(".pull-search-right").removeClass("dis")})});tjq(document).ready(function(){tjq("#btnManualUpdate").on("click",function(){tjq("#frmmanualupdate").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){t&&(tjq("#loader").show(),tjq("#Modify").modal("hide"),tjq.ajax({url:tjq("#frmmanualupdate").attr("action"),type:"post",dataType:"json",data:tjq("#frmmanualupdate").serialize(),success:function(n){if(n=="Success"){tjq("#hpopsuccess").text("Your bookig is Ticketed Sucessfully!");tjq("#popupsuccess").modal("show");tjq("#popupsuccess").on("hidden.bs.modal",function(){window.parent.location.reload(!0)})}tjq("#loader").hide()},error:function(){console.log("There is some error!");tjq("#loader").hide()},complete:function(){tjq("#loader").hide()}}))}})})});tjq(function(){tjq(".clientValidate.companyValue").on("change",function(){var n=tjq.trim(tjq(".clientValidate.companyValue").val());tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Common/CheckForDuplicateClient",data:{CompanyName:n},success:function(n){n==!1&&(tjq(".clientValidate.companyValue").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Company name already exist!"),tjq("#popupfailure").css({"z-index":"1052"}),tjq(".clientValidate.companyValue").focus());tjq("#loader").hide()},error:function(){tjq("#loader").hide()}})});tjq(".clientValidate.emailValue").on("change",function(){var n=tjq.trim(tjq(".clientValidate.emailValue").val());tjq("#loader").show();tjq.ajax({type:"POST",traditional:!0,async:!1,cache:!1,url:"/Common/CheckForDuplicateClient",data:{Email:n},success:function(n){n==!1&&(tjq(".clientValidate.emailValue").val(""),tjq("#loader").hide(),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("User name already exist!"),tjq("#popupfailure").css({"z-index":"1052"}),tjq(".clientValidate.emailValue").focus());tjq("#loader").hide()},error:function(){tjq("#loader").hide();alert("Error has occurred..")}})});var n=tjq("#hdnClientId").val(),t="";tjq(".companyEmailValue.clientValidate").on("change",function(){var u=tjq.trim(tjq(".companyEmailValue.clientValidate").val()),i=tjq.trim(tjq(".companyCity").val()),r;if(i.length==0||i==undefined)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter city"),tjq("#popupfailure").css({"z-index":"1052"}),tjq(".companyCity").focus(),tjq(".companyEmailValue.clientValidate").val(""),!1;r=[];i.includes(",")&&(r=i.split(","));n==""||n==undefined?t={companyEmail:u,city:r[0]}:n!=""&&n!=undefined&&(t={companyEmail:u,city:r[0],isExceptionEmail:!0});u.includes("@")&&tjq.ajax({type:"POST",datatype:"json",url:"/Common/CheckForDuplicateClientEmail",data:t,success:function(n){if(n!="NA"){var i="",t="",r=tjq.parseJSON(n);tjq.each(r,function(n,r){t=r.CompanyName;(r.ClientID==""||r.ClientID==undefined)&&(r.CompanyName==""||r.CompanyName==undefined)&&(i+="<tr><td>"+r.BranchName+"<\/td><td>"+r.City+"<\/td><td>"+r.Country+"<\/td><td>"+r.EmailId+"<\/td><td>"+r.PhoneNumber+"<\/td><\/tr>",t=r.ClientName)});i!=""?(tjq("#prtclientdaetails").html(""),tjq("#prtclientdaetails").append(i),tjq("#txtalertInfo").html(""),tjq("#txtalertInfo").append("<p>This&nbsp;&nbsp"+t+"&nbsp;&nbspclient is already registered ,Please contact the branch.Below are the branch details...<\/p>"),tjq("#dvBranchDetails").modal("show"),tjq(".companyEmailValue").val("")):(alert("This "+t+" client already exist"),tjq(".companyEmailValue").val(""))}},error:function(){tjq("#loader").hide();tjq(".companyEmailValue").val("")}})});tjq("#Register").on("hidden.bs.modal",function(){tjq("#frmregister").trigger("reset")});tjq("#dveditBooking").on("hidden.bs.modal",function(){tjq("#frmEditBooking").trigger("reset")})});tjq(document).on("click","#myProfilePhoto",function(){tjq("#ProfileImage").trigger("click")});tjq(document).on("change","#ProfileImage",function(){var n=this.files[0],t=n.name.substring(n.name.lastIndexOf(".")+1,n.name.length),i=new FileReader;n!=""&&n!=undefined&&n.size>1048576?(tjq("#myProfilePhoto").attr("src",""),tjq(this).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("File size should be less than 500kb")):t.toUpperCase()!="PNG"&&t.toUpperCase()!="JPG"&&t.toUpperCase()!="JPEG"&&t.toUpperCase()!="GIF"?(tjq("#myProfilePhoto").attr("src",""),tjq(this).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Uploaded file is not a valid file type. Only JPG, JPEG , PNG and GIF files are allowed !")):i.onload=function(n){tjq("#myProfilePhoto").attr("src",n.target.result).width(150).height(150)};n&&i.readAsDataURL(n)});tjq("#itineraryPrint").click(function(){var n=[],i=[],t;if(tjq(".searchresult input:checked").each(function(t){n[t]=tjq(this).val();i.push(tjq(this).val())}),n=="")return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Select itinerary"),!1;t={itineraryids:n};tjq("#loader").show();tjq.ajax({url:"/Search/FlightIteneraryPDFContent",method:"POST",datatype:"texthtml",contentType:"application/json; charset=utf-8",data:JSON.stringify(t),success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#printchild").html(n);tjq("#modalprint").modal("show")}})});tjq("#btnUserActivityReset,#btnBusUserActivityReset,#btnHotelUserActivityReset").click(function(){this.id=="btnUserActivityReset"?window.location.href="/UserActivity/Flights":this.id=="btnBusUserActivityReset"?window.location.href="/UserActivity/Bus":this.id=="btnHotelUserActivityReset"&&(window.location.href="/UserActivity/Hotels")});tjq("#btnUserLogReset").click(function(){window.location.href="/UserLog/Index"});tjq("#btnReservationReset").click(function(){window.location.href="/Reservations/Index"});tjq(function(){tjq("#CnfmPricingSaved").on("click",function(){tjq("#btnImportPnr").show();tjq("#isPricingDetailsSaved").modal("hide")});tjq("#CnfmPricingNotSaved").on("click",function(){tjq("#popupfailure").modal("show");tjq("#hpopupfailure").text("Please save the pricing details of the PNR to import!");tjq("#btnImportPnr").hide();tjq("#isPricingDetailsSaved").modal("hide")})});tjq(function(){tjq("#btnEditBooking").click(function(){return tjq("#frmEditBooking").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t)tjq("#loader").show();else return!1;return!0}})})});tjq(function(){tjq("#btnEditInProcessBooking").click(function(){return tjq("#frmEditInProcessBooking").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t)tjq("#loader").show();else return!1;return!0}})})});tjq(function(){tjq("#btnUpdateBaggage").click(function(){return tjq("#frmUpdateBaggage").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t)tjq("#loader").show();else return!1;return!0}})})});tjq("#fltMarkupSlab").on("change",function(){var n=tjq("#fltMarkupSlab").val();n!=undefined&&n!=""&&n!=0?(tjq("#loader").show(),tjq.ajax({url:"/Settings/getSlabDescription",method:"GET",datatype:"json",data:{slabId:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=undefined&&n!=""&&(tjq("#loader").hide(),tjq("#dvMarkupslabdesc").show(),tjq("#lblMarkupDescription").html(n))},erro:function(){tjq("#loader").hide()}})):tjq("#dvMarkupslabdesc").hide()});tjq("#fltCmmsnSlab").on("change",function(){var n=tjq("#fltCmmsnSlab").val();n!=undefined&&n!=""&&n!=0?(tjq("#loader").show(),tjq.ajax({url:"/Settings/getSlabDescription",method:"GET",datatype:"json",data:{slabId:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n!=undefined&&n!=""&&(tjq("#loader").hide(),tjq("#dvCmssnSlabdesc").show(),tjq("#lblCommissionSlabDescription").text(n))},erro:function(){tjq("#loader").hide()}})):tjq("#dvCmssnSlabdesc").hide()});tjq(function(){tjq("#btnSendReqChangeCancel").click(function(){return tjq("#frmChangeCancelRequest").validationEngine("validate",{maxErrorsPerField:1,autoHidePrompt:!0,scroll:!1,onValidationComplete:function(n,t){if(t)tjq("#loader").show();else return!1;return!0}})})});tjq(".isFlatPercentage").click(function(){tjq(".isFlatPercentage").prop("checked",!1);tjq(this).prop("checked",!0)});tjq(document).ready(function(){tjq(".txtCheckInDate").datepicker({numberOfMonths:2,showAnim:"slide",dateFormat:"dd/mm/yy",minDate:0,onClose:function(){var n=tjq(".txtCheckOutDate"),r=tjq(this).datepicker("getDate"),u=n.datepicker("getDate"),t=tjq(this).datepicker("getDate"),i=tjq(this).datepicker("getDate");t&&(t.setDate(t.getDate()+1),i.setDate(i.getDate()+30));u<r&&(n.datepicker("setDate",t),n.trigger("input"));n.datepicker("option","minDate",t);n.datepicker("option","maxDate",i);tjq(this).datepicker("option","minDate",0)}});tjq(".txtCheckOutDate").datepicker({numberOfMonths:2,showAnim:"slide",dateFormat:"dd/mm/yy"})});tjq("#bookingstatus").on("change",function(){var n=tjq("#bookingstatus").val();n!=""&&n!=undefined&&n.toLocaleLowerCase()!="unconfirmed"?tjq("#dvExternalSource").show():tjq("#dvExternalSource").hide()});roomchildages=[];tjq(document).ready(function(){window.location.pathname.toLocaleLowerCase().indexOf("/travellerprofile/")!=-1&&LoadTravellerCountriesAutocomplete();tjq(function(){tjq("body").on("click","#addPassport",function(){var t,n;return tjq("#loader").show(),t=tjq("#passportIndex").val(),tjq("#passportIndex").val(parseInt(t)+1),n=tjq(this),tjq.ajax({url:this.href,cache:!1,success:function(t){n.parent().parent().parent().find("#divPassport").append(t);n.parent().parent().parent().find("#btnpassportadddiv").attr("hidden","hidden");LoadCountriesAutocomplete();tjq("#loader").hide()}}),tjq("#loader").hide(),!1});tjq("body").on("click",".removePassport",function(){tjq("#loader").show();var n=tjq("#passportIndex").val();tjq("#passportIndex").val(parseInt(n)-1);tjq(this).parents().parents().find("#btnpassportadddiv").removeAttr("hidden");tjq(this).parents("div.divlistpassport:first").remove();tjq("#loader").hide()})});tjq(function(){tjq("#addTraveler").on("click",function(){return tjq("#loader").show(),tjq.ajax({url:this.href,cache:!1,success:function(n){tjq("#divPassenger").append(n);LoadCountriesAutocomplete();tjq("#loader").hide()}}),tjq("#loader").hide(),!1});tjq("body").on("click",".removePassenger",function(){tjq("#loader").show();tjq(this).parents("div.divlistpassengers:first").remove();tjq("#loader").hide()})});tjq("input.TravellerProfile[type=text]").focus(function(){tjq(this).each(function(){tjq(this).autocomplete({source:function(n,t){var i=[],r=this.element[0].name;tjq.ajax({dataType:"json",data:{q:n.term},url:window.location.origin+"/TravellerProfile/GetTravellerNameSuggetion?term="+n.term,success:function(n){for(var f,u=0;u<n.length;u++)f=n[u].split(","),i.push({label:f[1],value:f[1],hid:f[0],index:r});t(i)}})},select:function(n,t){tjq.ajax({dataType:"json",data:{q:t.item.hid},url:window.location.origin+"/TravellerProfile/GetTravellerDetails?travellerID="+window.btoa(t.item.hid),success:function(n){var i=JSON.parse(n),r=t.item.index,e=parseInt(r)+1,o=tjq("#Passengers_"+r+"__PaxType").val(),u,s,h,f,c,l;tjq("#createProfile"+(parseInt(r)+1)).css("display","none");tjq("#createProfile"+(parseInt(r)+1)).attr("checked",!1);tjq("#Passengers_"+r+"__FirstName").val(i.FirstName);tjq("#Passengers_"+r+"__LastName").val(i.LastName);tjq("#Passengers_"+r+"__SeatPref").val(i.SeatPref);tjq("#Passengers_"+r+"__MealReq").val(i.MealPref);tjq("#Passengers_"+r+"__FFNum").val(i.FFNum);tjq("#Passengers_"+r+"__Gender").val(i.Gender);i.DateOfBirth!=null&&(u=new Date(Date.parse(i.DateOfBirth)),s=u.getDate()>9?u.getDate():0+u.getDate().toString(),tjq("#"+o+"-DD-"+e).val(s.toString()).change(),h=u.getMonth()+1>9?""+(u.getMonth()+1):"0"+(u.getMonth()+1),tjq("#"+o+"-MM-"+e).val(h.toString()).change(),tjq("#"+o+"-YY-"+e).val(u.getFullYear()).change());i.Passport!=null&&(tjq("#Passengers_"+r+"__PassportNum").val(i.Passport.PassportNumber),f=new Date(Date.parse(i.Passport.PassportDOE)),tjq("#Passengers_"+r+"__Country").val(i.Passport.IssuanceCountry),tjq("#Passengers_"+r+"__Nationality").val(i.Passport.Nationality),c=f.getDate()>9?f.getDate():0+f.getDate().toString(),tjq("#Passengers_"+r+"__PDay").val(c.toString()),l=f.getMonth()>9?f.getMonth():0+f.getMonth().toString(),tjq("#Passengers_"+r+"__PMonth").val(l.toString()),tjq("#Passengers_"+r+"__PYear").val(f.getFullYear().toString()));r==0&&(tjq("#Email").val(i.Email),tjq("#MobileNum").val(i.PhoneNumber),tjq("#Address1").val(i.Address),tjq("#PostalCode").val(i.AreaCode),tjq("#City").val(i.City))}})}})})});tjq(".btnposttraveler").click(function(n){tjq('.panel-collapse:not(".in")').collapse("show");n.preventDefault();var t=tjq(this).val();tjq("#action").val(t);tjq("#frmTravellerProfile").validationEngine("validate",{autoHidePrompt:!0,maxErrorsPerField:1,onValidationComplete:function(n,t){t==!0&&(tjq("#loader").show(),tjq("#frmTravellerProfile")[0].submit())}})})});tjq(function(){Array.prototype.AllValuesSame=function(){if(this.length>0){for(var n=1;n<this.length;n++)if(this[n]!==this[0])return!1;return!0}}});var searchResponseCount=parseInt(tjq("#hdnsearchResponseCount").val()),totalNumberOfSearchResults=parseInt(tjq("#hdnModelCount").val()),shownCount=searchResponseCount,divSearchResults,outboundminDuration=0,outboundmaxDuration=0,outboundminTransit=0,outboundmaxTransit=0,inboundminDuration=0,inboundmaxDuration=0,inboundminTransit=0,inboundmaxTransit=0,strminPrice,strmaxPrice,airlineName,stopCount,LowHigh=!0,minValue,maxValue,preferredAirline,selectedCurrency,inbndoroutbnd,inboundtransitstart,inboundtransitend,inbounddurstart,inbounddurend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend;tjq(document).ready(function(){window.location.pathname.toLocaleLowerCase()=="/search/searchresponsegridview"&&tjq("#cmbViewBy").val("/Search/SearchResponseGridView");window.location.pathname.toLocaleLowerCase().search("/search/searchresponse/")>-1&&tjq("#cmbViewBy").val("/Search/SearchResponse/ALL");LoadDepartureTimeforB2C();LoadArrivalTimeForB2C();LoadPriceRange();LoadOutboundDepartureTime();LoadInboundDepartureTime();LoadInboundArrivalTime();LoadOutboundArrivalTime();LoadOutboundDurationTime();LoadInboundDurationTime();LoadOutboundTransitTime();LoadInboundTransitTime();tjq("#ddlScurrency").change(function(){var n,t,i;if(tjq("#ddlScurrency").val()=="0")return!1;tjq("input[name='chkstop']").attr("checked",!1);tjq("input[name='chkgrpairlne']").attr("checked",!1);tjq("#loader").show();n=tjq("#ddlScurrency").val().split(",");t="";t=n[1]==""?"/Search/SearchResponseGridPartial":"/Search/SearchResponsePartial";i={currency:n[0],airlinecode:n[1]};tjq.ajax({url:t,method:"POST",datatype:"json",data:i,success:function(t){t=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();n[1]!=""?(tjq("#prtlsearchresponse").html(""),tjq("#prtlsearchresponse").html(t)):(tjq("#prtlsearchresponsegrid").html(""),tjq("#prtlsearchresponsegrid").html(t));tjq(".search-results-title b").text(tjq("div.searchresult").filter(":visible").length);tjq(".min-price-label").html(parseInt(tjq("#hdnMinPrice").val())+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(parseInt(tjq("#hdnMaxPrice").val())+" "+tjq("#hdnCurrency").val());tjq('[data-toggle="popover"]').popover()},error:function(){tjq("#loader").hide();alert("Error")}})});tjq(".rbdValidation").change(function(){var t=tjq(this).attr("id"),n=tjq("#"+t).val(),u,i,r;if(n!=""&&n!=undefined)if(n.length!=3||n.includes(",")){if(n!=""&&(n.length>=2||n.length!=1)&&(n.includes(",")||n.length!=1)){if(u=n.substr(n.length-1),u==",")return tjq("#"+t).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please remove , and enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0;for(i=[],i=n.split(","),r=0;r<i.length;r++)if(i[r].length!=1)return tjq("#"+t).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}),!0}}else n.toUpperCase()!="ALL"&&(tjq("#"+t).val(""),tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please enter valid BookingClass code! (Ex: Y,B,ALL)"),tjq("#popupfailure").css({"z-index":"9999"}))})});tjq("#price-range_return").slider({range:!0,min:parseInt(tjq("#hdnMinPrice").val()),max:parseInt(tjq("#hdnMaxPrice").val()),values:[parseInt(tjq("#hdnMinPrice").val()),parseInt(tjq("#hdnMaxPrice").val())],slide:function(n,t){tjq(".min-price-label").html(t.values[0]+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(t.values[1]+" "+tjq("#hdnCurrency").val());filterSystemOnPrice(t.values[0],t.values[1])}});tjq(".min-price-label").html(tjq("#price-range_return").slider("values",0)+" "+tjq("#hdnCurrency").val());tjq(".max-price-label").html(tjq("#price-range_return").slider("values",1)+" "+tjq("#hdnCurrency").val());tjq("#flight-timesdept_return").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".deptstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".deptend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];filterSystemOnDeptTime(i,r)}});tjq(".deptstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesdept_return").slider("values",0)));tjq(".deptend-time-label").html(convertTimeToHHMM(tjq("#flight-timesdept_return").slider("values",1)));tjq("#flight-timesarr_return").slider({range:!0,min:0,max:1439,values:[0,1439],slide:function(n,t){tjq(".arrstart-time-label").html(convertTimeToHHMM(t.values[0]));tjq(".arrend-time-label").html(convertTimeToHHMM(t.values[1]));var i=t.values[0],r=t.values[1];filterSystemOnArrTime(i,r)}});tjq(".arrstart-time-label").html(convertTimeToHHMM(tjq("#flight-timesarr_return").slider("values",0)));tjq(".arrend-time-label").html(convertTimeToHHMM(tjq("#flight-timesarr_return").slider("values",1)));tjq("#fltrinoutbound").click(function(){var n=tjq("#fltrinoutbound").attr("name");n.toLocaleLowerCase()=="return"&&(tjq("#dvInboundSlider").show(),tjq("#dvOutboundSlider").show(),LoadInboundDepartureTime(),LoadInboundArrivalTime());n.toLocaleLowerCase()=="oneway"&&(tjq("#dvInboundSlider").hide(),tjq("#dvOutboundSlider").show())});tjq(function(){tjq(".inbout").click(function(){var n=this.id;tjq("#hdnFilterId").val(n)});tjq(".outb").click()});tjq(function(){var u="/Search/SearchResponsePartial",t=window.location.pathname,f=t.substr(t.length-3),i=parseInt(tjq("#hdnModelCount").val()),n=searchResponseCount,r;tjq("#ddlScurrency").change(function(){var t=tjq("#ddlScurrency").val().split(",");tjq("#loadMore").show();r=t[0];n=searchResponseCount});i<=searchResponseCount&&tjq("#loadMore").hide();tjq("#loadMore").on("click",function(t){t.preventDefault();var e=i-(+n+ +searchResponseCount);e<=0&&tjq("#loadMore").hide();tjq("#loader").show();tjq.ajax({type:"POST",url:u,data:{currency:r,airlinecode:f,noOfRowsToDisplay:n,noOfRowsToShowFirst:searchResponseCount},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n.length!==0&&tjq("#prtlsearchresponse").html("").html(n);updateNumberOfResults();LoadPriceRange();LoadOutboundDepartureTime();LoadInboundDepartureTime();LoadOutboundArrivalTime();LoadInboundArrivalTime();tjq("#loader").hide()},error:function(){tjq("#loader").hide();alert("Error has occurred..")}});n=+n+ +searchResponseCount})});tjq(function(){var i="/Search/SearchResponsePartialB2C",t=parseInt(tjq("#hdnModelCount").val()),n=searchResponseCount;t<=searchResponseCount&&tjq("#btnloadMore").hide();tjq("#btnloadMore").on("click",function(r){r.preventDefault();var u=t-(+n+ +searchResponseCount);u<=0&&tjq("#btnloadMore").hide();tjq("#loader").show();tjq.ajax({type:"POST",url:i,data:{noOfRowsToDisplay:n,noOfRowsToShowFirst:searchResponseCount},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n.length!==0&&tjq("#prtlsearchresponse").html("").html(n);updateNumberOfResults();LoadPriceRange();LoadOutboundDepartureTime();LoadInboundDepartureTime();LoadOutboundArrivalTime();LoadInboundArrivalTime();tjq("#loader").hide()},error:function(){tjq("#loader").hide();alert("Error has occurred..")}});n=+n+ +searchResponseCount})});tjq(".airlines-filters").click(function(){tjq("#loader").show();var n=[];tjq.each(tjq("input[name='chkgrpairlne']:checked"),function(){n.push(tjq(this).val())});airlineName=n.join(",");fnFlightsCombinationFilter(LowHigh,stopCount,airlineName,minValue,maxValue,preferredAirline,selectedCurrency,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend,inboundtransitstart,inboundtransitend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,inbounddurstart,inbounddurend)});tjq("#ddlpricefilter").change(function(){tjq("#loader").show();(tjq("#ddlpricefilter").val().toLocaleLowerCase()=="lh"||tjq("#ddlpricefilter").val()=="0")&&(LowHigh=!0);tjq("#ddlpricefilter").val().toLocaleLowerCase()=="hl"&&(LowHigh=!1);fnFlightsCombinationFilter(LowHigh,stopCount,airlineName,minValue,maxValue,preferredAirline,selectedCurrency,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend,inboundtransitstart,inboundtransitend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,inbounddurstart,inbounddurend)});tjq(".stop-filters").click(function(){tjq("#loader").show();var n=[];tjq.each(tjq("input[name='chkstop']:checked"),function(){n.push(tjq(this).val())});stopCount="";n.length!=0&&(stopCount=n.join(","));fnFlightsCombinationFilter(LowHigh,stopCount,airlineName,minValue,maxValue,preferredAirline,selectedCurrency,outboundtransitstart,outboundtransitend,outbounddurstart,outbounddurend,outboundarrivalstart,outboundarrivalend,outbounddeparturestart,outbounddepartureend,inboundtransitstart,inboundtransitend,inboundarrivalstart,inboundarrivalend,inbounddeparturestart,inbounddepartureend,inbounddurstart,inbounddurend)}),function(){"use strict";function n(n,t){this.httpSend=function(i,r,u){return n({method:u==undefined?"GET":"POST",url:t.dataUri+i,dataType:"jsonp",data:r,headers:{"Content-Type":"application/json"}})};this.convertToDate=function(n){return moment.utc(n,"DD/MM/YYYY").format()};this.ToJavaScriptDate=function(){}}angular.module("app").service("CommonService",n);n.$inject=["$http","config"]}(),function(){"use strict";function n(n,t,i,r,u){function e(){t.get("/Bus/LoadPlaces").then(function(t){n.Regiondata=t.data;angular.forEach(n.Regiondata,function(t){t.PlaceName!=""&&t.PlaceName!=null&&n.Regions.push(t.PlaceName);t.SubPlaceName!=""&&t.SubPlaceName!=null&&n.Regions.push(t.SubPlaceName)})},function(){})}function f(){tjq("#loader").show();t.post("/Bus/SelectedCompany",{onwardtrip:n.SelectedOutbound,returntrip:n.SelectedInbound}).success(function(){window.location.href="/Bus/Booking"}).error(function(){tjq("#loader").hide()});tjq("#loader").hide()}n.Regions=[];n.bussearchRS={};n.SelectedOutbound=null;n.SelectedInbound=null;e();tjq("#Origin").autocomplete({source:n.Regions});tjq("#Destination").autocomplete({source:n.Regions});n.dateformat=function(n){if(n!=null){var r=n.split(" "),i=r[0].split("-"),u=r[1].split(":"),t=new Date(i[0],i[1]-1,i[2],u[0],u[1]);return t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()+" "+t.getHours()+":"+((t.getMinutes()<10?"0":"")+t.getMinutes())}};n.GetSearchResults=function(i,r,f,e,o){tjq("#loader").show();n.searchRQ={};n.searchRQ.From=i;n.searchRQ.To=r;n.searchRQ.TotalPax=o;n.searchRQ.DepartureDate=u.convertToDate(f);e!="N"?n.searchRQ.ReturnDate=u.convertToDate(e):(tjq(".Round_Trip").is(":checked")&&tjq(".Round_Trip").prop("checked",!1),tjq(".One_Way").is(":checked")||(tjq(".One_Way").prop("checked",!0),tjq(".retrn_date").hide(),tjq("#ReturnDate").val("")));t.post("/Bus/GetSearchResults",n.searchRQ).then(function(t){n.bussearchRS=t.data;tjq("#loader").hide();console.log(t.data)},function(){tjq("#loader").hide()})};n.GetInboundSeat=function(i,r,u){tjq("#"+r).hasClass("in")||(tjq("#"+r).parent().parent().find(".collapse.in").collapse("hide"),i.AutoSeat?(tjq("#"+r).find("#SeatData").html("<h3 class=autoseat style=text-align:center;padding:10px;margin-top:15px;>Auto Seat! Click continue to proceed<\/h3>"),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!0):setTimeout(function(){tjq("#loader").show();var f=!1;u!="N"&&(f=!0);t.post("/Bus/GetSeat",{request:i,returndate:u,isreturn:f}).then(function(t){n.seatRS=t;tjq("#loader").hide();t.data!=""&&t.data!=null&&t.data!="seatsisnull"?(tjq("#"+r).find("#SeatData").html(t.data),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!0):t.data!=""&&t.data=="seatsisnull"&&(tjq("#"+r).find("#SeatData").html("<h3 class=autoseat style=text-align:center;padding:10px;margin-top:15px;>Seats are sold out<\/h3>"),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!1)},function(){tjq("#loader").hide()})},200))};n.GetOutboundSeat=function(i,r,u){tjq("#"+r).hasClass("in")||(tjq("#"+r).parent().parent().find(".collapse.in").collapse("hide"),i.AutoSeat?(tjq("#"+r).find("#SeatData").html("<h3 class=autoseat style=text-align:center;padding:10px;margin-top:15px;>Auto Seat! Click continue to proceed<\/h3>"),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!0):setTimeout(function(){tjq("#loader").show();t.post("/Bus/GetSeat",{request:i,returndate:u,isreturn:!1}).then(function(t){n.seatRS=t;tjq("#loader").hide();t.data!=""&&t.data!=null&&t.data!="seatsisnull"?(tjq("#"+r).find("#SeatData").html(t.data),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!0):t.data!=""&&t.data=="seatsisnull"&&(tjq("#"+r).find("#SeatData").html("<h3 class=autoseat style=text-align:center;padding:10px;margin-top:15px;>Seats are sold out<\/h3>"),tjq("#"+r).parent().find(".collapse").collapse("show"),n.showContinue=!1)},function(){tjq("#loader").hide()})},200))};n.SelectedOutboundCompany=function(t,i,r){tjq("#loader").show();var u=[];if(!t.AutoSeat&&(tjq("#"+i+" input:checked").each(function(n){u[n]=tjq(this).val()}),u==""))return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please Select Seat!"),tjq("#loader").hide(),!1;if(n.SelectedOutbound=t,n.SelectedOutbound.SelectedSeat=u,r!="N"&&n.SelectedInbound==null)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please Select Return Trip!"),tjq("#loader").hide(),!1;tjq("#loader").hide();f()};n.SelectedInboundCompany=function(t,i){tjq("#loader").show();var r=[];if(!t.AutoSeat&&(tjq("#"+i+" input:checked").each(function(n){r[n]=tjq(this).val()}),r==""))return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please Select Seat"),tjq("#loader").hide(),!1;if(n.SelectedInbound=t,n.SelectedInbound.SelectedSeat=r,n.SelectedOutbound==null)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Please Select Onward Trip"),tjq("#loader").hide(),!1;n.SelectedOutbound!=null&&n.SelectedInbound!=null&&(tjq("#loader").hide(),f())}}angular.module("app").controller("BusController",n);n.$inject=["$scope","$http","$filter","config","CommonService"]}(),function(){"use strict";function n(n,t){function i(){t.get("/Bus/CreateBusMarkup").then(function(t){n.BusMarkupData=t.data},function(){console.log("error")})}i()}angular.module("app").controller("BusMarkupController",n);n.$inject=["$scope","$http","$filter","config","CommonService"]}();tjq(document).ready(function(){tjq(function(){tjq("span.stars").stars()});LoadHotelPriceRange()});strLHOrHL=!0;tjq("#htlcurrency").change(function(){var n,t;if(tjq("input[name='chkstar']").attr("checked",!1),tjq("#drpPrice").val(0),tjq("#txthotelnamefilter").val(""),tjq("ul.dropdownstar").val(0),tjq("#hotelLoadmore").show(),tjq("#htlcurrency").val()=="0")return!1;tjq("input[name='chkstop']").attr("checked",!1);tjq("input[name='chkgrpairlne']").attr("checked",!1);tjq("#loader").show();n=tjq("#htlcurrency").val().split(",");url="/Search/HotelResponsePartial";t={currency:n};tjq.ajax({url:url,method:"POST",datatype:"json",data:t,success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();tjq("#loader").hide();tjq("#prtlhotelresponse").html("");tjq("#prtlhotelresponse").html(n);LoadHotelPriceRange();tjq(".hotelminprice").html(parseInt(tjq("#hdnMinPrice").val())+" "+tjq("#hdnCurrency").val());tjq(".hotelmaxprice").html(parseInt(tjq("#hdnMaxPrice").val())+" "+tjq("#hdnCurrency").val());tjq('[data-toggle="popover"]').popover()},error:function(){tjq("#loader").hide();alert("Error")}})});delay=function(){var n=0;return function(t,i){clearTimeout(n);n=setTimeout(t,i)}}();tjq.fn.stars=function(){return tjq(this).each(function(){var n=parseFloat(tjq(this).html()),t=Math.max(0,Math.min(5,n))*14,i=tjq("<span />").width(t).addClass("five-stars");tjq(this).html(i)})};tjq(".chkboxStar").on("change",function(){tjq("input.chkboxStar").not(this).prop("checked",!1);var t=tjq(this).prop("checked"),n=0;t&&(n=tjq(this).data("star"));starrating=n;HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)});tjq(function(){var r="/Search/HotelSearchResponseLoadMore",i=tjq("#hdnModelCount").val(),n=searchResponseCount,t=n;i<=n&&tjq("#hotelLoadmore").hide();tjq("#hotelLoadmore").on("click",function(u){u.preventDefault();var f=i-(+t+ +n);f<=0&&tjq("#hotelLoadmore").hide();tjq("#loader").show();tjq.ajax({type:"POST",url:r,data:{NumberOfResultsOnclick:t,NumOfResultsByDefault:n},success:function(n){n=="SESSIONTIMEOUT"&&HanldeSessionTimeout();n.length!==0&&(tjq("#prtlhotelresponse").html("").html(n),tjq("span.stars").stars());tjq("#loader").hide()},error:function(){tjq("#loader").hide();alert("Error has occurred..")}});t=+t+ +n})});tjq("#dropdownstar").on("change",function(){var n=tjq("#dropdownstar").val();starrating=n;HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)});tjq("#txthotelnamefilter").on("change",function(){hotelname=tjq("#txthotelnamefilter").val();(hotelname==""||hotelname==null)&&HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)});tjq("#spntxthotelname").on("click",function(){hotelname=tjq("#txthotelnamefilter").val();HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)});tjq("#btnhtlfilter").on("click",function(){if(strminprice=tjq("#txtMinPrice").val(),strmaxPrice=tjq("#txtMaxPrice").val(),(strminprice==""||strminprice==undefined)&&(strminprice=0),strmaxPrice==""||strmaxPrice==undefined||strmaxPrice==0)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Enter max price greater than 0 to filter!"),!1;if(strminprice>strmaxPrice)return tjq("#popupfailure").modal("show"),tjq("#hpopupfailure").text("Enter max price greater than min price"),!1;strmaxPrice!=""&&strmaxPrice!=undefined&&strmaxPrice>0&&HotelFilter(hotelname,starrating,strminprice,strmaxPrice,strLHOrHL)});google.load("visualization","1",{packages:["corechart"]}),function(){"use strict";function t(){var n=function(n){this.items=[];this.busy=!1;this.itemsPerPage=5;this.pageIndex=0;this.datas=n;this.last=!1};return n.prototype.nextPage=function(){var n;if(!this.busy&&!this.last){this.busy=!0;var i=this.pageIndex*this.itemsPerPage,r=i+this.itemsPerPage,t=this.datas.slice(i,r);for(t.length==0&&(this.last=!0),n=0;n<t.length;n++)this.items.push(t[n]);this.pageIndex+=1;this.busy=!1}},n}function i(n,t,i,r,u,f){function h(n){o="";o=new google.maps.Map(document.getElementById("map"),{zoom:1.9,center:new google.maps.LatLng(40,0),mapTypeId:google.maps.MapTypeId.ROADMAP});s(n)}function c(n,t,i,r){var u=i*Math.cos(r),f=i*Math.sin(r),e=u/(111320*Math.cos(n)),o=f/110540,s=t+e,h=n+o;return new google.maps.LatLng(h,s)}var e,o,s;n.currentPage=1;n.numPerPage=5;n.maxSize=5;n.tableData=[];n.fitleredTData=[];e=[];s=function(n){function it(n,t){return k=new google.maps.Polyline({path:[n,t],strokeColor:d,strokeOpacity:1,strokeWeight:2,icons:[{icon:rt,offset:"60%"}],geodesic:!0,clickable:!0}),k.setMap(o),k}var t,r,k,s,u,rt,g,p,w,nt,ut,ft,tt,i,et,b,a,ot,st;for(e=[],s=[],u=[],rt={path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW},t=0;t<n.length;t++){var f=n[t].mapDatalist,y=[],d;for(d=n[t].IsReturn==0?"#F1948A":"#45B39D",g=[],r=0;r<f.length;r++)ut=f[r].latitude,ft=f[r].longitude,p=new google.maps.Marker({position:new google.maps.LatLng(ut,ft),map:o}),nt=new google.maps.InfoWindow({maxWidth:320}),tt=f[r].airportcode,w="<div><h4>"+f[r].airportcode+"<\/h4><p> "+n[t].path+" <\/p><p> Total passengers: "+n[t].Totalpassenger+" <\/p><p> Depature: "+n[t].DepatureDate+" <\/p><p> Arrival : "+n[t].ArrivalDate+" <\/p><\/div>",i=u.findIndex(function(n){return n.ACode==tt}),i>0?(u[i].CS=u[i].CS+w,u[i].Count=parseInt(u[i].Count)+1):u.push({ACode:f[r].airportcode,CS:w,Count:1}),google.maps.event.addListener(p,"click",function(n,t,i,r){return function(){var u=t.findIndex(function(n){return n.ACode==r}),f=t[u].CS;i.setContent(f);i.open(o,n);i.setOptions({maxWidth:400})}}(p,u,nt,tt)),et=new google.maps.LatLng(f[r].latitude,f[r].longitude),y.push(et),g.push({Marker:p,Content:w,InfoWindow:nt});for(b=[],a=0;a<y.length-1;a++){var h=y[a],l=y[a+1],ht=google.maps.geometry.spherical.computeDistanceBetween(h,l),ct=google.maps.geometry.spherical.computeHeading(h,l),v=google.maps.geometry.spherical.computeOffset(h,ht/2,ct),i=s.findIndex(function(n){return n.P1.equals(h)&&n.P2.equals(l)||n.P2.equals(h)&&n.P1.equals(l)});i>=0?(ot=8e3*parseInt(s[i].Count),st=225,v=c(v.lat(),v.lng(),ot,st),s[i].Count=parseInt(s[i].Count)+1):s.push({P1:h,P2:l,Count:1});b.push(it(h,v));b.push(it(v,l))}google.maps.event.addListener(s,"click",function(){this.strokecolor="#000"});e.push({POID:n[t].PurchaseorderId,MarkerDet:g,Polyline:b,IsRn:n[t].IsReturn,StrokeColor:d})}};n.getFlightsLocation=function(i){tjq("#loader").show();t.post("/Dashboard/LoadflightLocations",{filterval:i}).then(function(t){n.tableData=JSON.parse(t.data);h(n.tableData);n.fitleredTData=new f(n.tableData);n.fitleredTData.items.length==0&&n.fitleredTData.nextPage();tjq("#loader").hide()},function(){tjq("#loader").hide()})};n.getFlightsLocation();n.focusmapon=function(n){for(var c=n.mapDatalist,i=e.find(function(t){return t.POID==n.PurchaseorderId&&t.IsRn==n.IsReturn}),h,u,t,f,s,r=0;r<e.length;r++){for(u=0;u<e[r].MarkerDet.length;u++)e[r].MarkerDet[u].InfoWindow.close();for(t=0;t<e[r].Polyline.length;t++)e[r].Polyline[t].setOptions({strokeColor:e[r].StrokeColor})}for(i.MarkerDet[0].InfoWindow.setContent(i.MarkerDet[0].Content),o.setZoom(6),t=0;t<i.Polyline.length;t++)i.Polyline[t].setOptions({strokeColor:"#0000FF"});h=i.Polyline.length;f=i.Polyline[parseInt(h/2)].getPath();s=new google.maps.LatLng(f.getAt(0).lat(),f.getAt(0).lng());i.MarkerDet[0].InfoWindow.setPosition(s);o.setCenter(s);i.MarkerDet[0].InfoWindow.open(o)}}var n=angular.module("app");n.controller("DashboardFlightController",i);i.$inject=["$scope","$http","$filter","config","CommonService","flightdataTableFactory"];n.requires.push("infinite-scroll");n.factory("flightdataTableFactory",t);t.$inject=["$http","CommonService"]}();mod=angular.module("infinite-scroll",[]);mod.directive("infiniteScroll",["$rootScope","$window","$timeout",function(n,t,i){return{link:function(r,u,f){var o,e,h,s;t=angular.element(t);h=0;f.infiniteScrollDistance!=null&&r.$watch(f.infiniteScrollDistance,function(n){return h=parseInt(n,10)});s=!0;o=!1;f.infiniteScrollDisabled!=null&&r.$watch(f.infiniteScrollDisabled,function(n){return s=!n,s&&o?(o=!1,e()):void 0});e=function(){var e,c,i,l;return(l=t.height()+t.scrollTop(),e=u.offset().top+u.height(),c=e-l,i=c<=t.height()*h,i&&s)?n.$$phase?r.$eval(f.infiniteScroll):r.$apply(f.infiniteScroll):i?o=!0:void 0};t.on("scroll",e);return r.$on("$destroy",function(){return t.off("scroll",e)}),i(function(){if(f.infiniteScrollImmediateCheck){if(r.$eval(f.infiniteScrollImmediateCheck))return e()}else return e()},0)}}}])